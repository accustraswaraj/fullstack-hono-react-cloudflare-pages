{
  "version": 3,
  "sources": ["../../../node_modules/hono/dist/utils/body.js", "../../../node_modules/hono/dist/utils/url.js", "../../../node_modules/hono/dist/request.js", "../../../node_modules/hono/dist/utils/html.js", "../../../node_modules/hono/dist/context.js", "../../../node_modules/hono/dist/compose.js", "../../../node_modules/hono/dist/router.js", "../../../node_modules/hono/dist/utils/constants.js", "../../../node_modules/hono/dist/hono-base.js", "../../../node_modules/hono/dist/router/reg-exp-router/node.js", "../../../node_modules/hono/dist/router/reg-exp-router/trie.js", "../../../node_modules/hono/dist/router/reg-exp-router/router.js", "../../../node_modules/hono/dist/router/smart-router/router.js", "../../../node_modules/hono/dist/router/trie-router/node.js", "../../../node_modules/hono/dist/router/trie-router/router.js", "../../../node_modules/hono/dist/hono.js", "../../../node_modules/@auth/core/lib/utils/cookie.js", "../../../node_modules/@auth/core/errors.js", "../../../node_modules/@auth/core/lib/utils/assert.js", "../../../node_modules/@panva/hkdf/dist/web/runtime/hkdf.js", "../../../node_modules/@panva/hkdf/dist/web/index.js", "../../../node_modules/jose/dist/browser/runtime/webcrypto.js", "../../../node_modules/jose/dist/browser/runtime/digest.js", "../../../node_modules/jose/dist/browser/lib/buffer_utils.js", "../../../node_modules/jose/dist/browser/runtime/base64url.js", "../../../node_modules/jose/dist/browser/util/errors.js", "../../../node_modules/jose/dist/browser/runtime/random.js", "../../../node_modules/jose/dist/browser/lib/iv.js", "../../../node_modules/jose/dist/browser/lib/check_iv_length.js", "../../../node_modules/jose/dist/browser/runtime/check_cek_length.js", "../../../node_modules/jose/dist/browser/runtime/timing_safe_equal.js", "../../../node_modules/jose/dist/browser/lib/crypto_key.js", "../../../node_modules/jose/dist/browser/lib/invalid_key_input.js", "../../../node_modules/jose/dist/browser/runtime/is_key_like.js", "../../../node_modules/jose/dist/browser/runtime/decrypt.js", "../../../node_modules/jose/dist/browser/lib/is_disjoint.js", "../../../node_modules/jose/dist/browser/lib/is_object.js", "../../../node_modules/jose/dist/browser/runtime/bogus.js", "../../../node_modules/jose/dist/browser/runtime/aeskw.js", "../../../node_modules/jose/dist/browser/runtime/ecdhes.js", "../../../node_modules/jose/dist/browser/lib/check_p2s.js", "../../../node_modules/jose/dist/browser/runtime/pbes2kw.js", "../../../node_modules/jose/dist/browser/runtime/subtle_rsaes.js", "../../../node_modules/jose/dist/browser/runtime/check_key_length.js", "../../../node_modules/jose/dist/browser/runtime/rsaes.js", "../../../node_modules/jose/dist/browser/lib/is_jwk.js", "../../../node_modules/jose/dist/browser/runtime/jwk_to_key.js", "../../../node_modules/jose/dist/browser/runtime/normalize_key.js", "../../../node_modules/jose/dist/browser/lib/cek.js", "../../../node_modules/jose/dist/browser/key/import.js", "../../../node_modules/jose/dist/browser/lib/check_key_type.js", "../../../node_modules/jose/dist/browser/runtime/encrypt.js", "../../../node_modules/jose/dist/browser/lib/aesgcmkw.js", "../../../node_modules/jose/dist/browser/lib/decrypt_key_management.js", "../../../node_modules/jose/dist/browser/lib/validate_crit.js", "../../../node_modules/jose/dist/browser/lib/validate_algorithms.js", "../../../node_modules/jose/dist/browser/jwe/flattened/decrypt.js", "../../../node_modules/jose/dist/browser/jwe/compact/decrypt.js", "../../../node_modules/jose/dist/browser/lib/private_symbols.js", "../../../node_modules/jose/dist/browser/runtime/key_to_jwk.js", "../../../node_modules/jose/dist/browser/key/export.js", "../../../node_modules/jose/dist/browser/lib/encrypt_key_management.js", "../../../node_modules/jose/dist/browser/jwe/flattened/encrypt.js", "../../../node_modules/jose/dist/browser/lib/epoch.js", "../../../node_modules/jose/dist/browser/lib/secs.js", "../../../node_modules/jose/dist/browser/lib/jwt_claims_set.js", "../../../node_modules/jose/dist/browser/jwt/decrypt.js", "../../../node_modules/jose/dist/browser/jwe/compact/encrypt.js", "../../../node_modules/jose/dist/browser/jwt/produce.js", "../../../node_modules/jose/dist/browser/jwt/encrypt.js", "../../../node_modules/jose/dist/browser/jwk/thumbprint.js", "../../../node_modules/jose/dist/browser/util/base64url.js", "../../../node_modules/jose/dist/browser/util/decode_jwt.js", "../../../node_modules/@auth/core/lib/vendored/cookie.js", "../../../node_modules/@auth/core/jwt.js", "../../../node_modules/@auth/core/lib/utils/callback-url.js", "../../../node_modules/@auth/core/lib/utils/logger.js", "../../../node_modules/@auth/core/lib/utils/actions.js", "../../../node_modules/@auth/core/lib/utils/web.js", "../../../node_modules/@auth/core/lib/actions/callback/oauth/csrf-token.js", "../../../node_modules/@auth/core/lib/utils/merge.js", "../../../node_modules/@auth/core/lib/symbols.js", "../../../node_modules/@auth/core/lib/utils/providers.js", "../../../node_modules/@auth/core/lib/init.js", "../../../node_modules/preact/src/constants.js", "../../../node_modules/preact/src/util.js", "../../../node_modules/preact/src/options.js", "../../../node_modules/preact/src/create-element.js", "../../../node_modules/preact/src/component.js", "../../../node_modules/preact/src/diff/props.js", "../../../node_modules/preact/src/create-context.js", "../../../node_modules/preact/src/diff/children.js", "../../../node_modules/preact/src/diff/index.js", "../../../node_modules/preact/src/render.js", "../../../node_modules/preact/src/clone-element.js", "../../../node_modules/preact/src/diff/catch-error.js", "../../../node_modules/preact-render-to-string/src/lib/util.js", "../../../node_modules/preact-render-to-string/src/index.js", "../../../node_modules/preact/jsx-runtime/src/utils.js", "../../../node_modules/preact/src/constants.js", "../../../node_modules/preact/jsx-runtime/src/index.js", "../../../node_modules/@auth/core/lib/pages/error.js", "../../../node_modules/@auth/core/lib/utils/webauthn-client.js", "../../../node_modules/@auth/core/lib/pages/signin.js", "../../../node_modules/@auth/core/lib/pages/signout.js", "../../../node_modules/@auth/core/lib/pages/styles.js", "../../../node_modules/@auth/core/lib/pages/verify-request.js", "../../../node_modules/@auth/core/lib/pages/index.js", "../../../node_modules/@auth/core/lib/utils/date.js", "../../../node_modules/@auth/core/lib/actions/callback/handle-login.js", "../../../node_modules/oauth4webapi/src/index.ts", "../../../node_modules/@auth/core/lib/actions/callback/oauth/checks.js", "../../../node_modules/@auth/core/lib/actions/callback/oauth/callback.js", "../../../node_modules/@auth/core/lib/utils/webauthn-utils.js", "../../../node_modules/@auth/core/lib/actions/callback/index.js", "../../../node_modules/@auth/core/lib/actions/session.js", "../../../node_modules/@auth/core/lib/actions/signin/authorization-url.js", "../../../node_modules/@auth/core/lib/actions/signin/send-token.js", "../../../node_modules/@auth/core/lib/actions/signin/index.js", "../../../node_modules/@auth/core/lib/actions/signout.js", "../../../node_modules/@auth/core/lib/utils/session.js", "../../../node_modules/@auth/core/lib/actions/webauthn-options.js", "../../../node_modules/@auth/core/lib/index.js", "../../../node_modules/@auth/core/lib/utils/env.js", "../../../node_modules/@auth/core/index.js", "../../../node_modules/hono/dist/helper/adapter/index.js", "../../../node_modules/hono/dist/http-exception.js", "../../../node_modules/@hono/auth-js/dist/index.mjs", "../../../node_modules/@auth/core/providers/github.js", "../../../api.js", "C:/Users/Swaraj Sahu/AppData/Roaming/npm/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "C:/Users/Swaraj Sahu/AppData/Roaming/npm/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-K3Abh8/middleware-insertion-facade.js", "C:/Users/Swaraj Sahu/AppData/Roaming/npm/node_modules/wrangler/templates/middleware/common.ts", "../bundle-K3Abh8/middleware-loader.entry.ts"],
  "sourceRoot": "A:\\Accustra\\Devlopement\\react-projects\\fullstack-hono-react-cloudflare-pages\\.wrangler\\tmp\\dev-Lr3ngG",
  "sourcesContent": ["// src/utils/body.ts\nimport { HonoRequest } from \"../request.js\";\nvar parseBody = async (request, options = /* @__PURE__ */ Object.create(null)) => {\n  const { all = false, dot = false } = options;\n  const headers = request instanceof HonoRequest ? request.raw.headers : request.headers;\n  const contentType = headers.get(\"Content-Type\");\n  if (contentType?.startsWith(\"multipart/form-data\") || contentType?.startsWith(\"application/x-www-form-urlencoded\")) {\n    return parseFormData(request, { all, dot });\n  }\n  return {};\n};\nasync function parseFormData(request, options) {\n  const formData = await request.formData();\n  if (formData) {\n    return convertFormDataToBodyData(formData, options);\n  }\n  return {};\n}\nfunction convertFormDataToBodyData(formData, options) {\n  const form = /* @__PURE__ */ Object.create(null);\n  formData.forEach((value, key) => {\n    const shouldParseAllValues = options.all || key.endsWith(\"[]\");\n    if (!shouldParseAllValues) {\n      form[key] = value;\n    } else {\n      handleParsingAllValues(form, key, value);\n    }\n  });\n  if (options.dot) {\n    Object.entries(form).forEach(([key, value]) => {\n      const shouldParseDotValues = key.includes(\".\");\n      if (shouldParseDotValues) {\n        handleParsingNestedValues(form, key, value);\n        delete form[key];\n      }\n    });\n  }\n  return form;\n}\nvar handleParsingAllValues = (form, key, value) => {\n  if (form[key] !== void 0) {\n    if (Array.isArray(form[key])) {\n      ;\n      form[key].push(value);\n    } else {\n      form[key] = [form[key], value];\n    }\n  } else {\n    form[key] = value;\n  }\n};\nvar handleParsingNestedValues = (form, key, value) => {\n  let nestedForm = form;\n  const keys = key.split(\".\");\n  keys.forEach((key2, index) => {\n    if (index === keys.length - 1) {\n      nestedForm[key2] = value;\n    } else {\n      if (!nestedForm[key2] || typeof nestedForm[key2] !== \"object\" || Array.isArray(nestedForm[key2]) || nestedForm[key2] instanceof File) {\n        nestedForm[key2] = /* @__PURE__ */ Object.create(null);\n      }\n      nestedForm = nestedForm[key2];\n    }\n  });\n};\nexport {\n  parseBody\n};\n", "// src/utils/url.ts\nvar splitPath = (path) => {\n  const paths = path.split(\"/\");\n  if (paths[0] === \"\") {\n    paths.shift();\n  }\n  return paths;\n};\nvar splitRoutingPath = (routePath) => {\n  const { groups, path } = extractGroupsFromPath(routePath);\n  const paths = splitPath(path);\n  return replaceGroupMarks(paths, groups);\n};\nvar extractGroupsFromPath = (path) => {\n  const groups = [];\n  path = path.replace(/\\{[^}]+\\}/g, (match, index) => {\n    const mark = `@${index}`;\n    groups.push([mark, match]);\n    return mark;\n  });\n  return { groups, path };\n};\nvar replaceGroupMarks = (paths, groups) => {\n  for (let i = groups.length - 1; i >= 0; i--) {\n    const [mark] = groups[i];\n    for (let j = paths.length - 1; j >= 0; j--) {\n      if (paths[j].includes(mark)) {\n        paths[j] = paths[j].replace(mark, groups[i][1]);\n        break;\n      }\n    }\n  }\n  return paths;\n};\nvar patternCache = {};\nvar getPattern = (label) => {\n  if (label === \"*\") {\n    return \"*\";\n  }\n  const match = label.match(/^\\:([^\\{\\}]+)(?:\\{(.+)\\})?$/);\n  if (match) {\n    if (!patternCache[label]) {\n      if (match[2]) {\n        patternCache[label] = [label, match[1], new RegExp(\"^\" + match[2] + \"$\")];\n      } else {\n        patternCache[label] = [label, match[1], true];\n      }\n    }\n    return patternCache[label];\n  }\n  return null;\n};\nvar tryDecode = (str, decoder) => {\n  try {\n    return decoder(str);\n  } catch {\n    return str.replace(/(?:%[0-9A-Fa-f]{2})+/g, (match) => {\n      try {\n        return decoder(match);\n      } catch {\n        return match;\n      }\n    });\n  }\n};\nvar tryDecodeURI = (str) => tryDecode(str, decodeURI);\nvar getPath = (request) => {\n  const url = request.url;\n  const start = url.indexOf(\"/\", 8);\n  let i = start;\n  for (; i < url.length; i++) {\n    const charCode = url.charCodeAt(i);\n    if (charCode === 37) {\n      const queryIndex = url.indexOf(\"?\", i);\n      const path = url.slice(start, queryIndex === -1 ? void 0 : queryIndex);\n      return tryDecodeURI(path.includes(\"%25\") ? path.replace(/%25/g, \"%2525\") : path);\n    } else if (charCode === 63) {\n      break;\n    }\n  }\n  return url.slice(start, i);\n};\nvar getQueryStrings = (url) => {\n  const queryIndex = url.indexOf(\"?\", 8);\n  return queryIndex === -1 ? \"\" : \"?\" + url.slice(queryIndex + 1);\n};\nvar getPathNoStrict = (request) => {\n  const result = getPath(request);\n  return result.length > 1 && result.at(-1) === \"/\" ? result.slice(0, -1) : result;\n};\nvar mergePath = (...paths) => {\n  let p = \"\";\n  let endsWithSlash = false;\n  for (let path of paths) {\n    if (p.at(-1) === \"/\") {\n      p = p.slice(0, -1);\n      endsWithSlash = true;\n    }\n    if (path[0] !== \"/\") {\n      path = `/${path}`;\n    }\n    if (path === \"/\" && endsWithSlash) {\n      p = `${p}/`;\n    } else if (path !== \"/\") {\n      p = `${p}${path}`;\n    }\n    if (path === \"/\" && p === \"\") {\n      p = \"/\";\n    }\n  }\n  return p;\n};\nvar checkOptionalParameter = (path) => {\n  if (!path.match(/\\:.+\\?$/)) {\n    return null;\n  }\n  const segments = path.split(\"/\");\n  const results = [];\n  let basePath = \"\";\n  segments.forEach((segment) => {\n    if (segment !== \"\" && !/\\:/.test(segment)) {\n      basePath += \"/\" + segment;\n    } else if (/\\:/.test(segment)) {\n      if (/\\?/.test(segment)) {\n        if (results.length === 0 && basePath === \"\") {\n          results.push(\"/\");\n        } else {\n          results.push(basePath);\n        }\n        const optionalSegment = segment.replace(\"?\", \"\");\n        basePath += \"/\" + optionalSegment;\n        results.push(basePath);\n      } else {\n        basePath += \"/\" + segment;\n      }\n    }\n  });\n  return results.filter((v, i, a) => a.indexOf(v) === i);\n};\nvar _decodeURI = (value) => {\n  if (!/[%+]/.test(value)) {\n    return value;\n  }\n  if (value.indexOf(\"+\") !== -1) {\n    value = value.replace(/\\+/g, \" \");\n  }\n  return value.indexOf(\"%\") !== -1 ? decodeURIComponent_(value) : value;\n};\nvar _getQueryParam = (url, key, multiple) => {\n  let encoded;\n  if (!multiple && key && !/[%+]/.test(key)) {\n    let keyIndex2 = url.indexOf(`?${key}`, 8);\n    if (keyIndex2 === -1) {\n      keyIndex2 = url.indexOf(`&${key}`, 8);\n    }\n    while (keyIndex2 !== -1) {\n      const trailingKeyCode = url.charCodeAt(keyIndex2 + key.length + 1);\n      if (trailingKeyCode === 61) {\n        const valueIndex = keyIndex2 + key.length + 2;\n        const endIndex = url.indexOf(\"&\", valueIndex);\n        return _decodeURI(url.slice(valueIndex, endIndex === -1 ? void 0 : endIndex));\n      } else if (trailingKeyCode == 38 || isNaN(trailingKeyCode)) {\n        return \"\";\n      }\n      keyIndex2 = url.indexOf(`&${key}`, keyIndex2 + 1);\n    }\n    encoded = /[%+]/.test(url);\n    if (!encoded) {\n      return void 0;\n    }\n  }\n  const results = {};\n  encoded ??= /[%+]/.test(url);\n  let keyIndex = url.indexOf(\"?\", 8);\n  while (keyIndex !== -1) {\n    const nextKeyIndex = url.indexOf(\"&\", keyIndex + 1);\n    let valueIndex = url.indexOf(\"=\", keyIndex);\n    if (valueIndex > nextKeyIndex && nextKeyIndex !== -1) {\n      valueIndex = -1;\n    }\n    let name = url.slice(\n      keyIndex + 1,\n      valueIndex === -1 ? nextKeyIndex === -1 ? void 0 : nextKeyIndex : valueIndex\n    );\n    if (encoded) {\n      name = _decodeURI(name);\n    }\n    keyIndex = nextKeyIndex;\n    if (name === \"\") {\n      continue;\n    }\n    let value;\n    if (valueIndex === -1) {\n      value = \"\";\n    } else {\n      value = url.slice(valueIndex + 1, nextKeyIndex === -1 ? void 0 : nextKeyIndex);\n      if (encoded) {\n        value = _decodeURI(value);\n      }\n    }\n    if (multiple) {\n      if (!(results[name] && Array.isArray(results[name]))) {\n        results[name] = [];\n      }\n      ;\n      results[name].push(value);\n    } else {\n      results[name] ??= value;\n    }\n  }\n  return key ? results[key] : results;\n};\nvar getQueryParam = _getQueryParam;\nvar getQueryParams = (url, key) => {\n  return _getQueryParam(url, key, true);\n};\nvar decodeURIComponent_ = decodeURIComponent;\nexport {\n  checkOptionalParameter,\n  decodeURIComponent_,\n  getPath,\n  getPathNoStrict,\n  getPattern,\n  getQueryParam,\n  getQueryParams,\n  getQueryStrings,\n  mergePath,\n  splitPath,\n  splitRoutingPath,\n  tryDecode\n};\n", "// src/request.ts\nimport { parseBody } from \"./utils/body.js\";\nimport { decodeURIComponent_, getQueryParam, getQueryParams, tryDecode } from \"./utils/url.js\";\nvar tryDecodeURIComponent = (str) => tryDecode(str, decodeURIComponent_);\nvar HonoRequest = class {\n  raw;\n  #validatedData;\n  #matchResult;\n  routeIndex = 0;\n  path;\n  bodyCache = {};\n  constructor(request, path = \"/\", matchResult = [[]]) {\n    this.raw = request;\n    this.path = path;\n    this.#matchResult = matchResult;\n    this.#validatedData = {};\n  }\n  param(key) {\n    return key ? this.#getDecodedParam(key) : this.#getAllDecodedParams();\n  }\n  #getDecodedParam(key) {\n    const paramKey = this.#matchResult[0][this.routeIndex][1][key];\n    const param = this.#getParamValue(paramKey);\n    return param ? /\\%/.test(param) ? tryDecodeURIComponent(param) : param : void 0;\n  }\n  #getAllDecodedParams() {\n    const decoded = {};\n    const keys = Object.keys(this.#matchResult[0][this.routeIndex][1]);\n    for (const key of keys) {\n      const value = this.#getParamValue(this.#matchResult[0][this.routeIndex][1][key]);\n      if (value && typeof value === \"string\") {\n        decoded[key] = /\\%/.test(value) ? tryDecodeURIComponent(value) : value;\n      }\n    }\n    return decoded;\n  }\n  #getParamValue(paramKey) {\n    return this.#matchResult[1] ? this.#matchResult[1][paramKey] : paramKey;\n  }\n  query(key) {\n    return getQueryParam(this.url, key);\n  }\n  queries(key) {\n    return getQueryParams(this.url, key);\n  }\n  header(name) {\n    if (name) {\n      return this.raw.headers.get(name.toLowerCase()) ?? void 0;\n    }\n    const headerData = {};\n    this.raw.headers.forEach((value, key) => {\n      headerData[key] = value;\n    });\n    return headerData;\n  }\n  async parseBody(options) {\n    return this.bodyCache.parsedBody ??= await parseBody(this, options);\n  }\n  #cachedBody = (key) => {\n    const { bodyCache, raw } = this;\n    const cachedBody = bodyCache[key];\n    if (cachedBody) {\n      return cachedBody;\n    }\n    const anyCachedKey = Object.keys(bodyCache)[0];\n    if (anyCachedKey) {\n      return bodyCache[anyCachedKey].then((body) => {\n        if (anyCachedKey === \"json\") {\n          body = JSON.stringify(body);\n        }\n        return new Response(body)[key]();\n      });\n    }\n    return bodyCache[key] = raw[key]();\n  };\n  json() {\n    return this.#cachedBody(\"json\");\n  }\n  text() {\n    return this.#cachedBody(\"text\");\n  }\n  arrayBuffer() {\n    return this.#cachedBody(\"arrayBuffer\");\n  }\n  blob() {\n    return this.#cachedBody(\"blob\");\n  }\n  formData() {\n    return this.#cachedBody(\"formData\");\n  }\n  addValidatedData(target, data) {\n    this.#validatedData[target] = data;\n  }\n  valid(target) {\n    return this.#validatedData[target];\n  }\n  get url() {\n    return this.raw.url;\n  }\n  get method() {\n    return this.raw.method;\n  }\n  get matchedRoutes() {\n    return this.#matchResult[0].map(([[, route]]) => route);\n  }\n  get routePath() {\n    return this.#matchResult[0].map(([[, route]]) => route)[this.routeIndex].path;\n  }\n};\nexport {\n  HonoRequest\n};\n", "// src/utils/html.ts\nvar HtmlEscapedCallbackPhase = {\n  Stringify: 1,\n  BeforeStream: 2,\n  Stream: 3\n};\nvar raw = (value, callbacks) => {\n  const escapedString = new String(value);\n  escapedString.isEscaped = true;\n  escapedString.callbacks = callbacks;\n  return escapedString;\n};\nvar escapeRe = /[&<>'\"]/;\nvar stringBufferToString = async (buffer, callbacks) => {\n  let str = \"\";\n  callbacks ||= [];\n  const resolvedBuffer = await Promise.all(buffer);\n  for (let i = resolvedBuffer.length - 1; ; i--) {\n    str += resolvedBuffer[i];\n    i--;\n    if (i < 0) {\n      break;\n    }\n    let r = resolvedBuffer[i];\n    if (typeof r === \"object\") {\n      callbacks.push(...r.callbacks || []);\n    }\n    const isEscaped = r.isEscaped;\n    r = await (typeof r === \"object\" ? r.toString() : r);\n    if (typeof r === \"object\") {\n      callbacks.push(...r.callbacks || []);\n    }\n    if (r.isEscaped ?? isEscaped) {\n      str += r;\n    } else {\n      const buf = [str];\n      escapeToBuffer(r, buf);\n      str = buf[0];\n    }\n  }\n  return raw(str, callbacks);\n};\nvar escapeToBuffer = (str, buffer) => {\n  const match = str.search(escapeRe);\n  if (match === -1) {\n    buffer[0] += str;\n    return;\n  }\n  let escape;\n  let index;\n  let lastIndex = 0;\n  for (index = match; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34:\n        escape = \"&quot;\";\n        break;\n      case 39:\n        escape = \"&#39;\";\n        break;\n      case 38:\n        escape = \"&amp;\";\n        break;\n      case 60:\n        escape = \"&lt;\";\n        break;\n      case 62:\n        escape = \"&gt;\";\n        break;\n      default:\n        continue;\n    }\n    buffer[0] += str.substring(lastIndex, index) + escape;\n    lastIndex = index + 1;\n  }\n  buffer[0] += str.substring(lastIndex, index);\n};\nvar resolveCallbackSync = (str) => {\n  const callbacks = str.callbacks;\n  if (!callbacks?.length) {\n    return str;\n  }\n  const buffer = [str];\n  const context = {};\n  callbacks.forEach((c) => c({ phase: HtmlEscapedCallbackPhase.Stringify, buffer, context }));\n  return buffer[0];\n};\nvar resolveCallback = async (str, phase, preserveCallbacks, context, buffer) => {\n  if (typeof str === \"object\" && !(str instanceof String)) {\n    if (!(str instanceof Promise)) {\n      str = str.toString();\n    }\n    if (str instanceof Promise) {\n      str = await str;\n    }\n  }\n  const callbacks = str.callbacks;\n  if (!callbacks?.length) {\n    return Promise.resolve(str);\n  }\n  if (buffer) {\n    buffer[0] += str;\n  } else {\n    buffer = [str];\n  }\n  const resStr = Promise.all(callbacks.map((c) => c({ phase, buffer, context }))).then(\n    (res) => Promise.all(\n      res.filter(Boolean).map((str2) => resolveCallback(str2, phase, false, context, buffer))\n    ).then(() => buffer[0])\n  );\n  if (preserveCallbacks) {\n    return raw(await resStr, callbacks);\n  } else {\n    return resStr;\n  }\n};\nexport {\n  HtmlEscapedCallbackPhase,\n  escapeToBuffer,\n  raw,\n  resolveCallback,\n  resolveCallbackSync,\n  stringBufferToString\n};\n", "// src/context.ts\nimport { HonoRequest } from \"./request.js\";\nimport { HtmlEscapedCallbackPhase, resolveCallback } from \"./utils/html.js\";\nvar TEXT_PLAIN = \"text/plain; charset=UTF-8\";\nvar setHeaders = (headers, map = {}) => {\n  for (const key of Object.keys(map)) {\n    headers.set(key, map[key]);\n  }\n  return headers;\n};\nvar Context = class {\n  #rawRequest;\n  #req;\n  env = {};\n  #var;\n  finalized = false;\n  error;\n  #status = 200;\n  #executionCtx;\n  #headers;\n  #preparedHeaders;\n  #res;\n  #isFresh = true;\n  #layout;\n  #renderer;\n  #notFoundHandler;\n  #matchResult;\n  #path;\n  constructor(req, options) {\n    this.#rawRequest = req;\n    if (options) {\n      this.#executionCtx = options.executionCtx;\n      this.env = options.env;\n      this.#notFoundHandler = options.notFoundHandler;\n      this.#path = options.path;\n      this.#matchResult = options.matchResult;\n    }\n  }\n  get req() {\n    this.#req ??= new HonoRequest(this.#rawRequest, this.#path, this.#matchResult);\n    return this.#req;\n  }\n  get event() {\n    if (this.#executionCtx && \"respondWith\" in this.#executionCtx) {\n      return this.#executionCtx;\n    } else {\n      throw Error(\"This context has no FetchEvent\");\n    }\n  }\n  get executionCtx() {\n    if (this.#executionCtx) {\n      return this.#executionCtx;\n    } else {\n      throw Error(\"This context has no ExecutionContext\");\n    }\n  }\n  get res() {\n    this.#isFresh = false;\n    return this.#res ||= new Response(\"404 Not Found\", { status: 404 });\n  }\n  set res(_res) {\n    this.#isFresh = false;\n    if (this.#res && _res) {\n      try {\n        for (const [k, v] of this.#res.headers.entries()) {\n          if (k === \"content-type\") {\n            continue;\n          }\n          if (k === \"set-cookie\") {\n            const cookies = this.#res.headers.getSetCookie();\n            _res.headers.delete(\"set-cookie\");\n            for (const cookie of cookies) {\n              _res.headers.append(\"set-cookie\", cookie);\n            }\n          } else {\n            _res.headers.set(k, v);\n          }\n        }\n      } catch (e) {\n        if (e instanceof TypeError && e.message.includes(\"immutable\")) {\n          this.res = new Response(_res.body, {\n            headers: _res.headers,\n            status: _res.status\n          });\n          return;\n        } else {\n          throw e;\n        }\n      }\n    }\n    this.#res = _res;\n    this.finalized = true;\n  }\n  render = (...args) => {\n    this.#renderer ??= (content) => this.html(content);\n    return this.#renderer(...args);\n  };\n  setLayout = (layout) => this.#layout = layout;\n  getLayout = () => this.#layout;\n  setRenderer = (renderer) => {\n    this.#renderer = renderer;\n  };\n  header = (name, value, options) => {\n    if (value === void 0) {\n      if (this.#headers) {\n        this.#headers.delete(name);\n      } else if (this.#preparedHeaders) {\n        delete this.#preparedHeaders[name.toLocaleLowerCase()];\n      }\n      if (this.finalized) {\n        this.res.headers.delete(name);\n      }\n      return;\n    }\n    if (options?.append) {\n      if (!this.#headers) {\n        this.#isFresh = false;\n        this.#headers = new Headers(this.#preparedHeaders);\n        this.#preparedHeaders = {};\n      }\n      this.#headers.append(name, value);\n    } else {\n      if (this.#headers) {\n        this.#headers.set(name, value);\n      } else {\n        this.#preparedHeaders ??= {};\n        this.#preparedHeaders[name.toLowerCase()] = value;\n      }\n    }\n    if (this.finalized) {\n      if (options?.append) {\n        this.res.headers.append(name, value);\n      } else {\n        this.res.headers.set(name, value);\n      }\n    }\n  };\n  status = (status) => {\n    this.#isFresh = false;\n    this.#status = status;\n  };\n  set = (key, value) => {\n    this.#var ??= /* @__PURE__ */ new Map();\n    this.#var.set(key, value);\n  };\n  get = (key) => {\n    return this.#var ? this.#var.get(key) : void 0;\n  };\n  get var() {\n    if (!this.#var) {\n      return {};\n    }\n    return Object.fromEntries(this.#var);\n  }\n  #newResponse(data, arg, headers) {\n    if (this.#isFresh && !headers && !arg && this.#status === 200) {\n      return new Response(data, {\n        headers: this.#preparedHeaders\n      });\n    }\n    if (arg && typeof arg !== \"number\") {\n      const header = new Headers(arg.headers);\n      if (this.#headers) {\n        this.#headers.forEach((v, k) => {\n          if (k === \"set-cookie\") {\n            header.append(k, v);\n          } else {\n            header.set(k, v);\n          }\n        });\n      }\n      const headers2 = setHeaders(header, this.#preparedHeaders);\n      return new Response(data, {\n        headers: headers2,\n        status: arg.status ?? this.#status\n      });\n    }\n    const status = typeof arg === \"number\" ? arg : this.#status;\n    this.#preparedHeaders ??= {};\n    this.#headers ??= new Headers();\n    setHeaders(this.#headers, this.#preparedHeaders);\n    if (this.#res) {\n      this.#res.headers.forEach((v, k) => {\n        if (k === \"set-cookie\") {\n          this.#headers?.append(k, v);\n        } else {\n          this.#headers?.set(k, v);\n        }\n      });\n      setHeaders(this.#headers, this.#preparedHeaders);\n    }\n    headers ??= {};\n    for (const [k, v] of Object.entries(headers)) {\n      if (typeof v === \"string\") {\n        this.#headers.set(k, v);\n      } else {\n        this.#headers.delete(k);\n        for (const v2 of v) {\n          this.#headers.append(k, v2);\n        }\n      }\n    }\n    return new Response(data, {\n      status,\n      headers: this.#headers\n    });\n  }\n  newResponse = (...args) => this.#newResponse(...args);\n  body = (data, arg, headers) => {\n    return typeof arg === \"number\" ? this.#newResponse(data, arg, headers) : this.#newResponse(data, arg);\n  };\n  text = (text, arg, headers) => {\n    if (!this.#preparedHeaders) {\n      if (this.#isFresh && !headers && !arg) {\n        return new Response(text);\n      }\n      this.#preparedHeaders = {};\n    }\n    this.#preparedHeaders[\"content-type\"] = TEXT_PLAIN;\n    if (typeof arg === \"number\") {\n      return this.#newResponse(text, arg, headers);\n    }\n    return this.#newResponse(text, arg);\n  };\n  json = (object, arg, headers) => {\n    const body = JSON.stringify(object);\n    this.#preparedHeaders ??= {};\n    this.#preparedHeaders[\"content-type\"] = \"application/json\";\n    return typeof arg === \"number\" ? this.#newResponse(body, arg, headers) : this.#newResponse(body, arg);\n  };\n  html = (html, arg, headers) => {\n    this.#preparedHeaders ??= {};\n    this.#preparedHeaders[\"content-type\"] = \"text/html; charset=UTF-8\";\n    if (typeof html === \"object\") {\n      return resolveCallback(html, HtmlEscapedCallbackPhase.Stringify, false, {}).then((html2) => {\n        return typeof arg === \"number\" ? this.#newResponse(html2, arg, headers) : this.#newResponse(html2, arg);\n      });\n    }\n    return typeof arg === \"number\" ? this.#newResponse(html, arg, headers) : this.#newResponse(html, arg);\n  };\n  redirect = (location, status) => {\n    this.#headers ??= new Headers();\n    this.#headers.set(\"Location\", String(location));\n    return this.newResponse(null, status ?? 302);\n  };\n  notFound = () => {\n    this.#notFoundHandler ??= () => new Response();\n    return this.#notFoundHandler(this);\n  };\n};\nexport {\n  Context,\n  TEXT_PLAIN\n};\n", "// src/compose.ts\nimport { Context } from \"./context.js\";\nvar compose = (middleware, onError, onNotFound) => {\n  return (context, next) => {\n    let index = -1;\n    const isContext = context instanceof Context;\n    return dispatch(0);\n    async function dispatch(i) {\n      if (i <= index) {\n        throw new Error(\"next() called multiple times\");\n      }\n      index = i;\n      let res;\n      let isError = false;\n      let handler;\n      if (middleware[i]) {\n        handler = middleware[i][0][0];\n        if (isContext) {\n          context.req.routeIndex = i;\n        }\n      } else {\n        handler = i === middleware.length && next || void 0;\n      }\n      if (!handler) {\n        if (isContext && context.finalized === false && onNotFound) {\n          res = await onNotFound(context);\n        }\n      } else {\n        try {\n          res = await handler(context, () => {\n            return dispatch(i + 1);\n          });\n        } catch (err) {\n          if (err instanceof Error && isContext && onError) {\n            context.error = err;\n            res = await onError(err, context);\n            isError = true;\n          } else {\n            throw err;\n          }\n        }\n      }\n      if (res && (context.finalized === false || isError)) {\n        context.res = res;\n      }\n      return context;\n    }\n  };\n};\nexport {\n  compose\n};\n", "// src/router.ts\nvar METHOD_NAME_ALL = \"ALL\";\nvar METHOD_NAME_ALL_LOWERCASE = \"all\";\nvar METHODS = [\"get\", \"post\", \"put\", \"delete\", \"options\", \"patch\"];\nvar MESSAGE_MATCHER_IS_ALREADY_BUILT = \"Can not add a route since the matcher is already built.\";\nvar UnsupportedPathError = class extends Error {\n};\nexport {\n  MESSAGE_MATCHER_IS_ALREADY_BUILT,\n  METHODS,\n  METHOD_NAME_ALL,\n  METHOD_NAME_ALL_LOWERCASE,\n  UnsupportedPathError\n};\n", "// src/utils/constants.ts\nvar COMPOSED_HANDLER = \"__COMPOSED_HANDLER\";\nexport {\n  COMPOSED_HANDLER\n};\n", "// src/hono-base.ts\nimport { compose } from \"./compose.js\";\nimport { Context } from \"./context.js\";\nimport { METHODS, METHOD_NAME_ALL, METHOD_NAME_ALL_LOWERCASE } from \"./router.js\";\nimport { COMPOSED_HANDLER } from \"./utils/constants.js\";\nimport { getPath, getPathNoStrict, mergePath } from \"./utils/url.js\";\nvar notFoundHandler = (c) => {\n  return c.text(\"404 Not Found\", 404);\n};\nvar errorHandler = (err, c) => {\n  if (\"getResponse\" in err) {\n    return err.getResponse();\n  }\n  console.error(err);\n  return c.text(\"Internal Server Error\", 500);\n};\nvar Hono = class {\n  get;\n  post;\n  put;\n  delete;\n  options;\n  patch;\n  all;\n  on;\n  use;\n  router;\n  getPath;\n  _basePath = \"/\";\n  #path = \"/\";\n  routes = [];\n  constructor(options = {}) {\n    const allMethods = [...METHODS, METHOD_NAME_ALL_LOWERCASE];\n    allMethods.forEach((method) => {\n      this[method] = (args1, ...args) => {\n        if (typeof args1 === \"string\") {\n          this.#path = args1;\n        } else {\n          this.#addRoute(method, this.#path, args1);\n        }\n        args.forEach((handler) => {\n          this.#addRoute(method, this.#path, handler);\n        });\n        return this;\n      };\n    });\n    this.on = (method, path, ...handlers) => {\n      for (const p of [path].flat()) {\n        this.#path = p;\n        for (const m of [method].flat()) {\n          handlers.map((handler) => {\n            this.#addRoute(m.toUpperCase(), this.#path, handler);\n          });\n        }\n      }\n      return this;\n    };\n    this.use = (arg1, ...handlers) => {\n      if (typeof arg1 === \"string\") {\n        this.#path = arg1;\n      } else {\n        this.#path = \"*\";\n        handlers.unshift(arg1);\n      }\n      handlers.forEach((handler) => {\n        this.#addRoute(METHOD_NAME_ALL, this.#path, handler);\n      });\n      return this;\n    };\n    const strict = options.strict ?? true;\n    delete options.strict;\n    Object.assign(this, options);\n    this.getPath = strict ? options.getPath ?? getPath : getPathNoStrict;\n  }\n  #clone() {\n    const clone = new Hono({\n      router: this.router,\n      getPath: this.getPath\n    });\n    clone.routes = this.routes;\n    return clone;\n  }\n  #notFoundHandler = notFoundHandler;\n  errorHandler = errorHandler;\n  route(path, app) {\n    const subApp = this.basePath(path);\n    app.routes.map((r) => {\n      let handler;\n      if (app.errorHandler === errorHandler) {\n        handler = r.handler;\n      } else {\n        handler = async (c, next) => (await compose([], app.errorHandler)(c, () => r.handler(c, next))).res;\n        handler[COMPOSED_HANDLER] = r.handler;\n      }\n      subApp.#addRoute(r.method, r.path, handler);\n    });\n    return this;\n  }\n  basePath(path) {\n    const subApp = this.#clone();\n    subApp._basePath = mergePath(this._basePath, path);\n    return subApp;\n  }\n  onError = (handler) => {\n    this.errorHandler = handler;\n    return this;\n  };\n  notFound = (handler) => {\n    this.#notFoundHandler = handler;\n    return this;\n  };\n  mount(path, applicationHandler, options) {\n    let replaceRequest;\n    let optionHandler;\n    if (options) {\n      if (typeof options === \"function\") {\n        optionHandler = options;\n      } else {\n        optionHandler = options.optionHandler;\n        replaceRequest = options.replaceRequest;\n      }\n    }\n    const getOptions = optionHandler ? (c) => {\n      const options2 = optionHandler(c);\n      return Array.isArray(options2) ? options2 : [options2];\n    } : (c) => {\n      let executionContext = void 0;\n      try {\n        executionContext = c.executionCtx;\n      } catch {\n      }\n      return [c.env, executionContext];\n    };\n    replaceRequest ||= (() => {\n      const mergedPath = mergePath(this._basePath, path);\n      const pathPrefixLength = mergedPath === \"/\" ? 0 : mergedPath.length;\n      return (request) => {\n        const url = new URL(request.url);\n        url.pathname = url.pathname.slice(pathPrefixLength) || \"/\";\n        return new Request(url, request);\n      };\n    })();\n    const handler = async (c, next) => {\n      const res = await applicationHandler(replaceRequest(c.req.raw), ...getOptions(c));\n      if (res) {\n        return res;\n      }\n      await next();\n    };\n    this.#addRoute(METHOD_NAME_ALL, mergePath(path, \"*\"), handler);\n    return this;\n  }\n  #addRoute(method, path, handler) {\n    method = method.toUpperCase();\n    path = mergePath(this._basePath, path);\n    const r = { path, method, handler };\n    this.router.add(method, path, [handler, r]);\n    this.routes.push(r);\n  }\n  #handleError(err, c) {\n    if (err instanceof Error) {\n      return this.errorHandler(err, c);\n    }\n    throw err;\n  }\n  #dispatch(request, executionCtx, env, method) {\n    if (method === \"HEAD\") {\n      return (async () => new Response(null, await this.#dispatch(request, executionCtx, env, \"GET\")))();\n    }\n    const path = this.getPath(request, { env });\n    const matchResult = this.router.match(method, path);\n    const c = new Context(request, {\n      path,\n      matchResult,\n      env,\n      executionCtx,\n      notFoundHandler: this.#notFoundHandler\n    });\n    if (matchResult[0].length === 1) {\n      let res;\n      try {\n        res = matchResult[0][0][0][0](c, async () => {\n          c.res = await this.#notFoundHandler(c);\n        });\n      } catch (err) {\n        return this.#handleError(err, c);\n      }\n      return res instanceof Promise ? res.then(\n        (resolved) => resolved || (c.finalized ? c.res : this.#notFoundHandler(c))\n      ).catch((err) => this.#handleError(err, c)) : res ?? this.#notFoundHandler(c);\n    }\n    const composed = compose(matchResult[0], this.errorHandler, this.#notFoundHandler);\n    return (async () => {\n      try {\n        const context = await composed(c);\n        if (!context.finalized) {\n          throw new Error(\n            \"Context is not finalized. Did you forget to return a Response object or `await next()`?\"\n          );\n        }\n        return context.res;\n      } catch (err) {\n        return this.#handleError(err, c);\n      }\n    })();\n  }\n  fetch = (request, ...rest) => {\n    return this.#dispatch(request, rest[1], rest[0], request.method);\n  };\n  request = (input, requestInit, Env, executionCtx) => {\n    if (input instanceof Request) {\n      return this.fetch(requestInit ? new Request(input, requestInit) : input, Env, executionCtx);\n    }\n    input = input.toString();\n    return this.fetch(\n      new Request(\n        /^https?:\\/\\//.test(input) ? input : `http://localhost${mergePath(\"/\", input)}`,\n        requestInit\n      ),\n      Env,\n      executionCtx\n    );\n  };\n  fire = () => {\n    addEventListener(\"fetch\", (event) => {\n      event.respondWith(this.#dispatch(event.request, event, void 0, event.request.method));\n    });\n  };\n};\nexport {\n  Hono as HonoBase\n};\n", "// src/router/reg-exp-router/node.ts\nvar LABEL_REG_EXP_STR = \"[^/]+\";\nvar ONLY_WILDCARD_REG_EXP_STR = \".*\";\nvar TAIL_WILDCARD_REG_EXP_STR = \"(?:|/.*)\";\nvar PATH_ERROR = Symbol();\nvar regExpMetaChars = new Set(\".\\\\+*[^]$()\");\nfunction compareKey(a, b) {\n  if (a.length === 1) {\n    return b.length === 1 ? a < b ? -1 : 1 : -1;\n  }\n  if (b.length === 1) {\n    return 1;\n  }\n  if (a === ONLY_WILDCARD_REG_EXP_STR || a === TAIL_WILDCARD_REG_EXP_STR) {\n    return 1;\n  } else if (b === ONLY_WILDCARD_REG_EXP_STR || b === TAIL_WILDCARD_REG_EXP_STR) {\n    return -1;\n  }\n  if (a === LABEL_REG_EXP_STR) {\n    return 1;\n  } else if (b === LABEL_REG_EXP_STR) {\n    return -1;\n  }\n  return a.length === b.length ? a < b ? -1 : 1 : b.length - a.length;\n}\nvar Node = class {\n  #index;\n  #varIndex;\n  #children = /* @__PURE__ */ Object.create(null);\n  insert(tokens, index, paramMap, context, pathErrorCheckOnly) {\n    if (tokens.length === 0) {\n      if (this.#index !== void 0) {\n        throw PATH_ERROR;\n      }\n      if (pathErrorCheckOnly) {\n        return;\n      }\n      this.#index = index;\n      return;\n    }\n    const [token, ...restTokens] = tokens;\n    const pattern = token === \"*\" ? restTokens.length === 0 ? [\"\", \"\", ONLY_WILDCARD_REG_EXP_STR] : [\"\", \"\", LABEL_REG_EXP_STR] : token === \"/*\" ? [\"\", \"\", TAIL_WILDCARD_REG_EXP_STR] : token.match(/^\\:([^\\{\\}]+)(?:\\{(.+)\\})?$/);\n    let node;\n    if (pattern) {\n      const name = pattern[1];\n      let regexpStr = pattern[2] || LABEL_REG_EXP_STR;\n      if (name && pattern[2]) {\n        regexpStr = regexpStr.replace(/^\\((?!\\?:)(?=[^)]+\\)$)/, \"(?:\");\n        if (/\\((?!\\?:)/.test(regexpStr)) {\n          throw PATH_ERROR;\n        }\n      }\n      node = this.#children[regexpStr];\n      if (!node) {\n        if (Object.keys(this.#children).some(\n          (k) => k !== ONLY_WILDCARD_REG_EXP_STR && k !== TAIL_WILDCARD_REG_EXP_STR\n        )) {\n          throw PATH_ERROR;\n        }\n        if (pathErrorCheckOnly) {\n          return;\n        }\n        node = this.#children[regexpStr] = new Node();\n        if (name !== \"\") {\n          node.#varIndex = context.varIndex++;\n        }\n      }\n      if (!pathErrorCheckOnly && name !== \"\") {\n        paramMap.push([name, node.#varIndex]);\n      }\n    } else {\n      node = this.#children[token];\n      if (!node) {\n        if (Object.keys(this.#children).some(\n          (k) => k.length > 1 && k !== ONLY_WILDCARD_REG_EXP_STR && k !== TAIL_WILDCARD_REG_EXP_STR\n        )) {\n          throw PATH_ERROR;\n        }\n        if (pathErrorCheckOnly) {\n          return;\n        }\n        node = this.#children[token] = new Node();\n      }\n    }\n    node.insert(restTokens, index, paramMap, context, pathErrorCheckOnly);\n  }\n  buildRegExpStr() {\n    const childKeys = Object.keys(this.#children).sort(compareKey);\n    const strList = childKeys.map((k) => {\n      const c = this.#children[k];\n      return (typeof c.#varIndex === \"number\" ? `(${k})@${c.#varIndex}` : regExpMetaChars.has(k) ? `\\\\${k}` : k) + c.buildRegExpStr();\n    });\n    if (typeof this.#index === \"number\") {\n      strList.unshift(`#${this.#index}`);\n    }\n    if (strList.length === 0) {\n      return \"\";\n    }\n    if (strList.length === 1) {\n      return strList[0];\n    }\n    return \"(?:\" + strList.join(\"|\") + \")\";\n  }\n};\nexport {\n  Node,\n  PATH_ERROR\n};\n", "// src/router/reg-exp-router/trie.ts\nimport { Node } from \"./node.js\";\nvar Trie = class {\n  #context = { varIndex: 0 };\n  #root = new Node();\n  insert(path, index, pathErrorCheckOnly) {\n    const paramAssoc = [];\n    const groups = [];\n    for (let i = 0; ; ) {\n      let replaced = false;\n      path = path.replace(/\\{[^}]+\\}/g, (m) => {\n        const mark = `@\\\\${i}`;\n        groups[i] = [mark, m];\n        i++;\n        replaced = true;\n        return mark;\n      });\n      if (!replaced) {\n        break;\n      }\n    }\n    const tokens = path.match(/(?::[^\\/]+)|(?:\\/\\*$)|./g) || [];\n    for (let i = groups.length - 1; i >= 0; i--) {\n      const [mark] = groups[i];\n      for (let j = tokens.length - 1; j >= 0; j--) {\n        if (tokens[j].indexOf(mark) !== -1) {\n          tokens[j] = tokens[j].replace(mark, groups[i][1]);\n          break;\n        }\n      }\n    }\n    this.#root.insert(tokens, index, paramAssoc, this.#context, pathErrorCheckOnly);\n    return paramAssoc;\n  }\n  buildRegExp() {\n    let regexp = this.#root.buildRegExpStr();\n    if (regexp === \"\") {\n      return [/^$/, [], []];\n    }\n    let captureIndex = 0;\n    const indexReplacementMap = [];\n    const paramReplacementMap = [];\n    regexp = regexp.replace(/#(\\d+)|@(\\d+)|\\.\\*\\$/g, (_, handlerIndex, paramIndex) => {\n      if (handlerIndex !== void 0) {\n        indexReplacementMap[++captureIndex] = Number(handlerIndex);\n        return \"$()\";\n      }\n      if (paramIndex !== void 0) {\n        paramReplacementMap[Number(paramIndex)] = ++captureIndex;\n        return \"\";\n      }\n      return \"\";\n    });\n    return [new RegExp(`^${regexp}`), indexReplacementMap, paramReplacementMap];\n  }\n};\nexport {\n  Trie\n};\n", "// src/router/reg-exp-router/router.ts\nimport {\n  MESSAGE_MATCHER_IS_ALREADY_BUILT,\n  METHOD_NAME_ALL,\n  UnsupportedPathError\n} from \"../../router.js\";\nimport { checkOptionalParameter } from \"../../utils/url.js\";\nimport { PATH_ERROR } from \"./node.js\";\nimport { Trie } from \"./trie.js\";\nvar emptyParam = [];\nvar nullMatcher = [/^$/, [], /* @__PURE__ */ Object.create(null)];\nvar wildcardRegExpCache = /* @__PURE__ */ Object.create(null);\nfunction buildWildcardRegExp(path) {\n  return wildcardRegExpCache[path] ??= new RegExp(\n    path === \"*\" ? \"\" : `^${path.replace(\n      /\\/\\*$|([.\\\\+*[^\\]$()])/g,\n      (_, metaChar) => metaChar ? `\\\\${metaChar}` : \"(?:|/.*)\"\n    )}$`\n  );\n}\nfunction clearWildcardRegExpCache() {\n  wildcardRegExpCache = /* @__PURE__ */ Object.create(null);\n}\nfunction buildMatcherFromPreprocessedRoutes(routes) {\n  const trie = new Trie();\n  const handlerData = [];\n  if (routes.length === 0) {\n    return nullMatcher;\n  }\n  const routesWithStaticPathFlag = routes.map(\n    (route) => [!/\\*|\\/:/.test(route[0]), ...route]\n  ).sort(\n    ([isStaticA, pathA], [isStaticB, pathB]) => isStaticA ? 1 : isStaticB ? -1 : pathA.length - pathB.length\n  );\n  const staticMap = /* @__PURE__ */ Object.create(null);\n  for (let i = 0, j = -1, len = routesWithStaticPathFlag.length; i < len; i++) {\n    const [pathErrorCheckOnly, path, handlers] = routesWithStaticPathFlag[i];\n    if (pathErrorCheckOnly) {\n      staticMap[path] = [handlers.map(([h]) => [h, /* @__PURE__ */ Object.create(null)]), emptyParam];\n    } else {\n      j++;\n    }\n    let paramAssoc;\n    try {\n      paramAssoc = trie.insert(path, j, pathErrorCheckOnly);\n    } catch (e) {\n      throw e === PATH_ERROR ? new UnsupportedPathError(path) : e;\n    }\n    if (pathErrorCheckOnly) {\n      continue;\n    }\n    handlerData[j] = handlers.map(([h, paramCount]) => {\n      const paramIndexMap = /* @__PURE__ */ Object.create(null);\n      paramCount -= 1;\n      for (; paramCount >= 0; paramCount--) {\n        const [key, value] = paramAssoc[paramCount];\n        paramIndexMap[key] = value;\n      }\n      return [h, paramIndexMap];\n    });\n  }\n  const [regexp, indexReplacementMap, paramReplacementMap] = trie.buildRegExp();\n  for (let i = 0, len = handlerData.length; i < len; i++) {\n    for (let j = 0, len2 = handlerData[i].length; j < len2; j++) {\n      const map = handlerData[i][j]?.[1];\n      if (!map) {\n        continue;\n      }\n      const keys = Object.keys(map);\n      for (let k = 0, len3 = keys.length; k < len3; k++) {\n        map[keys[k]] = paramReplacementMap[map[keys[k]]];\n      }\n    }\n  }\n  const handlerMap = [];\n  for (const i in indexReplacementMap) {\n    handlerMap[i] = handlerData[indexReplacementMap[i]];\n  }\n  return [regexp, handlerMap, staticMap];\n}\nfunction findMiddleware(middleware, path) {\n  if (!middleware) {\n    return void 0;\n  }\n  for (const k of Object.keys(middleware).sort((a, b) => b.length - a.length)) {\n    if (buildWildcardRegExp(k).test(path)) {\n      return [...middleware[k]];\n    }\n  }\n  return void 0;\n}\nvar RegExpRouter = class {\n  name = \"RegExpRouter\";\n  #middleware;\n  #routes;\n  constructor() {\n    this.#middleware = { [METHOD_NAME_ALL]: /* @__PURE__ */ Object.create(null) };\n    this.#routes = { [METHOD_NAME_ALL]: /* @__PURE__ */ Object.create(null) };\n  }\n  add(method, path, handler) {\n    const middleware = this.#middleware;\n    const routes = this.#routes;\n    if (!middleware || !routes) {\n      throw new Error(MESSAGE_MATCHER_IS_ALREADY_BUILT);\n    }\n    if (!middleware[method]) {\n      ;\n      [middleware, routes].forEach((handlerMap) => {\n        handlerMap[method] = /* @__PURE__ */ Object.create(null);\n        Object.keys(handlerMap[METHOD_NAME_ALL]).forEach((p) => {\n          handlerMap[method][p] = [...handlerMap[METHOD_NAME_ALL][p]];\n        });\n      });\n    }\n    if (path === \"/*\") {\n      path = \"*\";\n    }\n    const paramCount = (path.match(/\\/:/g) || []).length;\n    if (/\\*$/.test(path)) {\n      const re = buildWildcardRegExp(path);\n      if (method === METHOD_NAME_ALL) {\n        Object.keys(middleware).forEach((m) => {\n          middleware[m][path] ||= findMiddleware(middleware[m], path) || findMiddleware(middleware[METHOD_NAME_ALL], path) || [];\n        });\n      } else {\n        middleware[method][path] ||= findMiddleware(middleware[method], path) || findMiddleware(middleware[METHOD_NAME_ALL], path) || [];\n      }\n      Object.keys(middleware).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          Object.keys(middleware[m]).forEach((p) => {\n            re.test(p) && middleware[m][p].push([handler, paramCount]);\n          });\n        }\n      });\n      Object.keys(routes).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          Object.keys(routes[m]).forEach(\n            (p) => re.test(p) && routes[m][p].push([handler, paramCount])\n          );\n        }\n      });\n      return;\n    }\n    const paths = checkOptionalParameter(path) || [path];\n    for (let i = 0, len = paths.length; i < len; i++) {\n      const path2 = paths[i];\n      Object.keys(routes).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          routes[m][path2] ||= [\n            ...findMiddleware(middleware[m], path2) || findMiddleware(middleware[METHOD_NAME_ALL], path2) || []\n          ];\n          routes[m][path2].push([handler, paramCount - len + i + 1]);\n        }\n      });\n    }\n  }\n  match(method, path) {\n    clearWildcardRegExpCache();\n    const matchers = this.#buildAllMatchers();\n    this.match = (method2, path2) => {\n      const matcher = matchers[method2] || matchers[METHOD_NAME_ALL];\n      const staticMatch = matcher[2][path2];\n      if (staticMatch) {\n        return staticMatch;\n      }\n      const match = path2.match(matcher[0]);\n      if (!match) {\n        return [[], emptyParam];\n      }\n      const index = match.indexOf(\"\", 1);\n      return [matcher[1][index], match];\n    };\n    return this.match(method, path);\n  }\n  #buildAllMatchers() {\n    const matchers = /* @__PURE__ */ Object.create(null);\n    Object.keys(this.#routes).concat(Object.keys(this.#middleware)).forEach((method) => {\n      matchers[method] ||= this.#buildMatcher(method);\n    });\n    this.#middleware = this.#routes = void 0;\n    return matchers;\n  }\n  #buildMatcher(method) {\n    const routes = [];\n    let hasOwnRoute = method === METHOD_NAME_ALL;\n    [this.#middleware, this.#routes].forEach((r) => {\n      const ownRoute = r[method] ? Object.keys(r[method]).map((path) => [path, r[method][path]]) : [];\n      if (ownRoute.length !== 0) {\n        hasOwnRoute ||= true;\n        routes.push(...ownRoute);\n      } else if (method !== METHOD_NAME_ALL) {\n        routes.push(\n          ...Object.keys(r[METHOD_NAME_ALL]).map((path) => [path, r[METHOD_NAME_ALL][path]])\n        );\n      }\n    });\n    if (!hasOwnRoute) {\n      return null;\n    } else {\n      return buildMatcherFromPreprocessedRoutes(routes);\n    }\n  }\n};\nexport {\n  RegExpRouter\n};\n", "// src/router/smart-router/router.ts\nimport { MESSAGE_MATCHER_IS_ALREADY_BUILT, UnsupportedPathError } from \"../../router.js\";\nvar SmartRouter = class {\n  name = \"SmartRouter\";\n  #routers = [];\n  #routes = [];\n  constructor(init) {\n    this.#routers = init.routers;\n  }\n  add(method, path, handler) {\n    if (!this.#routes) {\n      throw new Error(MESSAGE_MATCHER_IS_ALREADY_BUILT);\n    }\n    this.#routes.push([method, path, handler]);\n  }\n  match(method, path) {\n    if (!this.#routes) {\n      throw new Error(\"Fatal error\");\n    }\n    const routers = this.#routers;\n    const routes = this.#routes;\n    const len = routers.length;\n    let i = 0;\n    let res;\n    for (; i < len; i++) {\n      const router = routers[i];\n      try {\n        for (let i2 = 0, len2 = routes.length; i2 < len2; i2++) {\n          router.add(...routes[i2]);\n        }\n        res = router.match(method, path);\n      } catch (e) {\n        if (e instanceof UnsupportedPathError) {\n          continue;\n        }\n        throw e;\n      }\n      this.match = router.match.bind(router);\n      this.#routers = [router];\n      this.#routes = void 0;\n      break;\n    }\n    if (i === len) {\n      throw new Error(\"Fatal error\");\n    }\n    this.name = `SmartRouter + ${this.activeRouter.name}`;\n    return res;\n  }\n  get activeRouter() {\n    if (this.#routes || this.#routers.length !== 1) {\n      throw new Error(\"No active router has been determined yet.\");\n    }\n    return this.#routers[0];\n  }\n};\nexport {\n  SmartRouter\n};\n", "// src/router/trie-router/node.ts\nimport { METHOD_NAME_ALL } from \"../../router.js\";\nimport { getPattern, splitPath, splitRoutingPath } from \"../../utils/url.js\";\nvar emptyParams = /* @__PURE__ */ Object.create(null);\nvar Node = class {\n  #methods;\n  #children;\n  #patterns;\n  #order = 0;\n  #params = emptyParams;\n  constructor(method, handler, children) {\n    this.#children = children || /* @__PURE__ */ Object.create(null);\n    this.#methods = [];\n    if (method && handler) {\n      const m = /* @__PURE__ */ Object.create(null);\n      m[method] = { handler, possibleKeys: [], score: 0 };\n      this.#methods = [m];\n    }\n    this.#patterns = [];\n  }\n  insert(method, path, handler) {\n    this.#order = ++this.#order;\n    let curNode = this;\n    const parts = splitRoutingPath(path);\n    const possibleKeys = [];\n    for (let i = 0, len = parts.length; i < len; i++) {\n      const p = parts[i];\n      if (Object.keys(curNode.#children).includes(p)) {\n        curNode = curNode.#children[p];\n        const pattern2 = getPattern(p);\n        if (pattern2) {\n          possibleKeys.push(pattern2[1]);\n        }\n        continue;\n      }\n      curNode.#children[p] = new Node();\n      const pattern = getPattern(p);\n      if (pattern) {\n        curNode.#patterns.push(pattern);\n        possibleKeys.push(pattern[1]);\n      }\n      curNode = curNode.#children[p];\n    }\n    const m = /* @__PURE__ */ Object.create(null);\n    const handlerSet = {\n      handler,\n      possibleKeys: possibleKeys.filter((v, i, a) => a.indexOf(v) === i),\n      score: this.#order\n    };\n    m[method] = handlerSet;\n    curNode.#methods.push(m);\n    return curNode;\n  }\n  #getHandlerSets(node, method, nodeParams, params) {\n    const handlerSets = [];\n    for (let i = 0, len = node.#methods.length; i < len; i++) {\n      const m = node.#methods[i];\n      const handlerSet = m[method] || m[METHOD_NAME_ALL];\n      const processedSet = {};\n      if (handlerSet !== void 0) {\n        handlerSet.params = /* @__PURE__ */ Object.create(null);\n        handlerSets.push(handlerSet);\n        if (nodeParams !== emptyParams || params && params !== emptyParams) {\n          for (let i2 = 0, len2 = handlerSet.possibleKeys.length; i2 < len2; i2++) {\n            const key = handlerSet.possibleKeys[i2];\n            const processed = processedSet[handlerSet.score];\n            handlerSet.params[key] = params?.[key] && !processed ? params[key] : nodeParams[key] ?? params?.[key];\n            processedSet[handlerSet.score] = true;\n          }\n        }\n      }\n    }\n    return handlerSets;\n  }\n  search(method, path) {\n    const handlerSets = [];\n    this.#params = emptyParams;\n    const curNode = this;\n    let curNodes = [curNode];\n    const parts = splitPath(path);\n    for (let i = 0, len = parts.length; i < len; i++) {\n      const part = parts[i];\n      const isLast = i === len - 1;\n      const tempNodes = [];\n      for (let j = 0, len2 = curNodes.length; j < len2; j++) {\n        const node = curNodes[j];\n        const nextNode = node.#children[part];\n        if (nextNode) {\n          nextNode.#params = node.#params;\n          if (isLast) {\n            if (nextNode.#children[\"*\"]) {\n              handlerSets.push(\n                ...this.#getHandlerSets(nextNode.#children[\"*\"], method, node.#params)\n              );\n            }\n            handlerSets.push(...this.#getHandlerSets(nextNode, method, node.#params));\n          } else {\n            tempNodes.push(nextNode);\n          }\n        }\n        for (let k = 0, len3 = node.#patterns.length; k < len3; k++) {\n          const pattern = node.#patterns[k];\n          const params = node.#params === emptyParams ? {} : { ...node.#params };\n          if (pattern === \"*\") {\n            const astNode = node.#children[\"*\"];\n            if (astNode) {\n              handlerSets.push(...this.#getHandlerSets(astNode, method, node.#params));\n              tempNodes.push(astNode);\n            }\n            continue;\n          }\n          if (part === \"\") {\n            continue;\n          }\n          const [key, name, matcher] = pattern;\n          const child = node.#children[key];\n          const restPathString = parts.slice(i).join(\"/\");\n          if (matcher instanceof RegExp && matcher.test(restPathString)) {\n            params[name] = restPathString;\n            handlerSets.push(...this.#getHandlerSets(child, method, node.#params, params));\n            continue;\n          }\n          if (matcher === true || matcher.test(part)) {\n            params[name] = part;\n            if (isLast) {\n              handlerSets.push(...this.#getHandlerSets(child, method, params, node.#params));\n              if (child.#children[\"*\"]) {\n                handlerSets.push(\n                  ...this.#getHandlerSets(child.#children[\"*\"], method, params, node.#params)\n                );\n              }\n            } else {\n              child.#params = params;\n              tempNodes.push(child);\n            }\n          }\n        }\n      }\n      curNodes = tempNodes;\n    }\n    if (handlerSets.length > 1) {\n      handlerSets.sort((a, b) => {\n        return a.score - b.score;\n      });\n    }\n    return [handlerSets.map(({ handler, params }) => [handler, params])];\n  }\n};\nexport {\n  Node\n};\n", "// src/router/trie-router/router.ts\nimport { checkOptionalParameter } from \"../../utils/url.js\";\nimport { Node } from \"./node.js\";\nvar TrieRouter = class {\n  name = \"TrieRouter\";\n  #node;\n  constructor() {\n    this.#node = new Node();\n  }\n  add(method, path, handler) {\n    const results = checkOptionalParameter(path);\n    if (results) {\n      for (let i = 0, len = results.length; i < len; i++) {\n        this.#node.insert(method, results[i], handler);\n      }\n      return;\n    }\n    this.#node.insert(method, path, handler);\n  }\n  match(method, path) {\n    return this.#node.search(method, path);\n  }\n};\nexport {\n  TrieRouter\n};\n", "// src/hono.ts\nimport { HonoBase } from \"./hono-base.js\";\nimport { RegExpRouter } from \"./router/reg-exp-router/index.js\";\nimport { SmartRouter } from \"./router/smart-router/index.js\";\nimport { TrieRouter } from \"./router/trie-router/index.js\";\nvar Hono = class extends HonoBase {\n  constructor(options = {}) {\n    super(options);\n    this.router = options.router ?? new SmartRouter({\n      routers: [new RegExpRouter(), new TrieRouter()]\n    });\n  }\n};\nexport {\n  Hono\n};\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _SessionStore_instances, _SessionStore_chunks, _SessionStore_option, _SessionStore_logger, _SessionStore_chunk, _SessionStore_clean;\n// Uncomment to recalculate the estimated size\n// of an empty session cookie\n// import * as cookie from \"../vendored/cookie.js\"\n// const { serialize } = cookie\n// console.log(\n//   \"Cookie estimated to be \",\n//   serialize(`__Secure.authjs.session-token.0`, \"\", {\n//     expires: new Date(),\n//     httpOnly: true,\n//     maxAge: Number.MAX_SAFE_INTEGER,\n//     path: \"/\",\n//     sameSite: \"strict\",\n//     secure: true,\n//     domain: \"example.com\",\n//   }).length,\n//   \" bytes\"\n// )\nconst ALLOWED_COOKIE_SIZE = 4096;\n// Based on commented out section above\nconst ESTIMATED_EMPTY_COOKIE_SIZE = 160;\nconst CHUNK_SIZE = ALLOWED_COOKIE_SIZE - ESTIMATED_EMPTY_COOKIE_SIZE;\n/**\n * Use secure cookies if the site uses HTTPS\n * This being conditional allows cookies to work non-HTTPS development URLs\n * Honour secure cookie option, which sets 'secure' and also adds '__Secure-'\n * prefix, but enable them by default if the site URL is HTTPS; but not for\n * non-HTTPS URLs like http://localhost which are used in development).\n * For more on prefixes see https://googlechrome.github.io/samples/cookie-prefixes/\n *\n * @TODO Review cookie settings (names, options)\n */\nexport function defaultCookies(useSecureCookies) {\n    const cookiePrefix = useSecureCookies ? \"__Secure-\" : \"\";\n    return {\n        // default cookie options\n        sessionToken: {\n            name: `${cookiePrefix}authjs.session-token`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n            },\n        },\n        callbackUrl: {\n            name: `${cookiePrefix}authjs.callback-url`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n            },\n        },\n        csrfToken: {\n            // Default to __Host- for CSRF token for additional protection if using useSecureCookies\n            // NB: The `__Host-` prefix is stricter than the `__Secure-` prefix.\n            name: `${useSecureCookies ? \"__Host-\" : \"\"}authjs.csrf-token`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n            },\n        },\n        pkceCodeVerifier: {\n            name: `${cookiePrefix}authjs.pkce.code_verifier`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n                maxAge: 60 * 15, // 15 minutes in seconds\n            },\n        },\n        state: {\n            name: `${cookiePrefix}authjs.state`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n                maxAge: 60 * 15, // 15 minutes in seconds\n            },\n        },\n        nonce: {\n            name: `${cookiePrefix}authjs.nonce`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n            },\n        },\n        webauthnChallenge: {\n            name: `${cookiePrefix}authjs.challenge`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure: useSecureCookies,\n                maxAge: 60 * 15, // 15 minutes in seconds\n            },\n        },\n    };\n}\nexport class SessionStore {\n    constructor(option, cookies, logger) {\n        _SessionStore_instances.add(this);\n        _SessionStore_chunks.set(this, {});\n        _SessionStore_option.set(this, void 0);\n        _SessionStore_logger.set(this, void 0);\n        __classPrivateFieldSet(this, _SessionStore_logger, logger, \"f\");\n        __classPrivateFieldSet(this, _SessionStore_option, option, \"f\");\n        if (!cookies)\n            return;\n        const { name: sessionCookiePrefix } = option;\n        for (const [name, value] of Object.entries(cookies)) {\n            if (!name.startsWith(sessionCookiePrefix) || !value)\n                continue;\n            __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")[name] = value;\n        }\n    }\n    /**\n     * The JWT Session or database Session ID\n     * constructed from the cookie chunks.\n     */\n    get value() {\n        // Sort the chunks by their keys before joining\n        const sortedKeys = Object.keys(__classPrivateFieldGet(this, _SessionStore_chunks, \"f\")).sort((a, b) => {\n            const aSuffix = parseInt(a.split(\".\").pop() || \"0\");\n            const bSuffix = parseInt(b.split(\".\").pop() || \"0\");\n            return aSuffix - bSuffix;\n        });\n        // Use the sorted keys to join the chunks in the correct order\n        return sortedKeys.map((key) => __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")[key]).join(\"\");\n    }\n    /**\n     * Given a cookie value, return new cookies, chunked, to fit the allowed cookie size.\n     * If the cookie has changed from chunked to unchunked or vice versa,\n     * it deletes the old cookies as well.\n     */\n    chunk(value, options) {\n        // Assume all cookies should be cleaned by default\n        const cookies = __classPrivateFieldGet(this, _SessionStore_instances, \"m\", _SessionStore_clean).call(this);\n        // Calculate new chunks\n        const chunked = __classPrivateFieldGet(this, _SessionStore_instances, \"m\", _SessionStore_chunk).call(this, {\n            name: __classPrivateFieldGet(this, _SessionStore_option, \"f\").name,\n            value,\n            options: { ...__classPrivateFieldGet(this, _SessionStore_option, \"f\").options, ...options },\n        });\n        // Update stored chunks / cookies\n        for (const chunk of chunked) {\n            cookies[chunk.name] = chunk;\n        }\n        return Object.values(cookies);\n    }\n    /** Returns a list of cookies that should be cleaned. */\n    clean() {\n        return Object.values(__classPrivateFieldGet(this, _SessionStore_instances, \"m\", _SessionStore_clean).call(this));\n    }\n}\n_SessionStore_chunks = new WeakMap(), _SessionStore_option = new WeakMap(), _SessionStore_logger = new WeakMap(), _SessionStore_instances = new WeakSet(), _SessionStore_chunk = function _SessionStore_chunk(cookie) {\n    const chunkCount = Math.ceil(cookie.value.length / CHUNK_SIZE);\n    if (chunkCount === 1) {\n        __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")[cookie.name] = cookie.value;\n        return [cookie];\n    }\n    const cookies = [];\n    for (let i = 0; i < chunkCount; i++) {\n        const name = `${cookie.name}.${i}`;\n        const value = cookie.value.substr(i * CHUNK_SIZE, CHUNK_SIZE);\n        cookies.push({ ...cookie, name, value });\n        __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")[name] = value;\n    }\n    __classPrivateFieldGet(this, _SessionStore_logger, \"f\").debug(\"CHUNKING_SESSION_COOKIE\", {\n        message: `Session cookie exceeds allowed ${ALLOWED_COOKIE_SIZE} bytes.`,\n        emptyCookieSize: ESTIMATED_EMPTY_COOKIE_SIZE,\n        valueSize: cookie.value.length,\n        chunks: cookies.map((c) => c.value.length + ESTIMATED_EMPTY_COOKIE_SIZE),\n    });\n    return cookies;\n}, _SessionStore_clean = function _SessionStore_clean() {\n    const cleanedChunks = {};\n    for (const name in __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")) {\n        delete __classPrivateFieldGet(this, _SessionStore_chunks, \"f\")?.[name];\n        cleanedChunks[name] = {\n            name,\n            value: \"\",\n            options: { ...__classPrivateFieldGet(this, _SessionStore_option, \"f\").options, maxAge: 0 },\n        };\n    }\n    return cleanedChunks;\n};\n", "/**\n * Base error class for all Auth.js errors.\n * It's optimized to be printed in the server logs in a nicely formatted way\n * via the [`logger.error`](https://authjs.dev/reference/core#logger) option.\n */\nexport class AuthError extends Error {\n    constructor(message, errorOptions) {\n        if (message instanceof Error) {\n            super(undefined, {\n                cause: { err: message, ...message.cause, ...errorOptions },\n            });\n        }\n        else if (typeof message === \"string\") {\n            if (errorOptions instanceof Error) {\n                errorOptions = { err: errorOptions, ...errorOptions.cause };\n            }\n            super(message, errorOptions);\n        }\n        else {\n            super(undefined, message);\n        }\n        this.name = this.constructor.name;\n        // @ts-expect-error https://github.com/microsoft/TypeScript/issues/3841\n        this.type = this.constructor.type ?? \"AuthError\";\n        // @ts-expect-error https://github.com/microsoft/TypeScript/issues/3841\n        this.kind = this.constructor.kind ?? \"error\";\n        Error.captureStackTrace?.(this, this.constructor);\n        const url = `https://errors.authjs.dev#${this.type.toLowerCase()}`;\n        this.message += `${this.message ? \". \" : \"\"}Read more at ${url}`;\n    }\n}\nexport class SignInError extends AuthError {\n}\nSignInError.kind = \"signIn\";\n/**\n * One of the database [`Adapter` methods](https://authjs.dev/reference/core/adapters#methods)\n * failed during execution.\n *\n * :::tip\n * If `debug: true` is set, you can check out `[auth][debug]` in the logs to learn more about the failed adapter method execution.\n * @example\n * ```sh\n * [auth][debug]: adapter_getUserByEmail\n * { \"args\": [undefined] }\n * ```\n * :::\n */\nexport class AdapterError extends AuthError {\n}\nAdapterError.type = \"AdapterError\";\n/**\n * Thrown when the execution of the [`signIn` callback](https://authjs.dev/reference/core/types#signin) fails\n * or if it returns `false`.\n */\nexport class AccessDenied extends AuthError {\n}\nAccessDenied.type = \"AccessDenied\";\n/**\n * This error occurs when the user cannot finish login.\n * Depending on the provider type, this could have happened for multiple reasons.\n *\n * :::tip\n * Check out `[auth][details]` in the logs to know which provider failed.\n * @example\n * ```sh\n * [auth][details]: { \"provider\": \"github\" }\n * ```\n * :::\n *\n * For an [OAuth provider](https://authjs.dev/getting-started/authentication/oauth), possible causes are:\n * - The user denied access to the application\n * - There was an error parsing the OAuth Profile:\n *   Check out the provider's `profile` or `userinfo.request` method to make sure\n *   it correctly fetches the user's profile.\n * - The `signIn` or `jwt` callback methods threw an uncaught error:\n *   Check the callback method implementations.\n *\n * For an [Email provider](https://authjs.dev/getting-started/authentication/email), possible causes are:\n * - The provided email/token combination was invalid/missing:\n *   Check if the provider's `sendVerificationRequest` method correctly sends the email.\n * - The provided email/token combination has expired:\n *   Ask the user to log in again.\n * - There was an error with the database:\n *   Check the database logs.\n *\n * For a [Credentials provider](https://authjs.dev/getting-started/authentication/credentials), possible causes are:\n * - The `authorize` method threw an uncaught error:\n *   Check the provider's `authorize` method.\n * - The `signIn` or `jwt` callback methods threw an uncaught error:\n *   Check the callback method implementations.\n *\n * :::tip\n * Check out `[auth][cause]` in the error message for more details.\n * It will show the original stack trace.\n * :::\n */\nexport class CallbackRouteError extends AuthError {\n}\nCallbackRouteError.type = \"CallbackRouteError\";\n/**\n * Thrown when Auth.js is misconfigured and accidentally tried to require authentication on a custom error page.\n * To prevent an infinite loop, Auth.js will instead render its default error page.\n *\n * To fix this, make sure that the `error` page does not require authentication.\n *\n * Learn more at [Guide: Error pages](https://authjs.dev/guides/pages/error)\n */\nexport class ErrorPageLoop extends AuthError {\n}\nErrorPageLoop.type = \"ErrorPageLoop\";\n/**\n * One of the [`events` methods](https://authjs.dev/reference/core/types#eventcallbacks)\n * failed during execution.\n *\n * Make sure that the `events` methods are implemented correctly and uncaught errors are handled.\n *\n * Learn more at [`events`](https://authjs.dev/reference/core/types#eventcallbacks)\n */\nexport class EventError extends AuthError {\n}\nEventError.type = \"EventError\";\n/**\n * Thrown when Auth.js is unable to verify a `callbackUrl` value.\n * The browser either disabled cookies or the `callbackUrl` is not a valid URL.\n *\n * Somebody might have tried to manipulate the callback URL that Auth.js uses to redirect the user back to the configured `callbackUrl`/page.\n * This could be a malicious hacker trying to redirect the user to a phishing site.\n * To prevent this, Auth.js checks if the callback URL is valid and throws this error if it is not.\n *\n * There is no action required, but it might be an indicator that somebody is trying to attack your application.\n */\nexport class InvalidCallbackUrl extends AuthError {\n}\nInvalidCallbackUrl.type = \"InvalidCallbackUrl\";\n/**\n * Can be thrown from the `authorize` callback of the Credentials provider.\n * When an error occurs during the `authorize` callback, two things can happen:\n * 1. The user is redirected to the signin page, with `error=CredentialsSignin&code=credentials` in the URL. `code` is configurable.\n * 2. If you throw this error in a framework that handles form actions server-side, this error is thrown, instead of redirecting the user, so you'll need to handle.\n */\nexport class CredentialsSignin extends SignInError {\n    constructor() {\n        super(...arguments);\n        /**\n         * The error code that is set in the `code` query parameter of the redirect URL.\n         *\n         *\n         * \u26A0 NOTE: This property is going to be included in the URL, so make sure it does not hint at sensitive errors.\n         *\n         * The full error is always logged on the server, if you need to debug.\n         *\n         * Generally, we don't recommend hinting specifically if the user had either a wrong username or password specifically,\n         * try rather something like \"Invalid credentials\".\n         */\n        this.code = \"credentials\";\n    }\n}\nCredentialsSignin.type = \"CredentialsSignin\";\n/**\n * One of the configured OAuth or OIDC providers is missing the `authorization`, `token` or `userinfo`, or `issuer` configuration.\n * To perform OAuth or OIDC sign in, at least one of these endpoints is required.\n *\n * Learn more at [`OAuth2Config`](https://authjs.dev/reference/core/providers#oauth2configprofile) or [Guide: OAuth Provider](https://authjs.dev/guides/configuring-oauth-providers)\n */\nexport class InvalidEndpoints extends AuthError {\n}\nInvalidEndpoints.type = \"InvalidEndpoints\";\n/**\n * Thrown when a PKCE, state or nonce OAuth check could not be performed.\n * This could happen if the OAuth provider is configured incorrectly or if the browser is blocking cookies.\n *\n * Learn more at [`checks`](https://authjs.dev/reference/core/providers#checks)\n */\nexport class InvalidCheck extends AuthError {\n}\nInvalidCheck.type = \"InvalidCheck\";\n/**\n * Logged on the server when Auth.js could not decode or encode a JWT-based (`strategy: \"jwt\"`) session.\n *\n * Possible causes are either a misconfigured `secret` or a malformed JWT or `encode/decode` methods.\n *\n * :::note\n * When this error is logged, the session cookie is destroyed.\n * :::\n *\n * Learn more at [`secret`](https://authjs.dev/reference/core#secret), [`jwt.encode`](https://authjs.dev/reference/core/jwt#encode-1) or [`jwt.decode`](https://authjs.dev/reference/core/jwt#decode-2) for more information.\n */\nexport class JWTSessionError extends AuthError {\n}\nJWTSessionError.type = \"JWTSessionError\";\n/**\n * Thrown if Auth.js is misconfigured. This could happen if you configured an Email provider but did not set up a database adapter,\n * or tried using a `strategy: \"database\"` session without a database adapter.\n * In both cases, make sure you either remove the configuration or add the missing adapter.\n *\n * Learn more at [Database Adapters](https://authjs.dev/getting-started/database), [Email provider](https://authjs.dev/getting-started/authentication/email) or [Concept: Database session strategy](https://authjs.dev/concepts/session-strategies#database-session)\n */\nexport class MissingAdapter extends AuthError {\n}\nMissingAdapter.type = \"MissingAdapter\";\n/**\n * Thrown similarily to [`MissingAdapter`](https://authjs.dev/reference/core/errors#missingadapter), but only some required methods were missing.\n *\n * Make sure you either remove the configuration or add the missing methods to the adapter.\n *\n * Learn more at [Database Adapters](https://authjs.dev/getting-started/database)\n */\nexport class MissingAdapterMethods extends AuthError {\n}\nMissingAdapterMethods.type = \"MissingAdapterMethods\";\n/**\n * Thrown when a Credentials provider is missing the `authorize` configuration.\n * To perform credentials sign in, the `authorize` method is required.\n *\n * Learn more at [Credentials provider](https://authjs.dev/getting-started/authentication/credentials)\n */\nexport class MissingAuthorize extends AuthError {\n}\nMissingAuthorize.type = \"MissingAuthorize\";\n/**\n * Auth.js requires a secret or multiple secrets to be set, but none was not found. This is used to encrypt cookies, JWTs and other sensitive data.\n *\n * :::note\n * If you are using a framework like Next.js, we try to automatically infer the secret from the `AUTH_SECRET`, `AUTH_SECRET_1`, etc. environment variables.\n * Alternatively, you can also explicitly set the [`AuthConfig.secret`](https://authjs.dev/reference/core#secret) option.\n * :::\n *\n *\n * :::tip\n * To generate a random string, you can use the Auth.js CLI: `npx auth secret`\n * :::\n */\nexport class MissingSecret extends AuthError {\n}\nMissingSecret.type = \"MissingSecret\";\n/**\n * Thrown when an Email address is already associated with an account\n * but the user is trying an OAuth account that is not linked to it.\n *\n * For security reasons, Auth.js does not automatically link OAuth accounts to existing accounts if the user is not signed in.\n *\n * :::tip\n * If you trust the OAuth provider to have verified the user's email address,\n * you can enable automatic account linking by setting [`allowDangerousEmailAccountLinking: true`](https://authjs.dev/reference/core/providers#allowdangerousemailaccountlinking)\n * in the provider configuration.\n * :::\n */\nexport class OAuthAccountNotLinked extends SignInError {\n}\nOAuthAccountNotLinked.type = \"OAuthAccountNotLinked\";\n/**\n * Thrown when an OAuth provider returns an error during the sign in process.\n * This could happen for example if the user denied access to the application or there was a configuration error.\n *\n * For a full list of possible reasons, check out the specification [Authorization Code Grant: Error Response](https://www.rfc-editor.org/rfc/rfc6749#section-4.1.2.1)\n */\nexport class OAuthCallbackError extends SignInError {\n}\nOAuthCallbackError.type = \"OAuthCallbackError\";\n/**\n * This error occurs during an OAuth sign in attempt when the provider's\n * response could not be parsed. This could for example happen if the provider's API\n * changed, or the [`OAuth2Config.profile`](https://authjs.dev/reference/core/providers#oauth2configprofile) method is not implemented correctly.\n */\nexport class OAuthProfileParseError extends AuthError {\n}\nOAuthProfileParseError.type = \"OAuthProfileParseError\";\n/**\n * Logged on the server when Auth.js could not retrieve a session from the database (`strategy: \"database\"`).\n *\n * The database adapter might be misconfigured or the database is not reachable.\n *\n * Learn more at [Concept: Database session strategy](https://authjs.dev/concepts/session-strategies#database)\n */\nexport class SessionTokenError extends AuthError {\n}\nSessionTokenError.type = \"SessionTokenError\";\n/**\n * Happens when login by [OAuth](https://authjs.dev/getting-started/authentication/oauth) could not be started.\n *\n * Possible causes are:\n * - The Authorization Server is not compliant with the [OAuth 2.0](https://www.ietf.org/rfc/rfc6749.html) or the [OIDC](https://openid.net/specs/openid-connect-core-1_0.html) specification.\n *   Check the details in the error message.\n *\n * :::tip\n * Check out `[auth][details]` in the logs to know which provider failed.\n * @example\n * ```sh\n * [auth][details]: { \"provider\": \"github\" }\n * ```\n * :::\n */\nexport class OAuthSignInError extends SignInError {\n}\nOAuthSignInError.type = \"OAuthSignInError\";\n/**\n * Happens when the login by an [Email provider](https://authjs.dev/getting-started/authentication/email) could not be started.\n *\n * Possible causes are:\n * - The email sent from the client is invalid, could not be normalized by [`EmailConfig.normalizeIdentifier`](https://authjs.dev/reference/core/providers/email#normalizeidentifier)\n * - The provided email/token combination has expired:\n *   Ask the user to log in again.\n * - There was an error with the database:\n *   Check the database logs.\n */\nexport class EmailSignInError extends SignInError {\n}\nEmailSignInError.type = \"EmailSignInError\";\n/**\n * Represents an error that occurs during the sign-out process. This error\n * is logged when there are issues in terminating a user's session, either\n * by failing to delete the session from the database (in database session\n * strategies) or encountering issues during other parts of the sign-out\n * process, such as emitting sign-out events or clearing session cookies.\n *\n * The session cookie(s) are emptied even if this error is logged.\n *\n */\nexport class SignOutError extends AuthError {\n}\nSignOutError.type = \"SignOutError\";\n/**\n * Auth.js was requested to handle an operation that it does not support.\n *\n * See [`AuthAction`](https://authjs.dev/reference/core/types#authaction) for the supported actions.\n */\nexport class UnknownAction extends AuthError {\n}\nUnknownAction.type = \"UnknownAction\";\n/**\n * Thrown when a Credentials provider is present but the JWT strategy (`strategy: \"jwt\"`) is not enabled.\n *\n * Learn more at [`strategy`](https://authjs.dev/reference/core#strategy) or [Credentials provider](https://authjs.dev/getting-started/authentication/credentials)\n */\nexport class UnsupportedStrategy extends AuthError {\n}\nUnsupportedStrategy.type = \"UnsupportedStrategy\";\n/** Thrown when an endpoint was incorrectly called without a provider, or with an unsupported provider. */\nexport class InvalidProvider extends AuthError {\n}\nInvalidProvider.type = \"InvalidProvider\";\n/**\n * Thrown when the `trustHost` option was not set to `true`.\n *\n * Auth.js requires the `trustHost` option to be set to `true` since it's relying on the request headers' `host` value.\n *\n * :::note\n * Official Auth.js libraries might attempt to automatically set the `trustHost` option to `true` if the request is coming from a trusted host on a trusted platform.\n * :::\n *\n * Learn more at [`trustHost`](https://authjs.dev/reference/core#trusthost) or [Guide: Deployment](https://authjs.dev/getting-started/deployment)\n */\nexport class UntrustedHost extends AuthError {\n}\nUntrustedHost.type = \"UntrustedHost\";\n/**\n * The user's email/token combination was invalid.\n * This could be because the email/token combination was not found in the database,\n * or because the token has expired. Ask the user to log in again.\n */\nexport class Verification extends AuthError {\n}\nVerification.type = \"Verification\";\n/**\n * Error for missing CSRF tokens in client-side actions (`signIn`, `signOut`, `useSession#update`).\n * Thrown when actions lack the double submit cookie, essential for CSRF protection.\n *\n * CSRF ([Cross-Site Request Forgery](https://owasp.org/www-community/attacks/csrf))\n * is an attack leveraging authenticated user credentials for unauthorized actions.\n *\n * Double submit cookie pattern, a CSRF defense, requires matching values in a cookie\n * and request parameter. More on this at [MDN Web Docs](https://developer.mozilla.org/en-US/docs/Glossary/CSRF).\n */\nexport class MissingCSRF extends SignInError {\n}\nMissingCSRF.type = \"MissingCSRF\";\nconst clientErrors = new Set([\n    \"CredentialsSignin\",\n    \"OAuthAccountNotLinked\",\n    \"OAuthCallbackError\",\n    \"AccessDenied\",\n    \"Verification\",\n    \"MissingCSRF\",\n    \"AccountNotLinked\",\n    \"WebAuthnVerificationError\",\n]);\n/**\n * Used to only allow sending a certain subset of errors to the client.\n * Errors are always logged on the server, but to prevent leaking sensitive information,\n * only a subset of errors are sent to the client as-is.\n * @internal\n */\nexport function isClientError(error) {\n    if (error instanceof AuthError)\n        return clientErrors.has(error.type);\n    return false;\n}\n/**\n * Thrown when multiple providers have `enableConditionalUI` set to `true`.\n * Only one provider can have this option enabled at a time.\n */\nexport class DuplicateConditionalUI extends AuthError {\n}\nDuplicateConditionalUI.type = \"DuplicateConditionalUI\";\n/**\n * Thrown when a WebAuthn provider has `enableConditionalUI` set to `true` but no formField has `webauthn` in its autocomplete param.\n *\n * The `webauthn` autocomplete param is required for conditional UI to work.\n */\nexport class MissingWebAuthnAutocomplete extends AuthError {\n}\nMissingWebAuthnAutocomplete.type = \"MissingWebAuthnAutocomplete\";\n/**\n * Thrown when a WebAuthn provider fails to verify a client response.\n */\nexport class WebAuthnVerificationError extends AuthError {\n}\nWebAuthnVerificationError.type = \"WebAuthnVerificationError\";\n/**\n * Thrown when an Email address is already associated with an account\n * but the user is trying an account that is not linked to it.\n *\n * For security reasons, Auth.js does not automatically link accounts to existing accounts if the user is not signed in.\n */\nexport class AccountNotLinked extends SignInError {\n}\nAccountNotLinked.type = \"AccountNotLinked\";\n/**\n * Thrown when an experimental feature is used but not enabled.\n */\nexport class ExperimentalFeatureNotEnabled extends AuthError {\n}\nExperimentalFeatureNotEnabled.type = \"ExperimentalFeatureNotEnabled\";\n", "import { defaultCookies } from \"./cookie.js\";\nimport { AuthError, DuplicateConditionalUI, ExperimentalFeatureNotEnabled, InvalidCallbackUrl, InvalidEndpoints, MissingAdapter, MissingAdapterMethods, MissingAuthorize, MissingSecret, MissingWebAuthnAutocomplete, UnsupportedStrategy, UntrustedHost, } from \"../../errors.js\";\nlet warned = false;\nfunction isValidHttpUrl(url, baseUrl) {\n    try {\n        return /^https?:/.test(new URL(url, url.startsWith(\"/\") ? baseUrl : undefined).protocol);\n    }\n    catch {\n        return false;\n    }\n}\nfunction isSemverString(version) {\n    return /^v\\d+(?:\\.\\d+){0,2}$/.test(version);\n}\nlet hasCredentials = false;\nlet hasEmail = false;\nlet hasWebAuthn = false;\nconst emailMethods = [\n    \"createVerificationToken\",\n    \"useVerificationToken\",\n    \"getUserByEmail\",\n];\nconst sessionMethods = [\n    \"createUser\",\n    \"getUser\",\n    \"getUserByEmail\",\n    \"getUserByAccount\",\n    \"updateUser\",\n    \"linkAccount\",\n    \"createSession\",\n    \"getSessionAndUser\",\n    \"updateSession\",\n    \"deleteSession\",\n];\nconst webauthnMethods = [\n    \"createUser\",\n    \"getUser\",\n    \"linkAccount\",\n    \"getAccount\",\n    \"getAuthenticator\",\n    \"createAuthenticator\",\n    \"listAuthenticatorsByUserId\",\n    \"updateAuthenticatorCounter\",\n];\n/**\n * Verify that the user configured Auth.js correctly.\n * Good place to mention deprecations as well.\n *\n * This is invoked before the init method, so default values are not available yet.\n */\nexport function assertConfig(request, options) {\n    const { url } = request;\n    const warnings = [];\n    if (!warned && options.debug)\n        warnings.push(\"debug-enabled\");\n    if (!options.trustHost) {\n        return new UntrustedHost(`Host must be trusted. URL was: ${request.url}`);\n    }\n    if (!options.secret?.length) {\n        return new MissingSecret(\"Please define a `secret`\");\n    }\n    const callbackUrlParam = request.query?.callbackUrl;\n    if (callbackUrlParam && !isValidHttpUrl(callbackUrlParam, url.origin)) {\n        return new InvalidCallbackUrl(`Invalid callback URL. Received: ${callbackUrlParam}`);\n    }\n    const { callbackUrl: defaultCallbackUrl } = defaultCookies(options.useSecureCookies ?? url.protocol === \"https:\");\n    const callbackUrlCookie = request.cookies?.[options.cookies?.callbackUrl?.name ?? defaultCallbackUrl.name];\n    if (callbackUrlCookie && !isValidHttpUrl(callbackUrlCookie, url.origin)) {\n        return new InvalidCallbackUrl(`Invalid callback URL. Received: ${callbackUrlCookie}`);\n    }\n    // Keep track of webauthn providers that use conditional UI\n    let hasConditionalUIProvider = false;\n    for (const p of options.providers) {\n        const provider = typeof p === \"function\" ? p() : p;\n        if ((provider.type === \"oauth\" || provider.type === \"oidc\") &&\n            !(provider.issuer ?? provider.options?.issuer)) {\n            const { authorization: a, token: t, userinfo: u } = provider;\n            let key;\n            if (typeof a !== \"string\" && !a?.url)\n                key = \"authorization\";\n            else if (typeof t !== \"string\" && !t?.url)\n                key = \"token\";\n            else if (typeof u !== \"string\" && !u?.url)\n                key = \"userinfo\";\n            if (key) {\n                return new InvalidEndpoints(`Provider \"${provider.id}\" is missing both \\`issuer\\` and \\`${key}\\` endpoint config. At least one of them is required`);\n            }\n        }\n        if (provider.type === \"credentials\")\n            hasCredentials = true;\n        else if (provider.type === \"email\")\n            hasEmail = true;\n        else if (provider.type === \"webauthn\") {\n            hasWebAuthn = true;\n            // Validate simpleWebAuthnBrowserVersion\n            if (provider.simpleWebAuthnBrowserVersion &&\n                !isSemverString(provider.simpleWebAuthnBrowserVersion)) {\n                return new AuthError(`Invalid provider config for \"${provider.id}\": simpleWebAuthnBrowserVersion \"${provider.simpleWebAuthnBrowserVersion}\" must be a valid semver string.`);\n            }\n            if (provider.enableConditionalUI) {\n                // Make sure only one webauthn provider has \"enableConditionalUI\" set to true\n                if (hasConditionalUIProvider) {\n                    return new DuplicateConditionalUI(`Multiple webauthn providers have 'enableConditionalUI' set to True. Only one provider can have this option enabled at a time`);\n                }\n                hasConditionalUIProvider = true;\n                // Make sure at least one formField has \"webauthn\" in its autocomplete param\n                const hasWebauthnFormField = Object.values(provider.formFields).some((f) => f.autocomplete && f.autocomplete.toString().indexOf(\"webauthn\") > -1);\n                if (!hasWebauthnFormField) {\n                    return new MissingWebAuthnAutocomplete(`Provider \"${provider.id}\" has 'enableConditionalUI' set to True, but none of its formFields have 'webauthn' in their autocomplete param`);\n                }\n            }\n        }\n    }\n    if (hasCredentials) {\n        const dbStrategy = options.session?.strategy === \"database\";\n        const onlyCredentials = !options.providers.some((p) => (typeof p === \"function\" ? p() : p).type !== \"credentials\");\n        if (dbStrategy && onlyCredentials) {\n            return new UnsupportedStrategy(\"Signing in with credentials only supported if JWT strategy is enabled\");\n        }\n        const credentialsNoAuthorize = options.providers.some((p) => {\n            const provider = typeof p === \"function\" ? p() : p;\n            return provider.type === \"credentials\" && !provider.authorize;\n        });\n        if (credentialsNoAuthorize) {\n            return new MissingAuthorize(\"Must define an authorize() handler to use credentials authentication provider\");\n        }\n    }\n    const { adapter, session } = options;\n    const requiredMethods = [];\n    if (hasEmail ||\n        session?.strategy === \"database\" ||\n        (!session?.strategy && adapter)) {\n        if (hasEmail) {\n            if (!adapter)\n                return new MissingAdapter(\"Email login requires an adapter\");\n            requiredMethods.push(...emailMethods);\n        }\n        else {\n            if (!adapter)\n                return new MissingAdapter(\"Database session requires an adapter\");\n            requiredMethods.push(...sessionMethods);\n        }\n    }\n    if (hasWebAuthn) {\n        // Log experimental warning\n        if (options.experimental?.enableWebAuthn) {\n            warnings.push(\"experimental-webauthn\");\n        }\n        else {\n            return new ExperimentalFeatureNotEnabled(\"WebAuthn is an experimental feature. To enable it, set `experimental.enableWebAuthn` to `true` in your config\");\n        }\n        if (!adapter)\n            return new MissingAdapter(\"WebAuthn requires an adapter\");\n        requiredMethods.push(...webauthnMethods);\n    }\n    if (adapter) {\n        const missing = requiredMethods.filter((m) => !(m in adapter));\n        if (missing.length) {\n            return new MissingAdapterMethods(`Required adapter methods were missing: ${missing.join(\", \")}`);\n        }\n    }\n    if (!warned)\n        warned = true;\n    return warnings;\n}\n", "const getGlobal = () => {\n    if (typeof globalThis !== 'undefined')\n        return globalThis;\n    if (typeof self !== 'undefined')\n        return self;\n    if (typeof window !== 'undefined')\n        return window;\n    throw new Error('unable to locate global object');\n};\nexport default async (digest, ikm, salt, info, keylen) => {\n    const { crypto: { subtle }, } = getGlobal();\n    return new Uint8Array(await subtle.deriveBits({\n        name: 'HKDF',\n        hash: `SHA-${digest.substr(3)}`,\n        salt,\n        info,\n    }, await subtle.importKey('raw', ikm, 'HKDF', false, ['deriveBits']), keylen << 3));\n};\n", "import derive from './runtime/hkdf.js';\nfunction normalizeDigest(digest) {\n    switch (digest) {\n        case 'sha256':\n        case 'sha384':\n        case 'sha512':\n        case 'sha1':\n            return digest;\n        default:\n            throw new TypeError('unsupported \"digest\" value');\n    }\n}\nfunction normalizeUint8Array(input, label) {\n    if (typeof input === 'string')\n        return new TextEncoder().encode(input);\n    if (!(input instanceof Uint8Array))\n        throw new TypeError(`\"${label}\"\" must be an instance of Uint8Array or a string`);\n    return input;\n}\nfunction normalizeIkm(input) {\n    const ikm = normalizeUint8Array(input, 'ikm');\n    if (!ikm.byteLength)\n        throw new TypeError(`\"ikm\" must be at least one byte in length`);\n    return ikm;\n}\nfunction normalizeInfo(input) {\n    const info = normalizeUint8Array(input, 'info');\n    if (info.byteLength > 1024) {\n        throw TypeError('\"info\" must not contain more than 1024 bytes');\n    }\n    return info;\n}\nfunction normalizeKeylen(input, digest) {\n    if (typeof input !== 'number' || !Number.isInteger(input) || input < 1) {\n        throw new TypeError('\"keylen\" must be a positive integer');\n    }\n    const hashlen = parseInt(digest.substr(3), 10) >> 3 || 20;\n    if (input > 255 * hashlen) {\n        throw new TypeError('\"keylen\" too large');\n    }\n    return input;\n}\nasync function hkdf(digest, ikm, salt, info, keylen) {\n    return derive(normalizeDigest(digest), normalizeIkm(ikm), normalizeUint8Array(salt, 'salt'), normalizeInfo(info), normalizeKeylen(keylen, digest));\n}\nexport { hkdf, hkdf as default };\n", "export default crypto;\nexport const isCryptoKey = (key) => key instanceof CryptoKey;\n", "import crypto from './webcrypto.js';\nconst digest = async (algorithm, data) => {\n    const subtleDigest = `SHA-${algorithm.slice(-3)}`;\n    return new Uint8Array(await crypto.subtle.digest(subtleDigest, data));\n};\nexport default digest;\n", "import digest from '../runtime/digest.js';\nexport const encoder = new TextEncoder();\nexport const decoder = new TextDecoder();\nconst MAX_INT32 = 2 ** 32;\nexport function concat(...buffers) {\n    const size = buffers.reduce((acc, { length }) => acc + length, 0);\n    const buf = new Uint8Array(size);\n    let i = 0;\n    for (const buffer of buffers) {\n        buf.set(buffer, i);\n        i += buffer.length;\n    }\n    return buf;\n}\nexport function p2s(alg, p2sInput) {\n    return concat(encoder.encode(alg), new Uint8Array([0]), p2sInput);\n}\nfunction writeUInt32BE(buf, value, offset) {\n    if (value < 0 || value >= MAX_INT32) {\n        throw new RangeError(`value must be >= 0 and <= ${MAX_INT32 - 1}. Received ${value}`);\n    }\n    buf.set([value >>> 24, value >>> 16, value >>> 8, value & 0xff], offset);\n}\nexport function uint64be(value) {\n    const high = Math.floor(value / MAX_INT32);\n    const low = value % MAX_INT32;\n    const buf = new Uint8Array(8);\n    writeUInt32BE(buf, high, 0);\n    writeUInt32BE(buf, low, 4);\n    return buf;\n}\nexport function uint32be(value) {\n    const buf = new Uint8Array(4);\n    writeUInt32BE(buf, value);\n    return buf;\n}\nexport function lengthAndInput(input) {\n    return concat(uint32be(input.length), input);\n}\nexport async function concatKdf(secret, bits, value) {\n    const iterations = Math.ceil((bits >> 3) / 32);\n    const res = new Uint8Array(iterations * 32);\n    for (let iter = 0; iter < iterations; iter++) {\n        const buf = new Uint8Array(4 + secret.length + value.length);\n        buf.set(uint32be(iter + 1));\n        buf.set(secret, 4);\n        buf.set(value, 4 + secret.length);\n        res.set(await digest('sha256', buf), iter * 32);\n    }\n    return res.slice(0, bits >> 3);\n}\n", "import { encoder, decoder } from '../lib/buffer_utils.js';\nexport const encodeBase64 = (input) => {\n    let unencoded = input;\n    if (typeof unencoded === 'string') {\n        unencoded = encoder.encode(unencoded);\n    }\n    const CHUNK_SIZE = 0x8000;\n    const arr = [];\n    for (let i = 0; i < unencoded.length; i += CHUNK_SIZE) {\n        arr.push(String.fromCharCode.apply(null, unencoded.subarray(i, i + CHUNK_SIZE)));\n    }\n    return btoa(arr.join(''));\n};\nexport const encode = (input) => {\n    return encodeBase64(input).replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n};\nexport const decodeBase64 = (encoded) => {\n    const binary = atob(encoded);\n    const bytes = new Uint8Array(binary.length);\n    for (let i = 0; i < binary.length; i++) {\n        bytes[i] = binary.charCodeAt(i);\n    }\n    return bytes;\n};\nexport const decode = (input) => {\n    let encoded = input;\n    if (encoded instanceof Uint8Array) {\n        encoded = decoder.decode(encoded);\n    }\n    encoded = encoded.replace(/-/g, '+').replace(/_/g, '/').replace(/\\s/g, '');\n    try {\n        return decodeBase64(encoded);\n    }\n    catch {\n        throw new TypeError('The input to be decoded is not correctly encoded.');\n    }\n};\n", "export class JOSEError extends Error {\n    constructor(message, options) {\n        super(message, options);\n        this.code = 'ERR_JOSE_GENERIC';\n        this.name = this.constructor.name;\n        Error.captureStackTrace?.(this, this.constructor);\n    }\n}\nJOSEError.code = 'ERR_JOSE_GENERIC';\nexport class JWTClaimValidationFailed extends JOSEError {\n    constructor(message, payload, claim = 'unspecified', reason = 'unspecified') {\n        super(message, { cause: { claim, reason, payload } });\n        this.code = 'ERR_JWT_CLAIM_VALIDATION_FAILED';\n        this.claim = claim;\n        this.reason = reason;\n        this.payload = payload;\n    }\n}\nJWTClaimValidationFailed.code = 'ERR_JWT_CLAIM_VALIDATION_FAILED';\nexport class JWTExpired extends JOSEError {\n    constructor(message, payload, claim = 'unspecified', reason = 'unspecified') {\n        super(message, { cause: { claim, reason, payload } });\n        this.code = 'ERR_JWT_EXPIRED';\n        this.claim = claim;\n        this.reason = reason;\n        this.payload = payload;\n    }\n}\nJWTExpired.code = 'ERR_JWT_EXPIRED';\nexport class JOSEAlgNotAllowed extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JOSE_ALG_NOT_ALLOWED';\n    }\n}\nJOSEAlgNotAllowed.code = 'ERR_JOSE_ALG_NOT_ALLOWED';\nexport class JOSENotSupported extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JOSE_NOT_SUPPORTED';\n    }\n}\nJOSENotSupported.code = 'ERR_JOSE_NOT_SUPPORTED';\nexport class JWEDecryptionFailed extends JOSEError {\n    constructor(message = 'decryption operation failed', options) {\n        super(message, options);\n        this.code = 'ERR_JWE_DECRYPTION_FAILED';\n    }\n}\nJWEDecryptionFailed.code = 'ERR_JWE_DECRYPTION_FAILED';\nexport class JWEInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWE_INVALID';\n    }\n}\nJWEInvalid.code = 'ERR_JWE_INVALID';\nexport class JWSInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWS_INVALID';\n    }\n}\nJWSInvalid.code = 'ERR_JWS_INVALID';\nexport class JWTInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWT_INVALID';\n    }\n}\nJWTInvalid.code = 'ERR_JWT_INVALID';\nexport class JWKInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWK_INVALID';\n    }\n}\nJWKInvalid.code = 'ERR_JWK_INVALID';\nexport class JWKSInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWKS_INVALID';\n    }\n}\nJWKSInvalid.code = 'ERR_JWKS_INVALID';\nexport class JWKSNoMatchingKey extends JOSEError {\n    constructor(message = 'no applicable key found in the JSON Web Key Set', options) {\n        super(message, options);\n        this.code = 'ERR_JWKS_NO_MATCHING_KEY';\n    }\n}\nJWKSNoMatchingKey.code = 'ERR_JWKS_NO_MATCHING_KEY';\nexport class JWKSMultipleMatchingKeys extends JOSEError {\n    constructor(message = 'multiple matching keys found in the JSON Web Key Set', options) {\n        super(message, options);\n        this.code = 'ERR_JWKS_MULTIPLE_MATCHING_KEYS';\n    }\n}\nSymbol.asyncIterator;\nJWKSMultipleMatchingKeys.code = 'ERR_JWKS_MULTIPLE_MATCHING_KEYS';\nexport class JWKSTimeout extends JOSEError {\n    constructor(message = 'request timed out', options) {\n        super(message, options);\n        this.code = 'ERR_JWKS_TIMEOUT';\n    }\n}\nJWKSTimeout.code = 'ERR_JWKS_TIMEOUT';\nexport class JWSSignatureVerificationFailed extends JOSEError {\n    constructor(message = 'signature verification failed', options) {\n        super(message, options);\n        this.code = 'ERR_JWS_SIGNATURE_VERIFICATION_FAILED';\n    }\n}\nJWSSignatureVerificationFailed.code = 'ERR_JWS_SIGNATURE_VERIFICATION_FAILED';\n", "import crypto from './webcrypto.js';\nexport default crypto.getRandomValues.bind(crypto);\n", "import { JOSENotSupported } from '../util/errors.js';\nimport random from '../runtime/random.js';\nexport function bitLength(alg) {\n    switch (alg) {\n        case 'A128GCM':\n        case 'A128GCMKW':\n        case 'A192GCM':\n        case 'A192GCMKW':\n        case 'A256GCM':\n        case 'A256GCMKW':\n            return 96;\n        case 'A128CBC-HS256':\n        case 'A192CBC-HS384':\n        case 'A256CBC-HS512':\n            return 128;\n        default:\n            throw new JOSENotSupported(`Unsupported JWE Algorithm: ${alg}`);\n    }\n}\nexport default (alg) => random(new Uint8Array(bitLength(alg) >> 3));\n", "import { JWEInvalid } from '../util/errors.js';\nimport { bitLength } from './iv.js';\nconst checkIvLength = (enc, iv) => {\n    if (iv.length << 3 !== bitLength(enc)) {\n        throw new JWEInvalid('Invalid Initialization Vector length');\n    }\n};\nexport default checkIvLength;\n", "import { JWEInvalid } from '../util/errors.js';\nconst checkCekLength = (cek, expected) => {\n    const actual = cek.byteLength << 3;\n    if (actual !== expected) {\n        throw new JWEInvalid(`Invalid Content Encryption Key length. Expected ${expected} bits, got ${actual} bits`);\n    }\n};\nexport default checkCekLength;\n", "const timingSafeEqual = (a, b) => {\n    if (!(a instanceof Uint8Array)) {\n        throw new TypeError('First argument must be a buffer');\n    }\n    if (!(b instanceof Uint8Array)) {\n        throw new TypeError('Second argument must be a buffer');\n    }\n    if (a.length !== b.length) {\n        throw new TypeError('Input buffers must have the same length');\n    }\n    const len = a.length;\n    let out = 0;\n    let i = -1;\n    while (++i < len) {\n        out |= a[i] ^ b[i];\n    }\n    return out === 0;\n};\nexport default timingSafeEqual;\n", "function unusable(name, prop = 'algorithm.name') {\n    return new TypeError(`CryptoKey does not support this operation, its ${prop} must be ${name}`);\n}\nfunction isAlgorithm(algorithm, name) {\n    return algorithm.name === name;\n}\nfunction getHashLength(hash) {\n    return parseInt(hash.name.slice(4), 10);\n}\nfunction getNamedCurve(alg) {\n    switch (alg) {\n        case 'ES256':\n            return 'P-256';\n        case 'ES384':\n            return 'P-384';\n        case 'ES512':\n            return 'P-521';\n        default:\n            throw new Error('unreachable');\n    }\n}\nfunction checkUsage(key, usages) {\n    if (usages.length && !usages.some((expected) => key.usages.includes(expected))) {\n        let msg = 'CryptoKey does not support this operation, its usages must include ';\n        if (usages.length > 2) {\n            const last = usages.pop();\n            msg += `one of ${usages.join(', ')}, or ${last}.`;\n        }\n        else if (usages.length === 2) {\n            msg += `one of ${usages[0]} or ${usages[1]}.`;\n        }\n        else {\n            msg += `${usages[0]}.`;\n        }\n        throw new TypeError(msg);\n    }\n}\nexport function checkSigCryptoKey(key, alg, ...usages) {\n    switch (alg) {\n        case 'HS256':\n        case 'HS384':\n        case 'HS512': {\n            if (!isAlgorithm(key.algorithm, 'HMAC'))\n                throw unusable('HMAC');\n            const expected = parseInt(alg.slice(2), 10);\n            const actual = getHashLength(key.algorithm.hash);\n            if (actual !== expected)\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\n            break;\n        }\n        case 'RS256':\n        case 'RS384':\n        case 'RS512': {\n            if (!isAlgorithm(key.algorithm, 'RSASSA-PKCS1-v1_5'))\n                throw unusable('RSASSA-PKCS1-v1_5');\n            const expected = parseInt(alg.slice(2), 10);\n            const actual = getHashLength(key.algorithm.hash);\n            if (actual !== expected)\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\n            break;\n        }\n        case 'PS256':\n        case 'PS384':\n        case 'PS512': {\n            if (!isAlgorithm(key.algorithm, 'RSA-PSS'))\n                throw unusable('RSA-PSS');\n            const expected = parseInt(alg.slice(2), 10);\n            const actual = getHashLength(key.algorithm.hash);\n            if (actual !== expected)\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\n            break;\n        }\n        case 'EdDSA': {\n            if (key.algorithm.name !== 'Ed25519' && key.algorithm.name !== 'Ed448') {\n                throw unusable('Ed25519 or Ed448');\n            }\n            break;\n        }\n        case 'ES256':\n        case 'ES384':\n        case 'ES512': {\n            if (!isAlgorithm(key.algorithm, 'ECDSA'))\n                throw unusable('ECDSA');\n            const expected = getNamedCurve(alg);\n            const actual = key.algorithm.namedCurve;\n            if (actual !== expected)\n                throw unusable(expected, 'algorithm.namedCurve');\n            break;\n        }\n        default:\n            throw new TypeError('CryptoKey does not support this operation');\n    }\n    checkUsage(key, usages);\n}\nexport function checkEncCryptoKey(key, alg, ...usages) {\n    switch (alg) {\n        case 'A128GCM':\n        case 'A192GCM':\n        case 'A256GCM': {\n            if (!isAlgorithm(key.algorithm, 'AES-GCM'))\n                throw unusable('AES-GCM');\n            const expected = parseInt(alg.slice(1, 4), 10);\n            const actual = key.algorithm.length;\n            if (actual !== expected)\n                throw unusable(expected, 'algorithm.length');\n            break;\n        }\n        case 'A128KW':\n        case 'A192KW':\n        case 'A256KW': {\n            if (!isAlgorithm(key.algorithm, 'AES-KW'))\n                throw unusable('AES-KW');\n            const expected = parseInt(alg.slice(1, 4), 10);\n            const actual = key.algorithm.length;\n            if (actual !== expected)\n                throw unusable(expected, 'algorithm.length');\n            break;\n        }\n        case 'ECDH': {\n            switch (key.algorithm.name) {\n                case 'ECDH':\n                case 'X25519':\n                case 'X448':\n                    break;\n                default:\n                    throw unusable('ECDH, X25519, or X448');\n            }\n            break;\n        }\n        case 'PBES2-HS256+A128KW':\n        case 'PBES2-HS384+A192KW':\n        case 'PBES2-HS512+A256KW':\n            if (!isAlgorithm(key.algorithm, 'PBKDF2'))\n                throw unusable('PBKDF2');\n            break;\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512': {\n            if (!isAlgorithm(key.algorithm, 'RSA-OAEP'))\n                throw unusable('RSA-OAEP');\n            const expected = parseInt(alg.slice(9), 10) || 1;\n            const actual = getHashLength(key.algorithm.hash);\n            if (actual !== expected)\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\n            break;\n        }\n        default:\n            throw new TypeError('CryptoKey does not support this operation');\n    }\n    checkUsage(key, usages);\n}\n", "function message(msg, actual, ...types) {\n    types = types.filter(Boolean);\n    if (types.length > 2) {\n        const last = types.pop();\n        msg += `one of type ${types.join(', ')}, or ${last}.`;\n    }\n    else if (types.length === 2) {\n        msg += `one of type ${types[0]} or ${types[1]}.`;\n    }\n    else {\n        msg += `of type ${types[0]}.`;\n    }\n    if (actual == null) {\n        msg += ` Received ${actual}`;\n    }\n    else if (typeof actual === 'function' && actual.name) {\n        msg += ` Received function ${actual.name}`;\n    }\n    else if (typeof actual === 'object' && actual != null) {\n        if (actual.constructor?.name) {\n            msg += ` Received an instance of ${actual.constructor.name}`;\n        }\n    }\n    return msg;\n}\nexport default (actual, ...types) => {\n    return message('Key must be ', actual, ...types);\n};\nexport function withAlg(alg, actual, ...types) {\n    return message(`Key for the ${alg} algorithm must be `, actual, ...types);\n}\n", "import { isCryptoKey } from './webcrypto.js';\nexport default (key) => {\n    if (isCryptoKey(key)) {\n        return true;\n    }\n    return key?.[Symbol.toStringTag] === 'KeyObject';\n};\nexport const types = ['CryptoKey'];\n", "import { concat, uint64be } from '../lib/buffer_utils.js';\nimport checkIvLength from '../lib/check_iv_length.js';\nimport checkCekLength from './check_cek_length.js';\nimport timingSafeEqual from './timing_safe_equal.js';\nimport { JOSENotSupported, JWEDecryptionFailed, JWEInvalid } from '../util/errors.js';\nimport crypto, { isCryptoKey } from './webcrypto.js';\nimport { checkEncCryptoKey } from '../lib/crypto_key.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { types } from './is_key_like.js';\nasync function cbcDecrypt(enc, cek, ciphertext, iv, tag, aad) {\n    if (!(cek instanceof Uint8Array)) {\n        throw new TypeError(invalidKeyInput(cek, 'Uint8Array'));\n    }\n    const keySize = parseInt(enc.slice(1, 4), 10);\n    const encKey = await crypto.subtle.importKey('raw', cek.subarray(keySize >> 3), 'AES-CBC', false, ['decrypt']);\n    const macKey = await crypto.subtle.importKey('raw', cek.subarray(0, keySize >> 3), {\n        hash: `SHA-${keySize << 1}`,\n        name: 'HMAC',\n    }, false, ['sign']);\n    const macData = concat(aad, iv, ciphertext, uint64be(aad.length << 3));\n    const expectedTag = new Uint8Array((await crypto.subtle.sign('HMAC', macKey, macData)).slice(0, keySize >> 3));\n    let macCheckPassed;\n    try {\n        macCheckPassed = timingSafeEqual(tag, expectedTag);\n    }\n    catch {\n    }\n    if (!macCheckPassed) {\n        throw new JWEDecryptionFailed();\n    }\n    let plaintext;\n    try {\n        plaintext = new Uint8Array(await crypto.subtle.decrypt({ iv, name: 'AES-CBC' }, encKey, ciphertext));\n    }\n    catch {\n    }\n    if (!plaintext) {\n        throw new JWEDecryptionFailed();\n    }\n    return plaintext;\n}\nasync function gcmDecrypt(enc, cek, ciphertext, iv, tag, aad) {\n    let encKey;\n    if (cek instanceof Uint8Array) {\n        encKey = await crypto.subtle.importKey('raw', cek, 'AES-GCM', false, ['decrypt']);\n    }\n    else {\n        checkEncCryptoKey(cek, enc, 'decrypt');\n        encKey = cek;\n    }\n    try {\n        return new Uint8Array(await crypto.subtle.decrypt({\n            additionalData: aad,\n            iv,\n            name: 'AES-GCM',\n            tagLength: 128,\n        }, encKey, concat(ciphertext, tag)));\n    }\n    catch {\n        throw new JWEDecryptionFailed();\n    }\n}\nconst decrypt = async (enc, cek, ciphertext, iv, tag, aad) => {\n    if (!isCryptoKey(cek) && !(cek instanceof Uint8Array)) {\n        throw new TypeError(invalidKeyInput(cek, ...types, 'Uint8Array'));\n    }\n    if (!iv) {\n        throw new JWEInvalid('JWE Initialization Vector missing');\n    }\n    if (!tag) {\n        throw new JWEInvalid('JWE Authentication Tag missing');\n    }\n    checkIvLength(enc, iv);\n    switch (enc) {\n        case 'A128CBC-HS256':\n        case 'A192CBC-HS384':\n        case 'A256CBC-HS512':\n            if (cek instanceof Uint8Array)\n                checkCekLength(cek, parseInt(enc.slice(-3), 10));\n            return cbcDecrypt(enc, cek, ciphertext, iv, tag, aad);\n        case 'A128GCM':\n        case 'A192GCM':\n        case 'A256GCM':\n            if (cek instanceof Uint8Array)\n                checkCekLength(cek, parseInt(enc.slice(1, 4), 10));\n            return gcmDecrypt(enc, cek, ciphertext, iv, tag, aad);\n        default:\n            throw new JOSENotSupported('Unsupported JWE Content Encryption Algorithm');\n    }\n};\nexport default decrypt;\n", "const isDisjoint = (...headers) => {\n    const sources = headers.filter(Boolean);\n    if (sources.length === 0 || sources.length === 1) {\n        return true;\n    }\n    let acc;\n    for (const header of sources) {\n        const parameters = Object.keys(header);\n        if (!acc || acc.size === 0) {\n            acc = new Set(parameters);\n            continue;\n        }\n        for (const parameter of parameters) {\n            if (acc.has(parameter)) {\n                return false;\n            }\n            acc.add(parameter);\n        }\n    }\n    return true;\n};\nexport default isDisjoint;\n", "function isObjectLike(value) {\n    return typeof value === 'object' && value !== null;\n}\nexport default function isObject(input) {\n    if (!isObjectLike(input) || Object.prototype.toString.call(input) !== '[object Object]') {\n        return false;\n    }\n    if (Object.getPrototypeOf(input) === null) {\n        return true;\n    }\n    let proto = input;\n    while (Object.getPrototypeOf(proto) !== null) {\n        proto = Object.getPrototypeOf(proto);\n    }\n    return Object.getPrototypeOf(input) === proto;\n}\n", "const bogusWebCrypto = [\n    { hash: 'SHA-256', name: 'HMAC' },\n    true,\n    ['sign'],\n];\nexport default bogusWebCrypto;\n", "import bogusWebCrypto from './bogus.js';\nimport crypto, { isCryptoKey } from './webcrypto.js';\nimport { checkEncCryptoKey } from '../lib/crypto_key.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { types } from './is_key_like.js';\nfunction checkKeySize(key, alg) {\n    if (key.algorithm.length !== parseInt(alg.slice(1, 4), 10)) {\n        throw new TypeError(`Invalid key size for alg: ${alg}`);\n    }\n}\nfunction getCryptoKey(key, alg, usage) {\n    if (isCryptoKey(key)) {\n        checkEncCryptoKey(key, alg, usage);\n        return key;\n    }\n    if (key instanceof Uint8Array) {\n        return crypto.subtle.importKey('raw', key, 'AES-KW', true, [usage]);\n    }\n    throw new TypeError(invalidKeyInput(key, ...types, 'Uint8Array'));\n}\nexport const wrap = async (alg, key, cek) => {\n    const cryptoKey = await getCryptoKey(key, alg, 'wrapKey');\n    checkKeySize(cryptoKey, alg);\n    const cryptoKeyCek = await crypto.subtle.importKey('raw', cek, ...bogusWebCrypto);\n    return new Uint8Array(await crypto.subtle.wrapKey('raw', cryptoKeyCek, cryptoKey, 'AES-KW'));\n};\nexport const unwrap = async (alg, key, encryptedKey) => {\n    const cryptoKey = await getCryptoKey(key, alg, 'unwrapKey');\n    checkKeySize(cryptoKey, alg);\n    const cryptoKeyCek = await crypto.subtle.unwrapKey('raw', encryptedKey, cryptoKey, 'AES-KW', ...bogusWebCrypto);\n    return new Uint8Array(await crypto.subtle.exportKey('raw', cryptoKeyCek));\n};\n", "import { encoder, concat, uint32be, lengthAndInput, concatKdf } from '../lib/buffer_utils.js';\nimport crypto, { isCryptoKey } from './webcrypto.js';\nimport { checkEncCryptoKey } from '../lib/crypto_key.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { types } from './is_key_like.js';\nexport async function deriveKey(publicKey, privateKey, algorithm, keyLength, apu = new Uint8Array(0), apv = new Uint8Array(0)) {\n    if (!isCryptoKey(publicKey)) {\n        throw new TypeError(invalidKeyInput(publicKey, ...types));\n    }\n    checkEncCryptoKey(publicKey, 'ECDH');\n    if (!isCryptoKey(privateKey)) {\n        throw new TypeError(invalidKeyInput(privateKey, ...types));\n    }\n    checkEncCryptoKey(privateKey, 'ECDH', 'deriveBits');\n    const value = concat(lengthAndInput(encoder.encode(algorithm)), lengthAndInput(apu), lengthAndInput(apv), uint32be(keyLength));\n    let length;\n    if (publicKey.algorithm.name === 'X25519') {\n        length = 256;\n    }\n    else if (publicKey.algorithm.name === 'X448') {\n        length = 448;\n    }\n    else {\n        length =\n            Math.ceil(parseInt(publicKey.algorithm.namedCurve.substr(-3), 10) / 8) <<\n                3;\n    }\n    const sharedSecret = new Uint8Array(await crypto.subtle.deriveBits({\n        name: publicKey.algorithm.name,\n        public: publicKey,\n    }, privateKey, length));\n    return concatKdf(sharedSecret, keyLength, value);\n}\nexport async function generateEpk(key) {\n    if (!isCryptoKey(key)) {\n        throw new TypeError(invalidKeyInput(key, ...types));\n    }\n    return crypto.subtle.generateKey(key.algorithm, true, ['deriveBits']);\n}\nexport function ecdhAllowed(key) {\n    if (!isCryptoKey(key)) {\n        throw new TypeError(invalidKeyInput(key, ...types));\n    }\n    return (['P-256', 'P-384', 'P-521'].includes(key.algorithm.namedCurve) ||\n        key.algorithm.name === 'X25519' ||\n        key.algorithm.name === 'X448');\n}\n", "import { JWEInvalid } from '../util/errors.js';\nexport default function checkP2s(p2s) {\n    if (!(p2s instanceof Uint8Array) || p2s.length < 8) {\n        throw new JWEInvalid('PBES2 Salt Input must be 8 or more octets');\n    }\n}\n", "import random from './random.js';\nimport { p2s as concatSalt } from '../lib/buffer_utils.js';\nimport { encode as base64url } from './base64url.js';\nimport { wrap, unwrap } from './aeskw.js';\nimport checkP2s from '../lib/check_p2s.js';\nimport crypto, { isCryptoKey } from './webcrypto.js';\nimport { checkEncCryptoKey } from '../lib/crypto_key.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { types } from './is_key_like.js';\nfunction getCryptoKey(key, alg) {\n    if (key instanceof Uint8Array) {\n        return crypto.subtle.importKey('raw', key, 'PBKDF2', false, ['deriveBits']);\n    }\n    if (isCryptoKey(key)) {\n        checkEncCryptoKey(key, alg, 'deriveBits', 'deriveKey');\n        return key;\n    }\n    throw new TypeError(invalidKeyInput(key, ...types, 'Uint8Array'));\n}\nasync function deriveKey(p2s, alg, p2c, key) {\n    checkP2s(p2s);\n    const salt = concatSalt(alg, p2s);\n    const keylen = parseInt(alg.slice(13, 16), 10);\n    const subtleAlg = {\n        hash: `SHA-${alg.slice(8, 11)}`,\n        iterations: p2c,\n        name: 'PBKDF2',\n        salt,\n    };\n    const wrapAlg = {\n        length: keylen,\n        name: 'AES-KW',\n    };\n    const cryptoKey = await getCryptoKey(key, alg);\n    if (cryptoKey.usages.includes('deriveBits')) {\n        return new Uint8Array(await crypto.subtle.deriveBits(subtleAlg, cryptoKey, keylen));\n    }\n    if (cryptoKey.usages.includes('deriveKey')) {\n        return crypto.subtle.deriveKey(subtleAlg, cryptoKey, wrapAlg, false, ['wrapKey', 'unwrapKey']);\n    }\n    throw new TypeError('PBKDF2 key \"usages\" must include \"deriveBits\" or \"deriveKey\"');\n}\nexport const encrypt = async (alg, key, cek, p2c = 2048, p2s = random(new Uint8Array(16))) => {\n    const derived = await deriveKey(p2s, alg, p2c, key);\n    const encryptedKey = await wrap(alg.slice(-6), derived, cek);\n    return { encryptedKey, p2c, p2s: base64url(p2s) };\n};\nexport const decrypt = async (alg, key, encryptedKey, p2c, p2s) => {\n    const derived = await deriveKey(p2s, alg, p2c, key);\n    return unwrap(alg.slice(-6), derived, encryptedKey);\n};\n", "import { JOSENotSupported } from '../util/errors.js';\nexport default function subtleRsaEs(alg) {\n    switch (alg) {\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512':\n            return 'RSA-OAEP';\n        default:\n            throw new JOSENotSupported(`alg ${alg} is not supported either by JOSE or your javascript runtime`);\n    }\n}\n", "export default (alg, key) => {\n    if (alg.startsWith('RS') || alg.startsWith('PS')) {\n        const { modulusLength } = key.algorithm;\n        if (typeof modulusLength !== 'number' || modulusLength < 2048) {\n            throw new TypeError(`${alg} requires key modulusLength to be 2048 bits or larger`);\n        }\n    }\n};\n", "import subtleAlgorithm from './subtle_rsaes.js';\nimport bogusWebCrypto from './bogus.js';\nimport crypto, { isCryptoKey } from './webcrypto.js';\nimport { checkEncCryptoKey } from '../lib/crypto_key.js';\nimport checkKeyLength from './check_key_length.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { types } from './is_key_like.js';\nexport const encrypt = async (alg, key, cek) => {\n    if (!isCryptoKey(key)) {\n        throw new TypeError(invalidKeyInput(key, ...types));\n    }\n    checkEncCryptoKey(key, alg, 'encrypt', 'wrapKey');\n    checkKeyLength(alg, key);\n    if (key.usages.includes('encrypt')) {\n        return new Uint8Array(await crypto.subtle.encrypt(subtleAlgorithm(alg), key, cek));\n    }\n    if (key.usages.includes('wrapKey')) {\n        const cryptoKeyCek = await crypto.subtle.importKey('raw', cek, ...bogusWebCrypto);\n        return new Uint8Array(await crypto.subtle.wrapKey('raw', cryptoKeyCek, key, subtleAlgorithm(alg)));\n    }\n    throw new TypeError('RSA-OAEP key \"usages\" must include \"encrypt\" or \"wrapKey\" for this operation');\n};\nexport const decrypt = async (alg, key, encryptedKey) => {\n    if (!isCryptoKey(key)) {\n        throw new TypeError(invalidKeyInput(key, ...types));\n    }\n    checkEncCryptoKey(key, alg, 'decrypt', 'unwrapKey');\n    checkKeyLength(alg, key);\n    if (key.usages.includes('decrypt')) {\n        return new Uint8Array(await crypto.subtle.decrypt(subtleAlgorithm(alg), key, encryptedKey));\n    }\n    if (key.usages.includes('unwrapKey')) {\n        const cryptoKeyCek = await crypto.subtle.unwrapKey('raw', encryptedKey, key, subtleAlgorithm(alg), ...bogusWebCrypto);\n        return new Uint8Array(await crypto.subtle.exportKey('raw', cryptoKeyCek));\n    }\n    throw new TypeError('RSA-OAEP key \"usages\" must include \"decrypt\" or \"unwrapKey\" for this operation');\n};\n", "import isObject from './is_object.js';\nexport function isJWK(key) {\n    return isObject(key) && typeof key.kty === 'string';\n}\nexport function isPrivateJWK(key) {\n    return key.kty !== 'oct' && typeof key.d === 'string';\n}\nexport function isPublicJWK(key) {\n    return key.kty !== 'oct' && typeof key.d === 'undefined';\n}\nexport function isSecretJWK(key) {\n    return isJWK(key) && key.kty === 'oct' && typeof key.k === 'string';\n}\n", "import crypto from './webcrypto.js';\nimport { JOSENotSupported } from '../util/errors.js';\nfunction subtleMapping(jwk) {\n    let algorithm;\n    let keyUsages;\n    switch (jwk.kty) {\n        case 'RSA': {\n            switch (jwk.alg) {\n                case 'PS256':\n                case 'PS384':\n                case 'PS512':\n                    algorithm = { name: 'RSA-PSS', hash: `SHA-${jwk.alg.slice(-3)}` };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'RS256':\n                case 'RS384':\n                case 'RS512':\n                    algorithm = { name: 'RSASSA-PKCS1-v1_5', hash: `SHA-${jwk.alg.slice(-3)}` };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'RSA-OAEP':\n                case 'RSA-OAEP-256':\n                case 'RSA-OAEP-384':\n                case 'RSA-OAEP-512':\n                    algorithm = {\n                        name: 'RSA-OAEP',\n                        hash: `SHA-${parseInt(jwk.alg.slice(-3), 10) || 1}`,\n                    };\n                    keyUsages = jwk.d ? ['decrypt', 'unwrapKey'] : ['encrypt', 'wrapKey'];\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n            }\n            break;\n        }\n        case 'EC': {\n            switch (jwk.alg) {\n                case 'ES256':\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-256' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ES384':\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-384' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ES512':\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-521' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ECDH-ES':\n                case 'ECDH-ES+A128KW':\n                case 'ECDH-ES+A192KW':\n                case 'ECDH-ES+A256KW':\n                    algorithm = { name: 'ECDH', namedCurve: jwk.crv };\n                    keyUsages = jwk.d ? ['deriveBits'] : [];\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n            }\n            break;\n        }\n        case 'OKP': {\n            switch (jwk.alg) {\n                case 'EdDSA':\n                    algorithm = { name: jwk.crv };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ECDH-ES':\n                case 'ECDH-ES+A128KW':\n                case 'ECDH-ES+A192KW':\n                case 'ECDH-ES+A256KW':\n                    algorithm = { name: jwk.crv };\n                    keyUsages = jwk.d ? ['deriveBits'] : [];\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n            }\n            break;\n        }\n        default:\n            throw new JOSENotSupported('Invalid or unsupported JWK \"kty\" (Key Type) Parameter value');\n    }\n    return { algorithm, keyUsages };\n}\nconst parse = async (jwk) => {\n    if (!jwk.alg) {\n        throw new TypeError('\"alg\" argument is required when \"jwk.alg\" is not present');\n    }\n    const { algorithm, keyUsages } = subtleMapping(jwk);\n    const rest = [\n        algorithm,\n        jwk.ext ?? false,\n        jwk.key_ops ?? keyUsages,\n    ];\n    const keyData = { ...jwk };\n    delete keyData.alg;\n    delete keyData.use;\n    return crypto.subtle.importKey('jwk', keyData, ...rest);\n};\nexport default parse;\n", "import { isJWK } from '../lib/is_jwk.js';\nimport { decode } from './base64url.js';\nimport importJWK from './jwk_to_key.js';\nconst exportKeyValue = (k) => decode(k);\nlet privCache;\nlet pubCache;\nconst isKeyObject = (key) => {\n    return key?.[Symbol.toStringTag] === 'KeyObject';\n};\nconst importAndCache = async (cache, key, jwk, alg, freeze = false) => {\n    let cached = cache.get(key);\n    if (cached?.[alg]) {\n        return cached[alg];\n    }\n    const cryptoKey = await importJWK({ ...jwk, alg });\n    if (freeze)\n        Object.freeze(key);\n    if (!cached) {\n        cache.set(key, { [alg]: cryptoKey });\n    }\n    else {\n        cached[alg] = cryptoKey;\n    }\n    return cryptoKey;\n};\nconst normalizePublicKey = (key, alg) => {\n    if (isKeyObject(key)) {\n        let jwk = key.export({ format: 'jwk' });\n        delete jwk.d;\n        delete jwk.dp;\n        delete jwk.dq;\n        delete jwk.p;\n        delete jwk.q;\n        delete jwk.qi;\n        if (jwk.k) {\n            return exportKeyValue(jwk.k);\n        }\n        pubCache || (pubCache = new WeakMap());\n        return importAndCache(pubCache, key, jwk, alg);\n    }\n    if (isJWK(key)) {\n        if (key.k)\n            return decode(key.k);\n        pubCache || (pubCache = new WeakMap());\n        const cryptoKey = importAndCache(pubCache, key, key, alg, true);\n        return cryptoKey;\n    }\n    return key;\n};\nconst normalizePrivateKey = (key, alg) => {\n    if (isKeyObject(key)) {\n        let jwk = key.export({ format: 'jwk' });\n        if (jwk.k) {\n            return exportKeyValue(jwk.k);\n        }\n        privCache || (privCache = new WeakMap());\n        return importAndCache(privCache, key, jwk, alg);\n    }\n    if (isJWK(key)) {\n        if (key.k)\n            return decode(key.k);\n        privCache || (privCache = new WeakMap());\n        const cryptoKey = importAndCache(privCache, key, key, alg, true);\n        return cryptoKey;\n    }\n    return key;\n};\nexport default { normalizePublicKey, normalizePrivateKey };\n", "import { JOSENotSupported } from '../util/errors.js';\nimport random from '../runtime/random.js';\nexport function bitLength(alg) {\n    switch (alg) {\n        case 'A128GCM':\n            return 128;\n        case 'A192GCM':\n            return 192;\n        case 'A256GCM':\n        case 'A128CBC-HS256':\n            return 256;\n        case 'A192CBC-HS384':\n            return 384;\n        case 'A256CBC-HS512':\n            return 512;\n        default:\n            throw new JOSENotSupported(`Unsupported JWE Algorithm: ${alg}`);\n    }\n}\nexport default (alg) => random(new Uint8Array(bitLength(alg) >> 3));\n", "import { decode as decodeBase64URL } from '../runtime/base64url.js';\nimport { fromSPKI, fromPKCS8, fromX509 } from '../runtime/asn1.js';\nimport asKeyObject from '../runtime/jwk_to_key.js';\nimport { JOSENotSupported } from '../util/errors.js';\nimport isObject from '../lib/is_object.js';\nexport async function importSPKI(spki, alg, options) {\n    if (typeof spki !== 'string' || spki.indexOf('-----BEGIN PUBLIC KEY-----') !== 0) {\n        throw new TypeError('\"spki\" must be SPKI formatted string');\n    }\n    return fromSPKI(spki, alg, options);\n}\nexport async function importX509(x509, alg, options) {\n    if (typeof x509 !== 'string' || x509.indexOf('-----BEGIN CERTIFICATE-----') !== 0) {\n        throw new TypeError('\"x509\" must be X.509 formatted string');\n    }\n    return fromX509(x509, alg, options);\n}\nexport async function importPKCS8(pkcs8, alg, options) {\n    if (typeof pkcs8 !== 'string' || pkcs8.indexOf('-----BEGIN PRIVATE KEY-----') !== 0) {\n        throw new TypeError('\"pkcs8\" must be PKCS#8 formatted string');\n    }\n    return fromPKCS8(pkcs8, alg, options);\n}\nexport async function importJWK(jwk, alg) {\n    if (!isObject(jwk)) {\n        throw new TypeError('JWK must be an object');\n    }\n    alg || (alg = jwk.alg);\n    switch (jwk.kty) {\n        case 'oct':\n            if (typeof jwk.k !== 'string' || !jwk.k) {\n                throw new TypeError('missing \"k\" (Key Value) Parameter value');\n            }\n            return decodeBase64URL(jwk.k);\n        case 'RSA':\n            if (jwk.oth !== undefined) {\n                throw new JOSENotSupported('RSA JWK \"oth\" (Other Primes Info) Parameter value is not supported');\n            }\n        case 'EC':\n        case 'OKP':\n            return asKeyObject({ ...jwk, alg });\n        default:\n            throw new JOSENotSupported('Unsupported \"kty\" (Key Type) Parameter value');\n    }\n}\n", "import { withAlg as invalidKeyInput } from './invalid_key_input.js';\nimport isKeyLike, { types } from '../runtime/is_key_like.js';\nimport * as jwk from './is_jwk.js';\nconst tag = (key) => key?.[Symbol.toStringTag];\nconst jwkMatchesOp = (alg, key, usage) => {\n    if (key.use !== undefined && key.use !== 'sig') {\n        throw new TypeError('Invalid key for this operation, when present its use must be sig');\n    }\n    if (key.key_ops !== undefined && key.key_ops.includes?.(usage) !== true) {\n        throw new TypeError(`Invalid key for this operation, when present its key_ops must include ${usage}`);\n    }\n    if (key.alg !== undefined && key.alg !== alg) {\n        throw new TypeError(`Invalid key for this operation, when present its alg must be ${alg}`);\n    }\n    return true;\n};\nconst symmetricTypeCheck = (alg, key, usage, allowJwk) => {\n    if (key instanceof Uint8Array)\n        return;\n    if (allowJwk && jwk.isJWK(key)) {\n        if (jwk.isSecretJWK(key) && jwkMatchesOp(alg, key, usage))\n            return;\n        throw new TypeError(`JSON Web Key for symmetric algorithms must have JWK \"kty\" (Key Type) equal to \"oct\" and the JWK \"k\" (Key Value) present`);\n    }\n    if (!isKeyLike(key)) {\n        throw new TypeError(invalidKeyInput(alg, key, ...types, 'Uint8Array', allowJwk ? 'JSON Web Key' : null));\n    }\n    if (key.type !== 'secret') {\n        throw new TypeError(`${tag(key)} instances for symmetric algorithms must be of type \"secret\"`);\n    }\n};\nconst asymmetricTypeCheck = (alg, key, usage, allowJwk) => {\n    if (allowJwk && jwk.isJWK(key)) {\n        switch (usage) {\n            case 'sign':\n                if (jwk.isPrivateJWK(key) && jwkMatchesOp(alg, key, usage))\n                    return;\n                throw new TypeError(`JSON Web Key for this operation be a private JWK`);\n            case 'verify':\n                if (jwk.isPublicJWK(key) && jwkMatchesOp(alg, key, usage))\n                    return;\n                throw new TypeError(`JSON Web Key for this operation be a public JWK`);\n        }\n    }\n    if (!isKeyLike(key)) {\n        throw new TypeError(invalidKeyInput(alg, key, ...types, allowJwk ? 'JSON Web Key' : null));\n    }\n    if (key.type === 'secret') {\n        throw new TypeError(`${tag(key)} instances for asymmetric algorithms must not be of type \"secret\"`);\n    }\n    if (usage === 'sign' && key.type === 'public') {\n        throw new TypeError(`${tag(key)} instances for asymmetric algorithm signing must be of type \"private\"`);\n    }\n    if (usage === 'decrypt' && key.type === 'public') {\n        throw new TypeError(`${tag(key)} instances for asymmetric algorithm decryption must be of type \"private\"`);\n    }\n    if (key.algorithm && usage === 'verify' && key.type === 'private') {\n        throw new TypeError(`${tag(key)} instances for asymmetric algorithm verifying must be of type \"public\"`);\n    }\n    if (key.algorithm && usage === 'encrypt' && key.type === 'private') {\n        throw new TypeError(`${tag(key)} instances for asymmetric algorithm encryption must be of type \"public\"`);\n    }\n};\nfunction checkKeyType(allowJwk, alg, key, usage) {\n    const symmetric = alg.startsWith('HS') ||\n        alg === 'dir' ||\n        alg.startsWith('PBES2') ||\n        /^A\\d{3}(?:GCM)?KW$/.test(alg);\n    if (symmetric) {\n        symmetricTypeCheck(alg, key, usage, allowJwk);\n    }\n    else {\n        asymmetricTypeCheck(alg, key, usage, allowJwk);\n    }\n}\nexport default checkKeyType.bind(undefined, false);\nexport const checkKeyTypeWithJwk = checkKeyType.bind(undefined, true);\n", "import { concat, uint64be } from '../lib/buffer_utils.js';\nimport checkIvLength from '../lib/check_iv_length.js';\nimport checkCekLength from './check_cek_length.js';\nimport crypto, { isCryptoKey } from './webcrypto.js';\nimport { checkEncCryptoKey } from '../lib/crypto_key.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport generateIv from '../lib/iv.js';\nimport { JOSENotSupported } from '../util/errors.js';\nimport { types } from './is_key_like.js';\nasync function cbcEncrypt(enc, plaintext, cek, iv, aad) {\n    if (!(cek instanceof Uint8Array)) {\n        throw new TypeError(invalidKeyInput(cek, 'Uint8Array'));\n    }\n    const keySize = parseInt(enc.slice(1, 4), 10);\n    const encKey = await crypto.subtle.importKey('raw', cek.subarray(keySize >> 3), 'AES-CBC', false, ['encrypt']);\n    const macKey = await crypto.subtle.importKey('raw', cek.subarray(0, keySize >> 3), {\n        hash: `SHA-${keySize << 1}`,\n        name: 'HMAC',\n    }, false, ['sign']);\n    const ciphertext = new Uint8Array(await crypto.subtle.encrypt({\n        iv,\n        name: 'AES-CBC',\n    }, encKey, plaintext));\n    const macData = concat(aad, iv, ciphertext, uint64be(aad.length << 3));\n    const tag = new Uint8Array((await crypto.subtle.sign('HMAC', macKey, macData)).slice(0, keySize >> 3));\n    return { ciphertext, tag, iv };\n}\nasync function gcmEncrypt(enc, plaintext, cek, iv, aad) {\n    let encKey;\n    if (cek instanceof Uint8Array) {\n        encKey = await crypto.subtle.importKey('raw', cek, 'AES-GCM', false, ['encrypt']);\n    }\n    else {\n        checkEncCryptoKey(cek, enc, 'encrypt');\n        encKey = cek;\n    }\n    const encrypted = new Uint8Array(await crypto.subtle.encrypt({\n        additionalData: aad,\n        iv,\n        name: 'AES-GCM',\n        tagLength: 128,\n    }, encKey, plaintext));\n    const tag = encrypted.slice(-16);\n    const ciphertext = encrypted.slice(0, -16);\n    return { ciphertext, tag, iv };\n}\nconst encrypt = async (enc, plaintext, cek, iv, aad) => {\n    if (!isCryptoKey(cek) && !(cek instanceof Uint8Array)) {\n        throw new TypeError(invalidKeyInput(cek, ...types, 'Uint8Array'));\n    }\n    if (iv) {\n        checkIvLength(enc, iv);\n    }\n    else {\n        iv = generateIv(enc);\n    }\n    switch (enc) {\n        case 'A128CBC-HS256':\n        case 'A192CBC-HS384':\n        case 'A256CBC-HS512':\n            if (cek instanceof Uint8Array) {\n                checkCekLength(cek, parseInt(enc.slice(-3), 10));\n            }\n            return cbcEncrypt(enc, plaintext, cek, iv, aad);\n        case 'A128GCM':\n        case 'A192GCM':\n        case 'A256GCM':\n            if (cek instanceof Uint8Array) {\n                checkCekLength(cek, parseInt(enc.slice(1, 4), 10));\n            }\n            return gcmEncrypt(enc, plaintext, cek, iv, aad);\n        default:\n            throw new JOSENotSupported('Unsupported JWE Content Encryption Algorithm');\n    }\n};\nexport default encrypt;\n", "import encrypt from '../runtime/encrypt.js';\nimport decrypt from '../runtime/decrypt.js';\nimport { encode as base64url } from '../runtime/base64url.js';\nexport async function wrap(alg, key, cek, iv) {\n    const jweAlgorithm = alg.slice(0, 7);\n    const wrapped = await encrypt(jweAlgorithm, cek, key, iv, new Uint8Array(0));\n    return {\n        encryptedKey: wrapped.ciphertext,\n        iv: base64url(wrapped.iv),\n        tag: base64url(wrapped.tag),\n    };\n}\nexport async function unwrap(alg, key, encryptedKey, iv, tag) {\n    const jweAlgorithm = alg.slice(0, 7);\n    return decrypt(jweAlgorithm, key, encryptedKey, iv, tag, new Uint8Array(0));\n}\n", "import { unwrap as aesKw } from '../runtime/aeskw.js';\nimport * as ECDH from '../runtime/ecdhes.js';\nimport { decrypt as pbes2Kw } from '../runtime/pbes2kw.js';\nimport { decrypt as rsaEs } from '../runtime/rsaes.js';\nimport { decode as base64url } from '../runtime/base64url.js';\nimport normalize from '../runtime/normalize_key.js';\nimport { JOSENotSupported, JWEInvalid } from '../util/errors.js';\nimport { bitLength as cekLength } from '../lib/cek.js';\nimport { importJWK } from '../key/import.js';\nimport checkKeyType from './check_key_type.js';\nimport isObject from './is_object.js';\nimport { unwrap as aesGcmKw } from './aesgcmkw.js';\nasync function decryptKeyManagement(alg, key, encryptedKey, joseHeader, options) {\n    checkKeyType(alg, key, 'decrypt');\n    key = (await normalize.normalizePrivateKey?.(key, alg)) || key;\n    switch (alg) {\n        case 'dir': {\n            if (encryptedKey !== undefined)\n                throw new JWEInvalid('Encountered unexpected JWE Encrypted Key');\n            return key;\n        }\n        case 'ECDH-ES':\n            if (encryptedKey !== undefined)\n                throw new JWEInvalid('Encountered unexpected JWE Encrypted Key');\n        case 'ECDH-ES+A128KW':\n        case 'ECDH-ES+A192KW':\n        case 'ECDH-ES+A256KW': {\n            if (!isObject(joseHeader.epk))\n                throw new JWEInvalid(`JOSE Header \"epk\" (Ephemeral Public Key) missing or invalid`);\n            if (!ECDH.ecdhAllowed(key))\n                throw new JOSENotSupported('ECDH with the provided key is not allowed or not supported by your javascript runtime');\n            const epk = await importJWK(joseHeader.epk, alg);\n            let partyUInfo;\n            let partyVInfo;\n            if (joseHeader.apu !== undefined) {\n                if (typeof joseHeader.apu !== 'string')\n                    throw new JWEInvalid(`JOSE Header \"apu\" (Agreement PartyUInfo) invalid`);\n                try {\n                    partyUInfo = base64url(joseHeader.apu);\n                }\n                catch {\n                    throw new JWEInvalid('Failed to base64url decode the apu');\n                }\n            }\n            if (joseHeader.apv !== undefined) {\n                if (typeof joseHeader.apv !== 'string')\n                    throw new JWEInvalid(`JOSE Header \"apv\" (Agreement PartyVInfo) invalid`);\n                try {\n                    partyVInfo = base64url(joseHeader.apv);\n                }\n                catch {\n                    throw new JWEInvalid('Failed to base64url decode the apv');\n                }\n            }\n            const sharedSecret = await ECDH.deriveKey(epk, key, alg === 'ECDH-ES' ? joseHeader.enc : alg, alg === 'ECDH-ES' ? cekLength(joseHeader.enc) : parseInt(alg.slice(-5, -2), 10), partyUInfo, partyVInfo);\n            if (alg === 'ECDH-ES')\n                return sharedSecret;\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            return aesKw(alg.slice(-6), sharedSecret, encryptedKey);\n        }\n        case 'RSA1_5':\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512': {\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            return rsaEs(alg, key, encryptedKey);\n        }\n        case 'PBES2-HS256+A128KW':\n        case 'PBES2-HS384+A192KW':\n        case 'PBES2-HS512+A256KW': {\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            if (typeof joseHeader.p2c !== 'number')\n                throw new JWEInvalid(`JOSE Header \"p2c\" (PBES2 Count) missing or invalid`);\n            const p2cLimit = options?.maxPBES2Count || 10000;\n            if (joseHeader.p2c > p2cLimit)\n                throw new JWEInvalid(`JOSE Header \"p2c\" (PBES2 Count) out is of acceptable bounds`);\n            if (typeof joseHeader.p2s !== 'string')\n                throw new JWEInvalid(`JOSE Header \"p2s\" (PBES2 Salt) missing or invalid`);\n            let p2s;\n            try {\n                p2s = base64url(joseHeader.p2s);\n            }\n            catch {\n                throw new JWEInvalid('Failed to base64url decode the p2s');\n            }\n            return pbes2Kw(alg, key, encryptedKey, joseHeader.p2c, p2s);\n        }\n        case 'A128KW':\n        case 'A192KW':\n        case 'A256KW': {\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            return aesKw(alg, key, encryptedKey);\n        }\n        case 'A128GCMKW':\n        case 'A192GCMKW':\n        case 'A256GCMKW': {\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            if (typeof joseHeader.iv !== 'string')\n                throw new JWEInvalid(`JOSE Header \"iv\" (Initialization Vector) missing or invalid`);\n            if (typeof joseHeader.tag !== 'string')\n                throw new JWEInvalid(`JOSE Header \"tag\" (Authentication Tag) missing or invalid`);\n            let iv;\n            try {\n                iv = base64url(joseHeader.iv);\n            }\n            catch {\n                throw new JWEInvalid('Failed to base64url decode the iv');\n            }\n            let tag;\n            try {\n                tag = base64url(joseHeader.tag);\n            }\n            catch {\n                throw new JWEInvalid('Failed to base64url decode the tag');\n            }\n            return aesGcmKw(alg, key, encryptedKey, iv, tag);\n        }\n        default: {\n            throw new JOSENotSupported('Invalid or unsupported \"alg\" (JWE Algorithm) header value');\n        }\n    }\n}\nexport default decryptKeyManagement;\n", "import { JOSENotSupported } from '../util/errors.js';\nfunction validateCrit(Err, recognizedDefault, recognizedOption, protectedHeader, joseHeader) {\n    if (joseHeader.crit !== undefined && protectedHeader?.crit === undefined) {\n        throw new Err('\"crit\" (Critical) Header Parameter MUST be integrity protected');\n    }\n    if (!protectedHeader || protectedHeader.crit === undefined) {\n        return new Set();\n    }\n    if (!Array.isArray(protectedHeader.crit) ||\n        protectedHeader.crit.length === 0 ||\n        protectedHeader.crit.some((input) => typeof input !== 'string' || input.length === 0)) {\n        throw new Err('\"crit\" (Critical) Header Parameter MUST be an array of non-empty strings when present');\n    }\n    let recognized;\n    if (recognizedOption !== undefined) {\n        recognized = new Map([...Object.entries(recognizedOption), ...recognizedDefault.entries()]);\n    }\n    else {\n        recognized = recognizedDefault;\n    }\n    for (const parameter of protectedHeader.crit) {\n        if (!recognized.has(parameter)) {\n            throw new JOSENotSupported(`Extension Header Parameter \"${parameter}\" is not recognized`);\n        }\n        if (joseHeader[parameter] === undefined) {\n            throw new Err(`Extension Header Parameter \"${parameter}\" is missing`);\n        }\n        if (recognized.get(parameter) && protectedHeader[parameter] === undefined) {\n            throw new Err(`Extension Header Parameter \"${parameter}\" MUST be integrity protected`);\n        }\n    }\n    return new Set(protectedHeader.crit);\n}\nexport default validateCrit;\n", "const validateAlgorithms = (option, algorithms) => {\n    if (algorithms !== undefined &&\n        (!Array.isArray(algorithms) || algorithms.some((s) => typeof s !== 'string'))) {\n        throw new TypeError(`\"${option}\" option must be an array of strings`);\n    }\n    if (!algorithms) {\n        return undefined;\n    }\n    return new Set(algorithms);\n};\nexport default validateAlgorithms;\n", "import { decode as base64url } from '../../runtime/base64url.js';\nimport decrypt from '../../runtime/decrypt.js';\nimport { JOSEAlgNotAllowed, JOSENotSupported, JWEInvalid } from '../../util/errors.js';\nimport isDisjoint from '../../lib/is_disjoint.js';\nimport isObject from '../../lib/is_object.js';\nimport decryptKeyManagement from '../../lib/decrypt_key_management.js';\nimport { encoder, decoder, concat } from '../../lib/buffer_utils.js';\nimport generateCek from '../../lib/cek.js';\nimport validateCrit from '../../lib/validate_crit.js';\nimport validateAlgorithms from '../../lib/validate_algorithms.js';\nexport async function flattenedDecrypt(jwe, key, options) {\n    if (!isObject(jwe)) {\n        throw new JWEInvalid('Flattened JWE must be an object');\n    }\n    if (jwe.protected === undefined && jwe.header === undefined && jwe.unprotected === undefined) {\n        throw new JWEInvalid('JOSE Header missing');\n    }\n    if (jwe.iv !== undefined && typeof jwe.iv !== 'string') {\n        throw new JWEInvalid('JWE Initialization Vector incorrect type');\n    }\n    if (typeof jwe.ciphertext !== 'string') {\n        throw new JWEInvalid('JWE Ciphertext missing or incorrect type');\n    }\n    if (jwe.tag !== undefined && typeof jwe.tag !== 'string') {\n        throw new JWEInvalid('JWE Authentication Tag incorrect type');\n    }\n    if (jwe.protected !== undefined && typeof jwe.protected !== 'string') {\n        throw new JWEInvalid('JWE Protected Header incorrect type');\n    }\n    if (jwe.encrypted_key !== undefined && typeof jwe.encrypted_key !== 'string') {\n        throw new JWEInvalid('JWE Encrypted Key incorrect type');\n    }\n    if (jwe.aad !== undefined && typeof jwe.aad !== 'string') {\n        throw new JWEInvalid('JWE AAD incorrect type');\n    }\n    if (jwe.header !== undefined && !isObject(jwe.header)) {\n        throw new JWEInvalid('JWE Shared Unprotected Header incorrect type');\n    }\n    if (jwe.unprotected !== undefined && !isObject(jwe.unprotected)) {\n        throw new JWEInvalid('JWE Per-Recipient Unprotected Header incorrect type');\n    }\n    let parsedProt;\n    if (jwe.protected) {\n        try {\n            const protectedHeader = base64url(jwe.protected);\n            parsedProt = JSON.parse(decoder.decode(protectedHeader));\n        }\n        catch {\n            throw new JWEInvalid('JWE Protected Header is invalid');\n        }\n    }\n    if (!isDisjoint(parsedProt, jwe.header, jwe.unprotected)) {\n        throw new JWEInvalid('JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint');\n    }\n    const joseHeader = {\n        ...parsedProt,\n        ...jwe.header,\n        ...jwe.unprotected,\n    };\n    validateCrit(JWEInvalid, new Map(), options?.crit, parsedProt, joseHeader);\n    if (joseHeader.zip !== undefined) {\n        throw new JOSENotSupported('JWE \"zip\" (Compression Algorithm) Header Parameter is not supported.');\n    }\n    const { alg, enc } = joseHeader;\n    if (typeof alg !== 'string' || !alg) {\n        throw new JWEInvalid('missing JWE Algorithm (alg) in JWE Header');\n    }\n    if (typeof enc !== 'string' || !enc) {\n        throw new JWEInvalid('missing JWE Encryption Algorithm (enc) in JWE Header');\n    }\n    const keyManagementAlgorithms = options && validateAlgorithms('keyManagementAlgorithms', options.keyManagementAlgorithms);\n    const contentEncryptionAlgorithms = options &&\n        validateAlgorithms('contentEncryptionAlgorithms', options.contentEncryptionAlgorithms);\n    if ((keyManagementAlgorithms && !keyManagementAlgorithms.has(alg)) ||\n        (!keyManagementAlgorithms && alg.startsWith('PBES2'))) {\n        throw new JOSEAlgNotAllowed('\"alg\" (Algorithm) Header Parameter value not allowed');\n    }\n    if (contentEncryptionAlgorithms && !contentEncryptionAlgorithms.has(enc)) {\n        throw new JOSEAlgNotAllowed('\"enc\" (Encryption Algorithm) Header Parameter value not allowed');\n    }\n    let encryptedKey;\n    if (jwe.encrypted_key !== undefined) {\n        try {\n            encryptedKey = base64url(jwe.encrypted_key);\n        }\n        catch {\n            throw new JWEInvalid('Failed to base64url decode the encrypted_key');\n        }\n    }\n    let resolvedKey = false;\n    if (typeof key === 'function') {\n        key = await key(parsedProt, jwe);\n        resolvedKey = true;\n    }\n    let cek;\n    try {\n        cek = await decryptKeyManagement(alg, key, encryptedKey, joseHeader, options);\n    }\n    catch (err) {\n        if (err instanceof TypeError || err instanceof JWEInvalid || err instanceof JOSENotSupported) {\n            throw err;\n        }\n        cek = generateCek(enc);\n    }\n    let iv;\n    let tag;\n    if (jwe.iv !== undefined) {\n        try {\n            iv = base64url(jwe.iv);\n        }\n        catch {\n            throw new JWEInvalid('Failed to base64url decode the iv');\n        }\n    }\n    if (jwe.tag !== undefined) {\n        try {\n            tag = base64url(jwe.tag);\n        }\n        catch {\n            throw new JWEInvalid('Failed to base64url decode the tag');\n        }\n    }\n    const protectedHeader = encoder.encode(jwe.protected ?? '');\n    let additionalData;\n    if (jwe.aad !== undefined) {\n        additionalData = concat(protectedHeader, encoder.encode('.'), encoder.encode(jwe.aad));\n    }\n    else {\n        additionalData = protectedHeader;\n    }\n    let ciphertext;\n    try {\n        ciphertext = base64url(jwe.ciphertext);\n    }\n    catch {\n        throw new JWEInvalid('Failed to base64url decode the ciphertext');\n    }\n    const plaintext = await decrypt(enc, cek, ciphertext, iv, tag, additionalData);\n    const result = { plaintext };\n    if (jwe.protected !== undefined) {\n        result.protectedHeader = parsedProt;\n    }\n    if (jwe.aad !== undefined) {\n        try {\n            result.additionalAuthenticatedData = base64url(jwe.aad);\n        }\n        catch {\n            throw new JWEInvalid('Failed to base64url decode the aad');\n        }\n    }\n    if (jwe.unprotected !== undefined) {\n        result.sharedUnprotectedHeader = jwe.unprotected;\n    }\n    if (jwe.header !== undefined) {\n        result.unprotectedHeader = jwe.header;\n    }\n    if (resolvedKey) {\n        return { ...result, key };\n    }\n    return result;\n}\n", "import { flattenedDecrypt } from '../flattened/decrypt.js';\nimport { JWEInvalid } from '../../util/errors.js';\nimport { decoder } from '../../lib/buffer_utils.js';\nexport async function compactDecrypt(jwe, key, options) {\n    if (jwe instanceof Uint8Array) {\n        jwe = decoder.decode(jwe);\n    }\n    if (typeof jwe !== 'string') {\n        throw new JWEInvalid('Compact JWE must be a string or Uint8Array');\n    }\n    const { 0: protectedHeader, 1: encryptedKey, 2: iv, 3: ciphertext, 4: tag, length, } = jwe.split('.');\n    if (length !== 5) {\n        throw new JWEInvalid('Invalid Compact JWE');\n    }\n    const decrypted = await flattenedDecrypt({\n        ciphertext,\n        iv: iv || undefined,\n        protected: protectedHeader,\n        tag: tag || undefined,\n        encrypted_key: encryptedKey || undefined,\n    }, key, options);\n    const result = { plaintext: decrypted.plaintext, protectedHeader: decrypted.protectedHeader };\n    if (typeof key === 'function') {\n        return { ...result, key: decrypted.key };\n    }\n    return result;\n}\n", "export const unprotected = Symbol();\n", "import crypto, { isCryptoKey } from './webcrypto.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { encode as base64url } from './base64url.js';\nimport { types } from './is_key_like.js';\nconst keyToJWK = async (key) => {\n    if (key instanceof Uint8Array) {\n        return {\n            kty: 'oct',\n            k: base64url(key),\n        };\n    }\n    if (!isCryptoKey(key)) {\n        throw new TypeError(invalidKeyInput(key, ...types, 'Uint8Array'));\n    }\n    if (!key.extractable) {\n        throw new TypeError('non-extractable CryptoKey cannot be exported as a JWK');\n    }\n    const { ext, key_ops, alg, use, ...jwk } = await crypto.subtle.exportKey('jwk', key);\n    return jwk;\n};\nexport default keyToJWK;\n", "import { toSPKI as exportPublic } from '../runtime/asn1.js';\nimport { toPKCS8 as exportPrivate } from '../runtime/asn1.js';\nimport keyToJWK from '../runtime/key_to_jwk.js';\nexport async function exportSPKI(key) {\n    return exportPublic(key);\n}\nexport async function exportPKCS8(key) {\n    return exportPrivate(key);\n}\nexport async function exportJWK(key) {\n    return keyToJWK(key);\n}\n", "import { wrap as aesKw } from '../runtime/aeskw.js';\nimport * as ECDH from '../runtime/ecdhes.js';\nimport { encrypt as pbes2Kw } from '../runtime/pbes2kw.js';\nimport { encrypt as rsaEs } from '../runtime/rsaes.js';\nimport { encode as base64url } from '../runtime/base64url.js';\nimport normalize from '../runtime/normalize_key.js';\nimport generateCek, { bitLength as cekLength } from '../lib/cek.js';\nimport { JOSENotSupported } from '../util/errors.js';\nimport { exportJWK } from '../key/export.js';\nimport checkKeyType from './check_key_type.js';\nimport { wrap as aesGcmKw } from './aesgcmkw.js';\nasync function encryptKeyManagement(alg, enc, key, providedCek, providedParameters = {}) {\n    let encryptedKey;\n    let parameters;\n    let cek;\n    checkKeyType(alg, key, 'encrypt');\n    key = (await normalize.normalizePublicKey?.(key, alg)) || key;\n    switch (alg) {\n        case 'dir': {\n            cek = key;\n            break;\n        }\n        case 'ECDH-ES':\n        case 'ECDH-ES+A128KW':\n        case 'ECDH-ES+A192KW':\n        case 'ECDH-ES+A256KW': {\n            if (!ECDH.ecdhAllowed(key)) {\n                throw new JOSENotSupported('ECDH with the provided key is not allowed or not supported by your javascript runtime');\n            }\n            const { apu, apv } = providedParameters;\n            let { epk: ephemeralKey } = providedParameters;\n            ephemeralKey || (ephemeralKey = (await ECDH.generateEpk(key)).privateKey);\n            const { x, y, crv, kty } = await exportJWK(ephemeralKey);\n            const sharedSecret = await ECDH.deriveKey(key, ephemeralKey, alg === 'ECDH-ES' ? enc : alg, alg === 'ECDH-ES' ? cekLength(enc) : parseInt(alg.slice(-5, -2), 10), apu, apv);\n            parameters = { epk: { x, crv, kty } };\n            if (kty === 'EC')\n                parameters.epk.y = y;\n            if (apu)\n                parameters.apu = base64url(apu);\n            if (apv)\n                parameters.apv = base64url(apv);\n            if (alg === 'ECDH-ES') {\n                cek = sharedSecret;\n                break;\n            }\n            cek = providedCek || generateCek(enc);\n            const kwAlg = alg.slice(-6);\n            encryptedKey = await aesKw(kwAlg, sharedSecret, cek);\n            break;\n        }\n        case 'RSA1_5':\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512': {\n            cek = providedCek || generateCek(enc);\n            encryptedKey = await rsaEs(alg, key, cek);\n            break;\n        }\n        case 'PBES2-HS256+A128KW':\n        case 'PBES2-HS384+A192KW':\n        case 'PBES2-HS512+A256KW': {\n            cek = providedCek || generateCek(enc);\n            const { p2c, p2s } = providedParameters;\n            ({ encryptedKey, ...parameters } = await pbes2Kw(alg, key, cek, p2c, p2s));\n            break;\n        }\n        case 'A128KW':\n        case 'A192KW':\n        case 'A256KW': {\n            cek = providedCek || generateCek(enc);\n            encryptedKey = await aesKw(alg, key, cek);\n            break;\n        }\n        case 'A128GCMKW':\n        case 'A192GCMKW':\n        case 'A256GCMKW': {\n            cek = providedCek || generateCek(enc);\n            const { iv } = providedParameters;\n            ({ encryptedKey, ...parameters } = await aesGcmKw(alg, key, cek, iv));\n            break;\n        }\n        default: {\n            throw new JOSENotSupported('Invalid or unsupported \"alg\" (JWE Algorithm) header value');\n        }\n    }\n    return { cek, encryptedKey, parameters };\n}\nexport default encryptKeyManagement;\n", "import { encode as base64url } from '../../runtime/base64url.js';\nimport { unprotected } from '../../lib/private_symbols.js';\nimport encrypt from '../../runtime/encrypt.js';\nimport encryptKeyManagement from '../../lib/encrypt_key_management.js';\nimport { JOSENotSupported, JWEInvalid } from '../../util/errors.js';\nimport isDisjoint from '../../lib/is_disjoint.js';\nimport { encoder, decoder, concat } from '../../lib/buffer_utils.js';\nimport validateCrit from '../../lib/validate_crit.js';\nexport class FlattenedEncrypt {\n    constructor(plaintext) {\n        if (!(plaintext instanceof Uint8Array)) {\n            throw new TypeError('plaintext must be an instance of Uint8Array');\n        }\n        this._plaintext = plaintext;\n    }\n    setKeyManagementParameters(parameters) {\n        if (this._keyManagementParameters) {\n            throw new TypeError('setKeyManagementParameters can only be called once');\n        }\n        this._keyManagementParameters = parameters;\n        return this;\n    }\n    setProtectedHeader(protectedHeader) {\n        if (this._protectedHeader) {\n            throw new TypeError('setProtectedHeader can only be called once');\n        }\n        this._protectedHeader = protectedHeader;\n        return this;\n    }\n    setSharedUnprotectedHeader(sharedUnprotectedHeader) {\n        if (this._sharedUnprotectedHeader) {\n            throw new TypeError('setSharedUnprotectedHeader can only be called once');\n        }\n        this._sharedUnprotectedHeader = sharedUnprotectedHeader;\n        return this;\n    }\n    setUnprotectedHeader(unprotectedHeader) {\n        if (this._unprotectedHeader) {\n            throw new TypeError('setUnprotectedHeader can only be called once');\n        }\n        this._unprotectedHeader = unprotectedHeader;\n        return this;\n    }\n    setAdditionalAuthenticatedData(aad) {\n        this._aad = aad;\n        return this;\n    }\n    setContentEncryptionKey(cek) {\n        if (this._cek) {\n            throw new TypeError('setContentEncryptionKey can only be called once');\n        }\n        this._cek = cek;\n        return this;\n    }\n    setInitializationVector(iv) {\n        if (this._iv) {\n            throw new TypeError('setInitializationVector can only be called once');\n        }\n        this._iv = iv;\n        return this;\n    }\n    async encrypt(key, options) {\n        if (!this._protectedHeader && !this._unprotectedHeader && !this._sharedUnprotectedHeader) {\n            throw new JWEInvalid('either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()');\n        }\n        if (!isDisjoint(this._protectedHeader, this._unprotectedHeader, this._sharedUnprotectedHeader)) {\n            throw new JWEInvalid('JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint');\n        }\n        const joseHeader = {\n            ...this._protectedHeader,\n            ...this._unprotectedHeader,\n            ...this._sharedUnprotectedHeader,\n        };\n        validateCrit(JWEInvalid, new Map(), options?.crit, this._protectedHeader, joseHeader);\n        if (joseHeader.zip !== undefined) {\n            throw new JOSENotSupported('JWE \"zip\" (Compression Algorithm) Header Parameter is not supported.');\n        }\n        const { alg, enc } = joseHeader;\n        if (typeof alg !== 'string' || !alg) {\n            throw new JWEInvalid('JWE \"alg\" (Algorithm) Header Parameter missing or invalid');\n        }\n        if (typeof enc !== 'string' || !enc) {\n            throw new JWEInvalid('JWE \"enc\" (Encryption Algorithm) Header Parameter missing or invalid');\n        }\n        let encryptedKey;\n        if (this._cek && (alg === 'dir' || alg === 'ECDH-ES')) {\n            throw new TypeError(`setContentEncryptionKey cannot be called with JWE \"alg\" (Algorithm) Header ${alg}`);\n        }\n        let cek;\n        {\n            let parameters;\n            ({ cek, encryptedKey, parameters } = await encryptKeyManagement(alg, enc, key, this._cek, this._keyManagementParameters));\n            if (parameters) {\n                if (options && unprotected in options) {\n                    if (!this._unprotectedHeader) {\n                        this.setUnprotectedHeader(parameters);\n                    }\n                    else {\n                        this._unprotectedHeader = { ...this._unprotectedHeader, ...parameters };\n                    }\n                }\n                else if (!this._protectedHeader) {\n                    this.setProtectedHeader(parameters);\n                }\n                else {\n                    this._protectedHeader = { ...this._protectedHeader, ...parameters };\n                }\n            }\n        }\n        let additionalData;\n        let protectedHeader;\n        let aadMember;\n        if (this._protectedHeader) {\n            protectedHeader = encoder.encode(base64url(JSON.stringify(this._protectedHeader)));\n        }\n        else {\n            protectedHeader = encoder.encode('');\n        }\n        if (this._aad) {\n            aadMember = base64url(this._aad);\n            additionalData = concat(protectedHeader, encoder.encode('.'), encoder.encode(aadMember));\n        }\n        else {\n            additionalData = protectedHeader;\n        }\n        const { ciphertext, tag, iv } = await encrypt(enc, this._plaintext, cek, this._iv, additionalData);\n        const jwe = {\n            ciphertext: base64url(ciphertext),\n        };\n        if (iv) {\n            jwe.iv = base64url(iv);\n        }\n        if (tag) {\n            jwe.tag = base64url(tag);\n        }\n        if (encryptedKey) {\n            jwe.encrypted_key = base64url(encryptedKey);\n        }\n        if (aadMember) {\n            jwe.aad = aadMember;\n        }\n        if (this._protectedHeader) {\n            jwe.protected = decoder.decode(protectedHeader);\n        }\n        if (this._sharedUnprotectedHeader) {\n            jwe.unprotected = this._sharedUnprotectedHeader;\n        }\n        if (this._unprotectedHeader) {\n            jwe.header = this._unprotectedHeader;\n        }\n        return jwe;\n    }\n}\n", "export default (date) => Math.floor(date.getTime() / 1000);\n", "const minute = 60;\nconst hour = minute * 60;\nconst day = hour * 24;\nconst week = day * 7;\nconst year = day * 365.25;\nconst REGEX = /^(\\+|\\-)? ?(\\d+|\\d+\\.\\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;\nexport default (str) => {\n    const matched = REGEX.exec(str);\n    if (!matched || (matched[4] && matched[1])) {\n        throw new TypeError('Invalid time period format');\n    }\n    const value = parseFloat(matched[2]);\n    const unit = matched[3].toLowerCase();\n    let numericDate;\n    switch (unit) {\n        case 'sec':\n        case 'secs':\n        case 'second':\n        case 'seconds':\n        case 's':\n            numericDate = Math.round(value);\n            break;\n        case 'minute':\n        case 'minutes':\n        case 'min':\n        case 'mins':\n        case 'm':\n            numericDate = Math.round(value * minute);\n            break;\n        case 'hour':\n        case 'hours':\n        case 'hr':\n        case 'hrs':\n        case 'h':\n            numericDate = Math.round(value * hour);\n            break;\n        case 'day':\n        case 'days':\n        case 'd':\n            numericDate = Math.round(value * day);\n            break;\n        case 'week':\n        case 'weeks':\n        case 'w':\n            numericDate = Math.round(value * week);\n            break;\n        default:\n            numericDate = Math.round(value * year);\n            break;\n    }\n    if (matched[1] === '-' || matched[4] === 'ago') {\n        return -numericDate;\n    }\n    return numericDate;\n};\n", "import { JWTClaimValidationFailed, JWTExpired, JWTInvalid } from '../util/errors.js';\nimport { decoder } from './buffer_utils.js';\nimport epoch from './epoch.js';\nimport secs from './secs.js';\nimport isObject from './is_object.js';\nconst normalizeTyp = (value) => value.toLowerCase().replace(/^application\\//, '');\nconst checkAudiencePresence = (audPayload, audOption) => {\n    if (typeof audPayload === 'string') {\n        return audOption.includes(audPayload);\n    }\n    if (Array.isArray(audPayload)) {\n        return audOption.some(Set.prototype.has.bind(new Set(audPayload)));\n    }\n    return false;\n};\nexport default (protectedHeader, encodedPayload, options = {}) => {\n    let payload;\n    try {\n        payload = JSON.parse(decoder.decode(encodedPayload));\n    }\n    catch {\n    }\n    if (!isObject(payload)) {\n        throw new JWTInvalid('JWT Claims Set must be a top-level JSON object');\n    }\n    const { typ } = options;\n    if (typ &&\n        (typeof protectedHeader.typ !== 'string' ||\n            normalizeTyp(protectedHeader.typ) !== normalizeTyp(typ))) {\n        throw new JWTClaimValidationFailed('unexpected \"typ\" JWT header value', payload, 'typ', 'check_failed');\n    }\n    const { requiredClaims = [], issuer, subject, audience, maxTokenAge } = options;\n    const presenceCheck = [...requiredClaims];\n    if (maxTokenAge !== undefined)\n        presenceCheck.push('iat');\n    if (audience !== undefined)\n        presenceCheck.push('aud');\n    if (subject !== undefined)\n        presenceCheck.push('sub');\n    if (issuer !== undefined)\n        presenceCheck.push('iss');\n    for (const claim of new Set(presenceCheck.reverse())) {\n        if (!(claim in payload)) {\n            throw new JWTClaimValidationFailed(`missing required \"${claim}\" claim`, payload, claim, 'missing');\n        }\n    }\n    if (issuer &&\n        !(Array.isArray(issuer) ? issuer : [issuer]).includes(payload.iss)) {\n        throw new JWTClaimValidationFailed('unexpected \"iss\" claim value', payload, 'iss', 'check_failed');\n    }\n    if (subject && payload.sub !== subject) {\n        throw new JWTClaimValidationFailed('unexpected \"sub\" claim value', payload, 'sub', 'check_failed');\n    }\n    if (audience &&\n        !checkAudiencePresence(payload.aud, typeof audience === 'string' ? [audience] : audience)) {\n        throw new JWTClaimValidationFailed('unexpected \"aud\" claim value', payload, 'aud', 'check_failed');\n    }\n    let tolerance;\n    switch (typeof options.clockTolerance) {\n        case 'string':\n            tolerance = secs(options.clockTolerance);\n            break;\n        case 'number':\n            tolerance = options.clockTolerance;\n            break;\n        case 'undefined':\n            tolerance = 0;\n            break;\n        default:\n            throw new TypeError('Invalid clockTolerance option type');\n    }\n    const { currentDate } = options;\n    const now = epoch(currentDate || new Date());\n    if ((payload.iat !== undefined || maxTokenAge) && typeof payload.iat !== 'number') {\n        throw new JWTClaimValidationFailed('\"iat\" claim must be a number', payload, 'iat', 'invalid');\n    }\n    if (payload.nbf !== undefined) {\n        if (typeof payload.nbf !== 'number') {\n            throw new JWTClaimValidationFailed('\"nbf\" claim must be a number', payload, 'nbf', 'invalid');\n        }\n        if (payload.nbf > now + tolerance) {\n            throw new JWTClaimValidationFailed('\"nbf\" claim timestamp check failed', payload, 'nbf', 'check_failed');\n        }\n    }\n    if (payload.exp !== undefined) {\n        if (typeof payload.exp !== 'number') {\n            throw new JWTClaimValidationFailed('\"exp\" claim must be a number', payload, 'exp', 'invalid');\n        }\n        if (payload.exp <= now - tolerance) {\n            throw new JWTExpired('\"exp\" claim timestamp check failed', payload, 'exp', 'check_failed');\n        }\n    }\n    if (maxTokenAge) {\n        const age = now - payload.iat;\n        const max = typeof maxTokenAge === 'number' ? maxTokenAge : secs(maxTokenAge);\n        if (age - tolerance > max) {\n            throw new JWTExpired('\"iat\" claim timestamp check failed (too far in the past)', payload, 'iat', 'check_failed');\n        }\n        if (age < 0 - tolerance) {\n            throw new JWTClaimValidationFailed('\"iat\" claim timestamp check failed (it should be in the past)', payload, 'iat', 'check_failed');\n        }\n    }\n    return payload;\n};\n", "import { compactDecrypt } from '../jwe/compact/decrypt.js';\nimport jwtPayload from '../lib/jwt_claims_set.js';\nimport { JWTClaimValidationFailed } from '../util/errors.js';\nexport async function jwtDecrypt(jwt, key, options) {\n    const decrypted = await compactDecrypt(jwt, key, options);\n    const payload = jwtPayload(decrypted.protectedHeader, decrypted.plaintext, options);\n    const { protectedHeader } = decrypted;\n    if (protectedHeader.iss !== undefined && protectedHeader.iss !== payload.iss) {\n        throw new JWTClaimValidationFailed('replicated \"iss\" claim header parameter mismatch', payload, 'iss', 'mismatch');\n    }\n    if (protectedHeader.sub !== undefined && protectedHeader.sub !== payload.sub) {\n        throw new JWTClaimValidationFailed('replicated \"sub\" claim header parameter mismatch', payload, 'sub', 'mismatch');\n    }\n    if (protectedHeader.aud !== undefined &&\n        JSON.stringify(protectedHeader.aud) !== JSON.stringify(payload.aud)) {\n        throw new JWTClaimValidationFailed('replicated \"aud\" claim header parameter mismatch', payload, 'aud', 'mismatch');\n    }\n    const result = { payload, protectedHeader };\n    if (typeof key === 'function') {\n        return { ...result, key: decrypted.key };\n    }\n    return result;\n}\n", "import { FlattenedEncrypt } from '../flattened/encrypt.js';\nexport class CompactEncrypt {\n    constructor(plaintext) {\n        this._flattened = new FlattenedEncrypt(plaintext);\n    }\n    setContentEncryptionKey(cek) {\n        this._flattened.setContentEncryptionKey(cek);\n        return this;\n    }\n    setInitializationVector(iv) {\n        this._flattened.setInitializationVector(iv);\n        return this;\n    }\n    setProtectedHeader(protectedHeader) {\n        this._flattened.setProtectedHeader(protectedHeader);\n        return this;\n    }\n    setKeyManagementParameters(parameters) {\n        this._flattened.setKeyManagementParameters(parameters);\n        return this;\n    }\n    async encrypt(key, options) {\n        const jwe = await this._flattened.encrypt(key, options);\n        return [jwe.protected, jwe.encrypted_key, jwe.iv, jwe.ciphertext, jwe.tag].join('.');\n    }\n}\n", "import epoch from '../lib/epoch.js';\nimport isObject from '../lib/is_object.js';\nimport secs from '../lib/secs.js';\nfunction validateInput(label, input) {\n    if (!Number.isFinite(input)) {\n        throw new TypeError(`Invalid ${label} input`);\n    }\n    return input;\n}\nexport class ProduceJWT {\n    constructor(payload = {}) {\n        if (!isObject(payload)) {\n            throw new TypeError('JWT Claims Set MUST be an object');\n        }\n        this._payload = payload;\n    }\n    setIssuer(issuer) {\n        this._payload = { ...this._payload, iss: issuer };\n        return this;\n    }\n    setSubject(subject) {\n        this._payload = { ...this._payload, sub: subject };\n        return this;\n    }\n    setAudience(audience) {\n        this._payload = { ...this._payload, aud: audience };\n        return this;\n    }\n    setJti(jwtId) {\n        this._payload = { ...this._payload, jti: jwtId };\n        return this;\n    }\n    setNotBefore(input) {\n        if (typeof input === 'number') {\n            this._payload = { ...this._payload, nbf: validateInput('setNotBefore', input) };\n        }\n        else if (input instanceof Date) {\n            this._payload = { ...this._payload, nbf: validateInput('setNotBefore', epoch(input)) };\n        }\n        else {\n            this._payload = { ...this._payload, nbf: epoch(new Date()) + secs(input) };\n        }\n        return this;\n    }\n    setExpirationTime(input) {\n        if (typeof input === 'number') {\n            this._payload = { ...this._payload, exp: validateInput('setExpirationTime', input) };\n        }\n        else if (input instanceof Date) {\n            this._payload = { ...this._payload, exp: validateInput('setExpirationTime', epoch(input)) };\n        }\n        else {\n            this._payload = { ...this._payload, exp: epoch(new Date()) + secs(input) };\n        }\n        return this;\n    }\n    setIssuedAt(input) {\n        if (typeof input === 'undefined') {\n            this._payload = { ...this._payload, iat: epoch(new Date()) };\n        }\n        else if (input instanceof Date) {\n            this._payload = { ...this._payload, iat: validateInput('setIssuedAt', epoch(input)) };\n        }\n        else if (typeof input === 'string') {\n            this._payload = {\n                ...this._payload,\n                iat: validateInput('setIssuedAt', epoch(new Date()) + secs(input)),\n            };\n        }\n        else {\n            this._payload = { ...this._payload, iat: validateInput('setIssuedAt', input) };\n        }\n        return this;\n    }\n}\n", "import { CompactEncrypt } from '../jwe/compact/encrypt.js';\nimport { encoder } from '../lib/buffer_utils.js';\nimport { ProduceJWT } from './produce.js';\nexport class EncryptJWT extends ProduceJWT {\n    setProtectedHeader(protectedHeader) {\n        if (this._protectedHeader) {\n            throw new TypeError('setProtectedHeader can only be called once');\n        }\n        this._protectedHeader = protectedHeader;\n        return this;\n    }\n    setKeyManagementParameters(parameters) {\n        if (this._keyManagementParameters) {\n            throw new TypeError('setKeyManagementParameters can only be called once');\n        }\n        this._keyManagementParameters = parameters;\n        return this;\n    }\n    setContentEncryptionKey(cek) {\n        if (this._cek) {\n            throw new TypeError('setContentEncryptionKey can only be called once');\n        }\n        this._cek = cek;\n        return this;\n    }\n    setInitializationVector(iv) {\n        if (this._iv) {\n            throw new TypeError('setInitializationVector can only be called once');\n        }\n        this._iv = iv;\n        return this;\n    }\n    replicateIssuerAsHeader() {\n        this._replicateIssuerAsHeader = true;\n        return this;\n    }\n    replicateSubjectAsHeader() {\n        this._replicateSubjectAsHeader = true;\n        return this;\n    }\n    replicateAudienceAsHeader() {\n        this._replicateAudienceAsHeader = true;\n        return this;\n    }\n    async encrypt(key, options) {\n        const enc = new CompactEncrypt(encoder.encode(JSON.stringify(this._payload)));\n        if (this._replicateIssuerAsHeader) {\n            this._protectedHeader = { ...this._protectedHeader, iss: this._payload.iss };\n        }\n        if (this._replicateSubjectAsHeader) {\n            this._protectedHeader = { ...this._protectedHeader, sub: this._payload.sub };\n        }\n        if (this._replicateAudienceAsHeader) {\n            this._protectedHeader = { ...this._protectedHeader, aud: this._payload.aud };\n        }\n        enc.setProtectedHeader(this._protectedHeader);\n        if (this._iv) {\n            enc.setInitializationVector(this._iv);\n        }\n        if (this._cek) {\n            enc.setContentEncryptionKey(this._cek);\n        }\n        if (this._keyManagementParameters) {\n            enc.setKeyManagementParameters(this._keyManagementParameters);\n        }\n        return enc.encrypt(key, options);\n    }\n}\n", "import digest from '../runtime/digest.js';\nimport { encode as base64url } from '../runtime/base64url.js';\nimport { JOSENotSupported, JWKInvalid } from '../util/errors.js';\nimport { encoder } from '../lib/buffer_utils.js';\nimport isObject from '../lib/is_object.js';\nconst check = (value, description) => {\n    if (typeof value !== 'string' || !value) {\n        throw new JWKInvalid(`${description} missing or invalid`);\n    }\n};\nexport async function calculateJwkThumbprint(jwk, digestAlgorithm) {\n    if (!isObject(jwk)) {\n        throw new TypeError('JWK must be an object');\n    }\n    digestAlgorithm ?? (digestAlgorithm = 'sha256');\n    if (digestAlgorithm !== 'sha256' &&\n        digestAlgorithm !== 'sha384' &&\n        digestAlgorithm !== 'sha512') {\n        throw new TypeError('digestAlgorithm must one of \"sha256\", \"sha384\", or \"sha512\"');\n    }\n    let components;\n    switch (jwk.kty) {\n        case 'EC':\n            check(jwk.crv, '\"crv\" (Curve) Parameter');\n            check(jwk.x, '\"x\" (X Coordinate) Parameter');\n            check(jwk.y, '\"y\" (Y Coordinate) Parameter');\n            components = { crv: jwk.crv, kty: jwk.kty, x: jwk.x, y: jwk.y };\n            break;\n        case 'OKP':\n            check(jwk.crv, '\"crv\" (Subtype of Key Pair) Parameter');\n            check(jwk.x, '\"x\" (Public Key) Parameter');\n            components = { crv: jwk.crv, kty: jwk.kty, x: jwk.x };\n            break;\n        case 'RSA':\n            check(jwk.e, '\"e\" (Exponent) Parameter');\n            check(jwk.n, '\"n\" (Modulus) Parameter');\n            components = { e: jwk.e, kty: jwk.kty, n: jwk.n };\n            break;\n        case 'oct':\n            check(jwk.k, '\"k\" (Key Value) Parameter');\n            components = { k: jwk.k, kty: jwk.kty };\n            break;\n        default:\n            throw new JOSENotSupported('\"kty\" (Key Type) Parameter missing or unsupported');\n    }\n    const data = encoder.encode(JSON.stringify(components));\n    return base64url(await digest(digestAlgorithm, data));\n}\nexport async function calculateJwkThumbprintUri(jwk, digestAlgorithm) {\n    digestAlgorithm ?? (digestAlgorithm = 'sha256');\n    const thumbprint = await calculateJwkThumbprint(jwk, digestAlgorithm);\n    return `urn:ietf:params:oauth:jwk-thumbprint:sha-${digestAlgorithm.slice(-3)}:${thumbprint}`;\n}\n", "import * as base64url from '../runtime/base64url.js';\nexport const encode = base64url.encode;\nexport const decode = base64url.decode;\n", "import { decode as base64url } from './base64url.js';\nimport { decoder } from '../lib/buffer_utils.js';\nimport isObject from '../lib/is_object.js';\nimport { JWTInvalid } from './errors.js';\nexport function decodeJwt(jwt) {\n    if (typeof jwt !== 'string')\n        throw new JWTInvalid('JWTs must use Compact JWS serialization, JWT must be a string');\n    const { 1: payload, length } = jwt.split('.');\n    if (length === 5)\n        throw new JWTInvalid('Only JWTs using Compact JWS serialization can be decoded');\n    if (length !== 3)\n        throw new JWTInvalid('Invalid JWT');\n    if (!payload)\n        throw new JWTInvalid('JWTs must contain a payload');\n    let decoded;\n    try {\n        decoded = base64url(payload);\n    }\n    catch {\n        throw new JWTInvalid('Failed to base64url decode the payload');\n    }\n    let result;\n    try {\n        result = JSON.parse(decoder.decode(decoded));\n    }\n    catch {\n        throw new JWTInvalid('Failed to parse the decoded payload as JSON');\n    }\n    if (!isObject(result))\n        throw new JWTInvalid('Invalid JWT Claims Set');\n    return result;\n}\n", "/**\n * @source https://github.com/jshttp/cookie\n * @author blakeembrey\n * @license MIT\n */\n/**\n * This is a workaround to support ESM-only environments, until `cookie` ships ESM builds.\n * @see https://github.com/jshttp/cookie/issues/211\n */\n/**\n * RegExp to match cookie-name in RFC 6265 sec 4.1.1\n * This refers out to the obsoleted definition of token in RFC 2616 sec 2.2\n * which has been replaced by the token definition in RFC 7230 appendix B.\n *\n * cookie-name       = token\n * token             = 1*tchar\n * tchar             = \"!\" / \"#\" / \"$\" / \"%\" / \"&\" / \"'\" /\n *                     \"*\" / \"+\" / \"-\" / \".\" / \"^\" / \"_\" /\n *                     \"`\" / \"|\" / \"~\" / DIGIT / ALPHA\n */\nconst cookieNameRegExp = /^[!#$%&'*+\\-.^_`|~0-9A-Za-z]+$/;\n/**\n * RegExp to match cookie-value in RFC 6265 sec 4.1.1\n *\n * cookie-value      = *cookie-octet / ( DQUOTE *cookie-octet DQUOTE )\n * cookie-octet      = %x21 / %x23-2B / %x2D-3A / %x3C-5B / %x5D-7E\n *                     ; US-ASCII characters excluding CTLs,\n *                     ; whitespace DQUOTE, comma, semicolon,\n *                     ; and backslash\n */\nconst cookieValueRegExp = /^(\"?)[\\u0021\\u0023-\\u002B\\u002D-\\u003A\\u003C-\\u005B\\u005D-\\u007E]*\\1$/;\n/**\n * RegExp to match domain-value in RFC 6265 sec 4.1.1\n *\n * domain-value      = <subdomain>\n *                     ; defined in [RFC1034], Section 3.5, as\n *                     ; enhanced by [RFC1123], Section 2.1\n * <subdomain>       = <label> | <subdomain> \".\" <label>\n * <label>           = <let-dig> [ [ <ldh-str> ] <let-dig> ]\n *                     Labels must be 63 characters or less.\n *                     'let-dig' not 'letter' in the first char, per RFC1123\n * <ldh-str>         = <let-dig-hyp> | <let-dig-hyp> <ldh-str>\n * <let-dig-hyp>     = <let-dig> | \"-\"\n * <let-dig>         = <letter> | <digit>\n * <letter>          = any one of the 52 alphabetic characters A through Z in\n *                     upper case and a through z in lower case\n * <digit>           = any one of the ten digits 0 through 9\n *\n * Keep support for leading dot: https://github.com/jshttp/cookie/issues/173\n *\n * > (Note that a leading %x2E (\".\"), if present, is ignored even though that\n * character is not permitted, but a trailing %x2E (\".\"), if present, will\n * cause the user agent to ignore the attribute.)\n */\nconst domainValueRegExp = /^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i;\n/**\n * RegExp to match path-value in RFC 6265 sec 4.1.1\n *\n * path-value        = <any CHAR except CTLs or \";\">\n * CHAR              = %x01-7F\n *                     ; defined in RFC 5234 appendix B.1\n */\nconst pathValueRegExp = /^[\\u0020-\\u003A\\u003D-\\u007E]*$/;\nconst __toString = Object.prototype.toString;\nconst NullObject = /* @__PURE__ */ (() => {\n    const C = function () { };\n    C.prototype = Object.create(null);\n    return C;\n})();\n/**\n * Parse a cookie header.\n *\n * Parse the given cookie header string into an object\n * The object has the various cookies as keys(names) => values\n */\nexport function parse(str, options) {\n    const obj = new NullObject();\n    const len = str.length;\n    // RFC 6265 sec 4.1.1, RFC 2616 2.2 defines a cookie name consists of one char minimum, plus '='.\n    if (len < 2)\n        return obj;\n    const dec = options?.decode || decode;\n    let index = 0;\n    do {\n        const eqIdx = str.indexOf(\"=\", index);\n        if (eqIdx === -1)\n            break; // No more cookie pairs.\n        const colonIdx = str.indexOf(\";\", index);\n        const endIdx = colonIdx === -1 ? len : colonIdx;\n        if (eqIdx > endIdx) {\n            // backtrack on prior semicolon\n            index = str.lastIndexOf(\";\", eqIdx - 1) + 1;\n            continue;\n        }\n        const keyStartIdx = startIndex(str, index, eqIdx);\n        const keyEndIdx = endIndex(str, eqIdx, keyStartIdx);\n        const key = str.slice(keyStartIdx, keyEndIdx);\n        // only assign once\n        if (obj[key] === undefined) {\n            let valStartIdx = startIndex(str, eqIdx + 1, endIdx);\n            let valEndIdx = endIndex(str, endIdx, valStartIdx);\n            const value = dec(str.slice(valStartIdx, valEndIdx));\n            obj[key] = value;\n        }\n        index = endIdx + 1;\n    } while (index < len);\n    return obj;\n}\nfunction startIndex(str, index, max) {\n    do {\n        const code = str.charCodeAt(index);\n        if (code !== 0x20 /*   */ && code !== 0x09 /* \\t */)\n            return index;\n    } while (++index < max);\n    return max;\n}\nfunction endIndex(str, index, min) {\n    while (index > min) {\n        const code = str.charCodeAt(--index);\n        if (code !== 0x20 /*   */ && code !== 0x09 /* \\t */)\n            return index + 1;\n    }\n    return min;\n}\n/**\n * Serialize data into a cookie header.\n *\n * Serialize a name value pair into a cookie string suitable for\n * http headers. An optional options object specifies cookie parameters.\n *\n * serialize('foo', 'bar', { httpOnly: true })\n *   => \"foo=bar; httpOnly\"\n */\nexport function serialize(name, val, options) {\n    const enc = options?.encode || encodeURIComponent;\n    if (!cookieNameRegExp.test(name)) {\n        throw new TypeError(`argument name is invalid: ${name}`);\n    }\n    const value = enc(val);\n    if (!cookieValueRegExp.test(value)) {\n        throw new TypeError(`argument val is invalid: ${val}`);\n    }\n    let str = name + \"=\" + value;\n    if (!options)\n        return str;\n    if (options.maxAge !== undefined) {\n        if (!Number.isInteger(options.maxAge)) {\n            throw new TypeError(`option maxAge is invalid: ${options.maxAge}`);\n        }\n        str += \"; Max-Age=\" + options.maxAge;\n    }\n    if (options.domain) {\n        if (!domainValueRegExp.test(options.domain)) {\n            throw new TypeError(`option domain is invalid: ${options.domain}`);\n        }\n        str += \"; Domain=\" + options.domain;\n    }\n    if (options.path) {\n        if (!pathValueRegExp.test(options.path)) {\n            throw new TypeError(`option path is invalid: ${options.path}`);\n        }\n        str += \"; Path=\" + options.path;\n    }\n    if (options.expires) {\n        if (!isDate(options.expires) ||\n            !Number.isFinite(options.expires.valueOf())) {\n            throw new TypeError(`option expires is invalid: ${options.expires}`);\n        }\n        str += \"; Expires=\" + options.expires.toUTCString();\n    }\n    if (options.httpOnly) {\n        str += \"; HttpOnly\";\n    }\n    if (options.secure) {\n        str += \"; Secure\";\n    }\n    if (options.partitioned) {\n        str += \"; Partitioned\";\n    }\n    if (options.priority) {\n        const priority = typeof options.priority === \"string\"\n            ? options.priority.toLowerCase()\n            : undefined;\n        switch (priority) {\n            case \"low\":\n                str += \"; Priority=Low\";\n                break;\n            case \"medium\":\n                str += \"; Priority=Medium\";\n                break;\n            case \"high\":\n                str += \"; Priority=High\";\n                break;\n            default:\n                throw new TypeError(`option priority is invalid: ${options.priority}`);\n        }\n    }\n    if (options.sameSite) {\n        const sameSite = typeof options.sameSite === \"string\"\n            ? options.sameSite.toLowerCase()\n            : options.sameSite;\n        switch (sameSite) {\n            case true:\n            case \"strict\":\n                str += \"; SameSite=Strict\";\n                break;\n            case \"lax\":\n                str += \"; SameSite=Lax\";\n                break;\n            case \"none\":\n                str += \"; SameSite=None\";\n                break;\n            default:\n                throw new TypeError(`option sameSite is invalid: ${options.sameSite}`);\n        }\n    }\n    return str;\n}\n/**\n * URL-decode string value. Optimized to skip native call when no %.\n */\nfunction decode(str) {\n    if (str.indexOf(\"%\") === -1)\n        return str;\n    try {\n        return decodeURIComponent(str);\n    }\n    catch (e) {\n        return str;\n    }\n}\n/**\n * Determine if value is a Date.\n */\nfunction isDate(val) {\n    return __toString.call(val) === \"[object Date]\";\n}\n", "/**\n *\n *\n * This module contains functions and types\n * to encode and decode {@link https://authjs.dev/concepts/session-strategies#jwt-session JWT}s\n * issued and used by Auth.js.\n *\n * The JWT issued by Auth.js is _encrypted by default_, using the _A256CBC-HS512_ algorithm ({@link https://www.rfc-editor.org/rfc/rfc7518.html#section-5.2.5 JWE}).\n * It uses the `AUTH_SECRET` environment variable or the passed `secret` property to derive a suitable encryption key.\n *\n * :::info Note\n * Auth.js JWTs are meant to be used by the same app that issued them.\n * If you need JWT authentication for your third-party API, you should rely on your Identity Provider instead.\n * :::\n *\n * ## Installation\n *\n * ```bash npm2yarn\n * npm install @auth/core\n * ```\n *\n * You can then import this submodule from `@auth/core/jwt`.\n *\n * ## Usage\n *\n * :::warning Warning\n * This module *will* be refactored/changed. We do not recommend relying on it right now.\n * :::\n *\n *\n * ## Resources\n *\n * - [What is a JWT session strategy](https://authjs.dev/concepts/session-strategies#jwt-session)\n * - [RFC7519 - JSON Web Token (JWT)](https://www.rfc-editor.org/rfc/rfc7519)\n *\n * @module jwt\n */\nimport { hkdf } from \"@panva/hkdf\";\nimport { EncryptJWT, base64url, calculateJwkThumbprint, jwtDecrypt } from \"jose\";\nimport { defaultCookies, SessionStore } from \"./lib/utils/cookie.js\";\nimport { MissingSecret } from \"./errors.js\";\nimport * as cookie from \"./lib/vendored/cookie.js\";\nconst { parse: parseCookie } = cookie;\nconst DEFAULT_MAX_AGE = 30 * 24 * 60 * 60; // 30 days\nconst now = () => (Date.now() / 1000) | 0;\nconst alg = \"dir\";\nconst enc = \"A256CBC-HS512\";\n/** Issues a JWT. By default, the JWT is encrypted using \"A256CBC-HS512\". */\nexport async function encode(params) {\n    const { token = {}, secret, maxAge = DEFAULT_MAX_AGE, salt } = params;\n    const secrets = Array.isArray(secret) ? secret : [secret];\n    const encryptionSecret = await getDerivedEncryptionKey(enc, secrets[0], salt);\n    const thumbprint = await calculateJwkThumbprint({ kty: \"oct\", k: base64url.encode(encryptionSecret) }, `sha${encryptionSecret.byteLength << 3}`);\n    // @ts-expect-error `jose` allows any object as payload.\n    return await new EncryptJWT(token)\n        .setProtectedHeader({ alg, enc, kid: thumbprint })\n        .setIssuedAt()\n        .setExpirationTime(now() + maxAge)\n        .setJti(crypto.randomUUID())\n        .encrypt(encryptionSecret);\n}\n/** Decodes an Auth.js issued JWT. */\nexport async function decode(params) {\n    const { token, secret, salt } = params;\n    const secrets = Array.isArray(secret) ? secret : [secret];\n    if (!token)\n        return null;\n    const { payload } = await jwtDecrypt(token, async ({ kid, enc }) => {\n        for (const secret of secrets) {\n            const encryptionSecret = await getDerivedEncryptionKey(enc, secret, salt);\n            if (kid === undefined)\n                return encryptionSecret;\n            const thumbprint = await calculateJwkThumbprint({ kty: \"oct\", k: base64url.encode(encryptionSecret) }, `sha${encryptionSecret.byteLength << 3}`);\n            if (kid === thumbprint)\n                return encryptionSecret;\n        }\n        throw new Error(\"no matching decryption secret\");\n    }, {\n        clockTolerance: 15,\n        keyManagementAlgorithms: [alg],\n        contentEncryptionAlgorithms: [enc, \"A256GCM\"],\n    });\n    return payload;\n}\nexport async function getToken(params) {\n    const { secureCookie, cookieName = defaultCookies(secureCookie ?? false).sessionToken.name, decode: _decode = decode, salt = cookieName, secret, logger = console, raw, req, } = params;\n    if (!req)\n        throw new Error(\"Must pass `req` to JWT getToken()\");\n    const headers = req.headers instanceof Headers ? req.headers : new Headers(req.headers);\n    const sessionStore = new SessionStore({ name: cookieName, options: { secure: secureCookie } }, parseCookie(headers.get(\"cookie\") ?? \"\"), logger);\n    let token = sessionStore.value;\n    const authorizationHeader = headers.get(\"authorization\");\n    if (!token && authorizationHeader?.split(\" \")[0] === \"Bearer\") {\n        const urlEncodedToken = authorizationHeader.split(\" \")[1];\n        token = decodeURIComponent(urlEncodedToken);\n    }\n    if (!token)\n        return null;\n    if (raw)\n        return token;\n    if (!secret)\n        throw new MissingSecret(\"Must pass `secret` if not set to JWT getToken()\");\n    try {\n        return await _decode({ token, secret, salt });\n    }\n    catch {\n        return null;\n    }\n}\nasync function getDerivedEncryptionKey(enc, keyMaterial, salt) {\n    let length;\n    switch (enc) {\n        case \"A256CBC-HS512\":\n            length = 64;\n            break;\n        case \"A256GCM\":\n            length = 32;\n            break;\n        default:\n            throw new Error(\"Unsupported JWT Content Encryption Algorithm\");\n    }\n    return await hkdf(\"sha256\", keyMaterial, salt, `Auth.js Generated Encryption Key (${salt})`, length);\n}\n", "/**\n * Get callback URL based on query param / cookie + validation,\n * and add it to `req.options.callbackUrl`.\n */\nexport async function createCallbackUrl({ options, paramValue, cookieValue, }) {\n    const { url, callbacks } = options;\n    let callbackUrl = url.origin;\n    if (paramValue) {\n        // If callbackUrl form field or query parameter is passed try to use it if allowed\n        callbackUrl = await callbacks.redirect({\n            url: paramValue,\n            baseUrl: url.origin,\n        });\n    }\n    else if (cookieValue) {\n        // If no callbackUrl specified, try using the value from the cookie if allowed\n        callbackUrl = await callbacks.redirect({\n            url: cookieValue,\n            baseUrl: url.origin,\n        });\n    }\n    return {\n        callbackUrl,\n        // Save callback URL in a cookie so that it can be used for subsequent requests in signin/signout/callback flow\n        callbackUrlCookie: callbackUrl !== cookieValue ? callbackUrl : undefined,\n    };\n}\n", "import { AuthError } from \"../../errors.js\";\nconst red = \"\\x1b[31m\";\nconst yellow = \"\\x1b[33m\";\nconst grey = \"\\x1b[90m\";\nconst reset = \"\\x1b[0m\";\nconst defaultLogger = {\n    error(error) {\n        const name = error instanceof AuthError ? error.type : error.name;\n        console.error(`${red}[auth][error]${reset} ${name}: ${error.message}`);\n        if (error.cause &&\n            typeof error.cause === \"object\" &&\n            \"err\" in error.cause &&\n            error.cause.err instanceof Error) {\n            const { err, ...data } = error.cause;\n            console.error(`${red}[auth][cause]${reset}:`, err.stack);\n            if (data)\n                console.error(`${red}[auth][details]${reset}:`, JSON.stringify(data, null, 2));\n        }\n        else if (error.stack) {\n            console.error(error.stack.replace(/.*/, \"\").substring(1));\n        }\n    },\n    warn(code) {\n        const url = `https://warnings.authjs.dev#${code}`;\n        console.warn(`${yellow}[auth][warn][${code}]${reset}`, `Read more: ${url}`);\n    },\n    debug(message, metadata) {\n        console.log(`${grey}[auth][debug]:${reset} ${message}`, JSON.stringify(metadata, null, 2));\n    },\n};\n/**\n * Override the built-in logger with user's implementation.\n * Any `undefined` level will use the default logger.\n */\nexport function setLogger(config) {\n    const newLogger = {\n        ...defaultLogger,\n    };\n    // Turn off debug logging if `debug` isn't set to `true`\n    if (!config.debug)\n        newLogger.debug = () => { };\n    if (config.logger?.error)\n        newLogger.error = config.logger.error;\n    if (config.logger?.warn)\n        newLogger.warn = config.logger.warn;\n    if (config.logger?.debug)\n        newLogger.debug = config.logger.debug;\n    config.logger ?? (config.logger = newLogger);\n    return newLogger;\n}\n", "const actions = [\n    \"providers\",\n    \"session\",\n    \"csrf\",\n    \"signin\",\n    \"signout\",\n    \"callback\",\n    \"verify-request\",\n    \"error\",\n    \"webauthn-options\",\n];\nexport function isAuthAction(action) {\n    return actions.includes(action);\n}\n", "import * as cookie from \"../vendored/cookie.js\";\nimport { UnknownAction } from \"../../errors.js\";\nimport { setLogger } from \"./logger.js\";\nimport { isAuthAction } from \"./actions.js\";\nconst { parse: parseCookie, serialize: serializeCookie } = cookie;\nasync function getBody(req) {\n    if (!(\"body\" in req) || !req.body || req.method !== \"POST\")\n        return;\n    const contentType = req.headers.get(\"content-type\");\n    if (contentType?.includes(\"application/json\")) {\n        return await req.json();\n    }\n    else if (contentType?.includes(\"application/x-www-form-urlencoded\")) {\n        const params = new URLSearchParams(await req.text());\n        return Object.fromEntries(params);\n    }\n}\nexport async function toInternalRequest(req, config) {\n    try {\n        if (req.method !== \"GET\" && req.method !== \"POST\")\n            throw new UnknownAction(\"Only GET and POST requests are supported\");\n        // Defaults are usually set in the `init` function, but this is needed below\n        config.basePath ?? (config.basePath = \"/auth\");\n        const url = new URL(req.url);\n        const { action, providerId } = parseActionAndProviderId(url.pathname, config.basePath);\n        return {\n            url,\n            action,\n            providerId,\n            method: req.method,\n            headers: Object.fromEntries(req.headers),\n            body: req.body ? await getBody(req) : undefined,\n            cookies: parseCookie(req.headers.get(\"cookie\") ?? \"\") ?? {},\n            error: url.searchParams.get(\"error\") ?? undefined,\n            query: Object.fromEntries(url.searchParams),\n        };\n    }\n    catch (e) {\n        const logger = setLogger(config);\n        logger.error(e);\n        logger.debug(\"request\", req);\n    }\n}\nexport function toRequest(request) {\n    return new Request(request.url, {\n        headers: request.headers,\n        method: request.method,\n        body: request.method === \"POST\"\n            ? JSON.stringify(request.body ?? {})\n            : undefined,\n    });\n}\nexport function toResponse(res) {\n    const headers = new Headers(res.headers);\n    res.cookies?.forEach((cookie) => {\n        const { name, value, options } = cookie;\n        const cookieHeader = serializeCookie(name, value, options);\n        if (headers.has(\"Set-Cookie\"))\n            headers.append(\"Set-Cookie\", cookieHeader);\n        else\n            headers.set(\"Set-Cookie\", cookieHeader);\n    });\n    let body = res.body;\n    if (headers.get(\"content-type\") === \"application/json\")\n        body = JSON.stringify(res.body);\n    else if (headers.get(\"content-type\") === \"application/x-www-form-urlencoded\")\n        body = new URLSearchParams(res.body).toString();\n    const status = res.redirect ? 302 : (res.status ?? 200);\n    const response = new Response(body, { headers, status });\n    if (res.redirect)\n        response.headers.set(\"Location\", res.redirect);\n    return response;\n}\n/** Web compatible method to create a hash, using SHA256 */\nexport async function createHash(message) {\n    const data = new TextEncoder().encode(message);\n    const hash = await crypto.subtle.digest(\"SHA-256\", data);\n    return Array.from(new Uint8Array(hash))\n        .map((b) => b.toString(16).padStart(2, \"0\"))\n        .join(\"\")\n        .toString();\n}\n/** Web compatible method to create a random string of a given length */\nexport function randomString(size) {\n    const i2hex = (i) => (\"0\" + i.toString(16)).slice(-2);\n    const r = (a, i) => a + i2hex(i);\n    const bytes = crypto.getRandomValues(new Uint8Array(size));\n    return Array.from(bytes).reduce(r, \"\");\n}\n/** @internal Parse the action and provider id from a URL pathname. */\nexport function parseActionAndProviderId(pathname, base) {\n    const a = pathname.match(new RegExp(`^${base}(.+)`));\n    if (a === null)\n        throw new UnknownAction(`Cannot parse action at ${pathname}`);\n    const actionAndProviderId = a.at(-1);\n    const b = actionAndProviderId.replace(/^\\//, \"\").split(\"/\").filter(Boolean);\n    if (b.length !== 1 && b.length !== 2)\n        throw new UnknownAction(`Cannot parse action at ${pathname}`);\n    const [action, providerId] = b;\n    if (!isAuthAction(action))\n        throw new UnknownAction(`Cannot parse action at ${pathname}`);\n    if (providerId &&\n        ![\"signin\", \"callback\", \"webauthn-options\"].includes(action))\n        throw new UnknownAction(`Cannot parse action at ${pathname}`);\n    return { action, providerId };\n}\n", "import { createHash, randomString } from \"../../../utils/web.js\";\nimport { MissingCSRF } from \"../../../../errors.js\";\n/**\n * Ensure CSRF Token cookie is set for any subsequent requests.\n * Used as part of the strategy for mitigation for CSRF tokens.\n *\n * Creates a cookie like 'next-auth.csrf-token' with the value 'token|hash',\n * where 'token' is the CSRF token and 'hash' is a hash made of the token and\n * the secret, and the two values are joined by a pipe '|'. By storing the\n * value and the hash of the value (with the secret used as a salt) we can\n * verify the cookie was set by the server and not by a malicious attacker.\n *\n * For more details, see the following OWASP links:\n * https://cheatsheetseries.owasp.org/cheatsheets/Cross-Site_Request_Forgery_Prevention_Cheat_Sheet.html#double-submit-cookie\n * https://owasp.org/www-chapter-london/assets/slides/David_Johansson-Double_Defeat_of_Double-Submit_Cookie.pdf\n */\nexport async function createCSRFToken({ options, cookieValue, isPost, bodyValue, }) {\n    if (cookieValue) {\n        const [csrfToken, csrfTokenHash] = cookieValue.split(\"|\");\n        const expectedCsrfTokenHash = await createHash(`${csrfToken}${options.secret}`);\n        if (csrfTokenHash === expectedCsrfTokenHash) {\n            // If hash matches then we trust the CSRF token value\n            // If this is a POST request and the CSRF Token in the POST request matches\n            // the cookie we have already verified is the one we have set, then the token is verified!\n            const csrfTokenVerified = isPost && csrfToken === bodyValue;\n            return { csrfTokenVerified, csrfToken };\n        }\n    }\n    // New CSRF token\n    const csrfToken = randomString(32);\n    const csrfTokenHash = await createHash(`${csrfToken}${options.secret}`);\n    const cookie = `${csrfToken}|${csrfTokenHash}`;\n    return { cookie, csrfToken };\n}\nexport function validateCSRF(action, verified) {\n    if (verified)\n        return;\n    throw new MissingCSRF(`CSRF token was missing during an action ${action}`);\n}\n", "function isObject(item) {\n    return item !== null && typeof item === \"object\";\n}\n/** Deep merge two or more objects */\nexport function merge(target, ...sources) {\n    if (!sources.length)\n        return target;\n    const source = sources.shift();\n    if (isObject(target) && isObject(source)) {\n        for (const key in source) {\n            if (isObject(source[key])) {\n                if (!isObject(target[key]))\n                    target[key] = Array.isArray(source[key])\n                        ? []\n                        : {};\n                merge(target[key], source[key]);\n            }\n            else if (source[key] !== undefined)\n                target[key] = source[key];\n        }\n    }\n    return merge(target, ...sources);\n}\n", "/**\n * :::danger\n * This option is intended for framework authors.\n * :::\n *\n * Auth.js comes with built-in CSRF protection, but\n * if you are implementing a framework that is already protected against CSRF attacks, you can skip this check by\n * passing this value to {@link AuthConfig.skipCSRFCheck}.\n */\nexport const skipCSRFCheck = Symbol(\"skip-csrf-check\");\n/**\n * :::danger\n * This option is intended for framework authors.\n * :::\n *\n * Auth.js returns a web standard {@link Response} by default, but\n * if you are implementing a framework you might want to get access to the raw internal response\n * by passing this value to {@link AuthConfig.raw}.\n */\nexport const raw = Symbol(\"return-type-raw\");\n/**\n * :::danger\n * This option allows you to override the default `fetch` function used by the provider\n * to make requests to the provider's OAuth endpoints directly.\n * Used incorrectly, it can have security implications.\n * :::\n *\n * It can be used to support corporate proxies, custom fetch libraries, cache discovery endpoints,\n * add mocks for testing, logging, set custom headers/params for non-spec compliant providers, etc.\n *\n * @example\n * ```ts\n * import { Auth, customFetch } from \"@auth/core\"\n * import GitHub from \"@auth/core/providers/github\"\n *\n * const dispatcher = new ProxyAgent(\"my.proxy.server\")\n * function proxy(...args: Parameters<typeof fetch>): ReturnType<typeof fetch> {\n *   return undici(args[0], { ...(args[1] ?? {}), dispatcher })\n * }\n *\n * const response = await Auth(request, {\n *   providers: [GitHub({ [customFetch]: proxy })]\n * })\n * ```\n *\n * @see https://undici.nodejs.org/#/docs/api/ProxyAgent?id=example-basic-proxy-request-with-local-agent-dispatcher\n * @see https://authjs.dev/guides/corporate-proxy\n */\nexport const customFetch = Symbol(\"custom-fetch\");\n/**\n * @internal\n *\n * Used to mark some providers for processing within the core library.\n *\n * **Do not use or you will be fired.**\n */\nexport const conformInternal = Symbol(\"conform-internal\");\n", "import { merge } from \"./merge.js\";\nimport { customFetch } from \"../symbols.js\";\n/**\n * Adds `signinUrl` and `callbackUrl` to each provider\n * and deep merge user-defined options.\n */\nexport default function parseProviders(params) {\n    const { providerId, config } = params;\n    const url = new URL(config.basePath ?? \"/auth\", params.url.origin);\n    const providers = config.providers.map((p) => {\n        const provider = typeof p === \"function\" ? p() : p;\n        const { options: userOptions, ...defaults } = provider;\n        const id = (userOptions?.id ?? defaults.id);\n        // TODO: Support if properties have different types, e.g. authorization: string or object\n        const merged = merge(defaults, userOptions, {\n            signinUrl: `${url}/signin/${id}`,\n            callbackUrl: `${url}/callback/${id}`,\n        });\n        if (provider.type === \"oauth\" || provider.type === \"oidc\") {\n            merged.redirectProxyUrl ?? (merged.redirectProxyUrl = userOptions?.redirectProxyUrl ?? config.redirectProxyUrl);\n            const normalized = normalizeOAuth(merged);\n            // We currently don't support redirect proxies for response_mode=form_post\n            if (normalized.authorization?.url.searchParams.get(\"response_mode\") ===\n                \"form_post\") {\n                delete normalized.redirectProxyUrl;\n            }\n            // @ts-expect-error Symbols don't get merged by the `merge` function\n            // so we need to do it manually.\n            normalized[customFetch] ?? (normalized[customFetch] = userOptions?.[customFetch]);\n            return normalized;\n        }\n        return merged;\n    });\n    return {\n        providers,\n        provider: providers.find(({ id }) => id === providerId),\n    };\n}\n// TODO: Also add discovery here, if some endpoints/config are missing.\n// We should return both a client and authorization server config.\nfunction normalizeOAuth(c) {\n    if (c.issuer)\n        c.wellKnown ?? (c.wellKnown = `${c.issuer}/.well-known/openid-configuration`);\n    const authorization = normalizeEndpoint(c.authorization, c.issuer);\n    if (authorization && !authorization.url?.searchParams.has(\"scope\")) {\n        authorization.url.searchParams.set(\"scope\", \"openid profile email\");\n    }\n    const token = normalizeEndpoint(c.token, c.issuer);\n    const userinfo = normalizeEndpoint(c.userinfo, c.issuer);\n    const checks = c.checks ?? [\"pkce\"];\n    if (c.redirectProxyUrl) {\n        if (!checks.includes(\"state\"))\n            checks.push(\"state\");\n        c.redirectProxyUrl = `${c.redirectProxyUrl}/callback/${c.id}`;\n    }\n    return {\n        ...c,\n        authorization,\n        token,\n        checks,\n        userinfo,\n        profile: c.profile ?? defaultProfile,\n        account: c.account ?? defaultAccount,\n    };\n}\n/**\n * Returns basic user profile from the userinfo response/`id_token` claims.\n * The returned `id` will become the `account.providerAccountId`. `user.id`\n * and `account.id` are auto-generated UUID's.\n *\n * The result if this function is used to create the `User` in the database.\n * @see https://authjs.dev/reference/core/adapters#user\n * @see https://openid.net/specs/openid-connect-core-1_0.html#IDToken\n * @see https://openid.net/specs/openid-connect-core-1_0.html#\n */\nconst defaultProfile = (profile) => {\n    return stripUndefined({\n        id: profile.sub ?? profile.id ?? crypto.randomUUID(),\n        name: profile.name ?? profile.nickname ?? profile.preferred_username,\n        email: profile.email,\n        image: profile.picture,\n    });\n};\n/**\n * Returns basic OAuth/OIDC values from the token response.\n * @see https://www.ietf.org/rfc/rfc6749.html#section-5.1\n * @see https://openid.net/specs/openid-connect-core-1_0.html#TokenResponse\n * @see https://authjs.dev/reference/core/adapters#account\n */\nconst defaultAccount = (account) => {\n    return stripUndefined({\n        access_token: account.access_token,\n        id_token: account.id_token,\n        refresh_token: account.refresh_token,\n        expires_at: account.expires_at,\n        scope: account.scope,\n        token_type: account.token_type,\n        session_state: account.session_state,\n    });\n};\nfunction stripUndefined(o) {\n    const result = {};\n    for (const [k, v] of Object.entries(o)) {\n        if (v !== undefined)\n            result[k] = v;\n    }\n    return result;\n}\nfunction normalizeEndpoint(e, issuer) {\n    if (!e && issuer)\n        return;\n    if (typeof e === \"string\") {\n        return { url: new URL(e) };\n    }\n    // If e.url is undefined, it's because the provider config\n    // assumes that we will use the issuer endpoint.\n    // The existence of either e.url or provider.issuer is checked in\n    // assert.ts. We fallback to \"https://authjs.dev\" to be able to pass around\n    // a valid URL even if the user only provided params.\n    // NOTE: This need to be checked when constructing the URL\n    // for the authorization, token and userinfo endpoints.\n    const url = new URL(e?.url ?? \"https://authjs.dev\");\n    if (e?.params != null) {\n        for (let [key, value] of Object.entries(e.params)) {\n            if (key === \"claims\") {\n                value = JSON.stringify(value);\n            }\n            url.searchParams.set(key, String(value));\n        }\n    }\n    return {\n        url,\n        request: e?.request,\n        conform: e?.conform,\n        ...(e?.clientPrivateKey ? { clientPrivateKey: e?.clientPrivateKey } : null),\n    };\n}\nexport function isOIDCProvider(provider) {\n    return provider.type === \"oidc\";\n}\nexport function isOAuth2Provider(provider) {\n    return provider.type === \"oauth\";\n}\n/** Either OAuth 2 or OIDC */\nexport function isOAuthProvider(provider) {\n    return provider.type === \"oauth\" || provider.type === \"oidc\";\n}\n", "import * as jwt from \"../jwt.js\";\nimport { createCallbackUrl } from \"./utils/callback-url.js\";\nimport * as cookie from \"./utils/cookie.js\";\nimport { createCSRFToken } from \"./actions/callback/oauth/csrf-token.js\";\nimport { AdapterError, EventError } from \"../errors.js\";\nimport parseProviders from \"./utils/providers.js\";\nimport { setLogger } from \"./utils/logger.js\";\nimport { merge } from \"./utils/merge.js\";\nexport const defaultCallbacks = {\n    signIn() {\n        return true;\n    },\n    redirect({ url, baseUrl }) {\n        if (url.startsWith(\"/\"))\n            return `${baseUrl}${url}`;\n        else if (new URL(url).origin === baseUrl)\n            return url;\n        return baseUrl;\n    },\n    session({ session }) {\n        return {\n            user: {\n                name: session.user?.name,\n                email: session.user?.email,\n                image: session.user?.image,\n            },\n            expires: session.expires?.toISOString?.() ?? session.expires,\n        };\n    },\n    jwt({ token }) {\n        return token;\n    },\n};\n/** Initialize all internal options and cookies. */\nexport async function init({ authOptions: config, providerId, action, url, cookies: reqCookies, callbackUrl: reqCallbackUrl, csrfToken: reqCsrfToken, csrfDisabled, isPost, }) {\n    const logger = setLogger(config);\n    const { providers, provider } = parseProviders({ url, providerId, config });\n    const maxAge = 30 * 24 * 60 * 60; // Sessions expire after 30 days of being idle by default\n    let isOnRedirectProxy = false;\n    if ((provider?.type === \"oauth\" || provider?.type === \"oidc\") &&\n        provider.redirectProxyUrl) {\n        try {\n            isOnRedirectProxy =\n                new URL(provider.redirectProxyUrl).origin === url.origin;\n        }\n        catch {\n            throw new TypeError(`redirectProxyUrl must be a valid URL. Received: ${provider.redirectProxyUrl}`);\n        }\n    }\n    // User provided options are overridden by other options,\n    // except for the options with special handling above\n    const options = {\n        debug: false,\n        pages: {},\n        theme: {\n            colorScheme: \"auto\",\n            logo: \"\",\n            brandColor: \"\",\n            buttonText: \"\",\n        },\n        // Custom options override defaults\n        ...config,\n        // These computed settings can have values in userOptions but we override them\n        // and are request-specific.\n        url,\n        action,\n        // @ts-expect-errors\n        provider,\n        cookies: merge(cookie.defaultCookies(config.useSecureCookies ?? url.protocol === \"https:\"), config.cookies),\n        providers,\n        // Session options\n        session: {\n            // If no adapter specified, force use of JSON Web Tokens (stateless)\n            strategy: config.adapter ? \"database\" : \"jwt\",\n            maxAge,\n            updateAge: 24 * 60 * 60,\n            generateSessionToken: () => crypto.randomUUID(),\n            ...config.session,\n        },\n        // JWT options\n        jwt: {\n            secret: config.secret, // Asserted in assert.ts\n            maxAge: config.session?.maxAge ?? maxAge, // default to same as `session.maxAge`\n            encode: jwt.encode,\n            decode: jwt.decode,\n            ...config.jwt,\n        },\n        // Event messages\n        events: eventsErrorHandler(config.events ?? {}, logger),\n        adapter: adapterErrorHandler(config.adapter, logger),\n        // Callback functions\n        callbacks: { ...defaultCallbacks, ...config.callbacks },\n        logger,\n        callbackUrl: url.origin,\n        isOnRedirectProxy,\n        experimental: {\n            ...config.experimental,\n        },\n    };\n    // Init cookies\n    const cookies = [];\n    if (csrfDisabled) {\n        options.csrfTokenVerified = true;\n    }\n    else {\n        const { csrfToken, cookie: csrfCookie, csrfTokenVerified, } = await createCSRFToken({\n            options,\n            cookieValue: reqCookies?.[options.cookies.csrfToken.name],\n            isPost,\n            bodyValue: reqCsrfToken,\n        });\n        options.csrfToken = csrfToken;\n        options.csrfTokenVerified = csrfTokenVerified;\n        if (csrfCookie) {\n            cookies.push({\n                name: options.cookies.csrfToken.name,\n                value: csrfCookie,\n                options: options.cookies.csrfToken.options,\n            });\n        }\n    }\n    const { callbackUrl, callbackUrlCookie } = await createCallbackUrl({\n        options,\n        cookieValue: reqCookies?.[options.cookies.callbackUrl.name],\n        paramValue: reqCallbackUrl,\n    });\n    options.callbackUrl = callbackUrl;\n    if (callbackUrlCookie) {\n        cookies.push({\n            name: options.cookies.callbackUrl.name,\n            value: callbackUrlCookie,\n            options: options.cookies.callbackUrl.options,\n        });\n    }\n    return { options, cookies };\n}\n/** Wraps an object of methods and adds error handling. */\nfunction eventsErrorHandler(methods, logger) {\n    return Object.keys(methods).reduce((acc, name) => {\n        acc[name] = async (...args) => {\n            try {\n                const method = methods[name];\n                return await method(...args);\n            }\n            catch (e) {\n                logger.error(new EventError(e));\n            }\n        };\n        return acc;\n    }, {});\n}\n/** Handles adapter induced errors. */\nfunction adapterErrorHandler(adapter, logger) {\n    if (!adapter)\n        return;\n    return Object.keys(adapter).reduce((acc, name) => {\n        acc[name] = async (...args) => {\n            try {\n                logger.debug(`adapter_${name}`, { args });\n                const method = adapter[name];\n                return await method(...args);\n            }\n            catch (e) {\n                const error = new AdapterError(e);\n                logger.error(error);\n                throw error;\n            }\n        };\n        return acc;\n    }, {});\n}\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 16;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 17;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { EMPTY_ARR } from './constants';\n\nexport const isArray = Array.isArray;\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-expect-error We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {preact.ContainerNode} node The node to remove\n */\nexport function removeNode(node) {\n\tif (node && node.parentNode) node.parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n", "import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n", "import { slice } from './util';\nimport options from './options';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {VNode[\"type\"]} type The node name or Component constructor for this\n * virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the\n * virtual node\n * @returns {VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, null);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\t/** @type {VNode} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t// _nextDom must be initialized to undefined b/c it will eventually\n\t\t// be set to dom.nextSibling which can return `null` and it is important\n\t\t// to be able to distinguish between an uninitialized _nextDom and\n\t\t// a _nextDom that has been set to `null`\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\tconstructor: undefined,\n\t\t_original: original == null ? ++vnodeId : original,\n\t\t_index: -1,\n\t\t_flags: 0\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == null && options.vnode != null) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: null };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor == undefined;\n", "import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\nimport { MODE_HYDRATE } from './constants';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function BaseComponent(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nBaseComponent.prototype.setState = function (update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != null && this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nBaseComponent.prototype.forceUpdate = function (callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {ComponentChildren | void}\n */\nBaseComponent.prototype.render = Fragment;\n\n/**\n * @param {VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._index + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet oldVNode = component._vnode,\n\t\toldDom = oldVNode._dom,\n\t\tcommitQueue = [],\n\t\trefQueue = [];\n\n\tif (component._parentDom) {\n\t\tconst newVNode = assign({}, oldVNode);\n\t\tnewVNode._original = oldVNode._original + 1;\n\t\tif (options.vnode) options.vnode(newVNode);\n\n\t\tdiff(\n\t\t\tcomponent._parentDom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tcomponent._parentDom.namespaceURI,\n\t\t\toldVNode._flags & MODE_HYDRATE ? [oldDom] : null,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(oldVNode) : oldDom,\n\t\t\t!!(oldVNode._flags & MODE_HYDRATE),\n\t\t\trefQueue\n\t\t);\n\n\t\tnewVNode._original = oldVNode._original;\n\t\tnewVNode._parent._children[newVNode._index] = newVNode;\n\t\tcommitRoot(commitQueue, newVNode, refQueue);\n\n\t\tif (newVNode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(newVNode);\n\t\t}\n\t}\n}\n\n/**\n * @param {VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/**\n * Enqueue a rerender of a component\n * @param {Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/**\n * @param {Component} a\n * @param {Component} b\n */\nconst depthSort = (a, b) => a._vnode._depth - b._vnode._depth;\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet c;\n\trerenderQueue.sort(depthSort);\n\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t// process() calls from getting scheduled while `queue` is still being consumed.\n\twhile ((c = rerenderQueue.shift())) {\n\t\tif (c._dirty) {\n\t\t\tlet renderQueueLength = rerenderQueue.length;\n\t\t\trenderComponent(c);\n\t\t\tif (rerenderQueue.length > renderQueueLength) {\n\t\t\t\t// When i.e. rerendering a provider additional new items can be injected, we want to\n\t\t\t\t// keep the order from top to bottom with those new items so we can handle them in a\n\t\t\t\t// single pass\n\t\t\t\trerenderQueue.sort(depthSort);\n\t\t\t}\n\t\t}\n\t}\n\tprocess._rerenderCount = 0;\n}\n\nprocess._rerenderCount = 0;\n", "import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\nfunction setStyle(style, key, value) {\n\tif (key[0] === '-') {\n\t\tstyle.setProperty(key, value == null ? '' : value);\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\n// A logical clock to solve issues like https://github.com/preactjs/preact/issues/3927.\n// When the DOM performs an event it leaves micro-ticks in between bubbling up which means that\n// an event can trigger on a newly reated DOM-node while the event bubbles up.\n//\n// Originally inspired by Vue\n// (https://github.com/vuejs/core/blob/caeb8a68811a1b0f79/packages/runtime-dom/src/modules/events.ts#L90-L101),\n// but modified to use a logical clock instead of Date.now() in case event handlers get attached\n// and events get dispatched during the same millisecond.\n//\n// The clock is incremented after each new event dispatch. This allows 1 000 000 new events\n// per second for over 280 years before the value reaches Number.MAX_SAFE_INTEGER (2**53 - 1).\nlet eventClock = 0;\n\n/**\n * Set a property value on a DOM node\n * @param {PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {string} namespace Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, namespace) {\n\tlet useCapture;\n\n\to: if (name === 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] !== oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] === 'o' && name[1] === 'n') {\n\t\tuseCapture =\n\t\t\tname !== (name = name.replace(/(PointerCapture)$|Capture$/i, '$1'));\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (\n\t\t\tname.toLowerCase() in dom ||\n\t\t\tname === 'onFocusOut' ||\n\t\t\tname === 'onFocusIn'\n\t\t)\n\t\t\tname = name.toLowerCase().slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tvalue._attached = eventClock;\n\t\t\t\tdom.addEventListener(\n\t\t\t\t\tname,\n\t\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\t\tuseCapture\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tvalue._attached = oldValue._attached;\n\t\t\t}\n\t\t} else {\n\t\t\tdom.removeEventListener(\n\t\t\t\tname,\n\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\tuseCapture\n\t\t\t);\n\t\t}\n\t} else {\n\t\tif (namespace == 'http://www.w3.org/2000/svg') {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname != 'width' &&\n\t\t\tname != 'height' &&\n\t\t\tname != 'href' &&\n\t\t\tname != 'list' &&\n\t\t\tname != 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname != 'tabIndex' &&\n\t\t\tname != 'download' &&\n\t\t\tname != 'rowSpan' &&\n\t\t\tname != 'colSpan' &&\n\t\t\tname != 'role' &&\n\t\t\tname != 'popover' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == null ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// aria- and data- attributes have no boolean representation.\n\t\t// A `false` value is different from the attribute not being\n\t\t// present, so we can't remove it. For non-boolean aria\n\t\t// attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost too many bytes. On top of\n\t\t// that other frameworks generally stringify `false`.\n\n\t\tif (typeof value == 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != null && (value !== false || name[4] === '-')) {\n\t\t\tdom.setAttribute(name, name == 'popover' && value == true ? '' : value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Create an event proxy function.\n * @param {boolean} useCapture Is the event handler for the capture phase.\n * @private\n */\nfunction createEventProxy(useCapture) {\n\t/**\n\t * Proxy an event to hooked event handlers\n\t * @param {PreactEvent} e The event object from the browser\n\t * @private\n\t */\n\treturn function (e) {\n\t\tif (this._listeners) {\n\t\t\tconst eventHandler = this._listeners[e.type + useCapture];\n\t\t\tif (e._dispatched == null) {\n\t\t\t\te._dispatched = eventClock++;\n\n\t\t\t\t// When `e._dispatched` is smaller than the time when the targeted event\n\t\t\t\t// handler was attached we know we have bubbled up to an element that was added\n\t\t\t\t// during patching the DOM.\n\t\t\t} else if (e._dispatched < eventHandler._attached) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn eventHandler(options.event ? options.event(e) : e);\n\t\t}\n\t};\n}\n\nconst eventProxy = createEventProxy(false);\nconst eventProxyCapture = createEventProxy(true);\n", "import { enqueueRender } from './component';\n\nexport let i = 0;\n\nexport function createContext(defaultValue, contextId) {\n\tcontextId = '__cC' + i++;\n\n\tconst context = {\n\t\t_id: contextId,\n\t\t_defaultValue: defaultValue,\n\t\t/** @type {FunctionComponent} */\n\t\tConsumer(props, contextValue) {\n\t\t\t// return props.children(\n\t\t\t// \tcontext[contextId] ? context[contextId].props.value : defaultValue\n\t\t\t// );\n\t\t\treturn props.children(contextValue);\n\t\t},\n\t\t/** @type {FunctionComponent} */\n\t\tProvider(props) {\n\t\t\tif (!this.getChildContext) {\n\t\t\t\t/** @type {Set<Component> | null} */\n\t\t\t\tlet subs = new Set();\n\t\t\t\tlet ctx = {};\n\t\t\t\tctx[contextId] = this;\n\n\t\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\t\tthis.componentWillUnmount = () => {\n\t\t\t\t\tsubs = null;\n\t\t\t\t};\n\n\t\t\t\tthis.shouldComponentUpdate = function (_props) {\n\t\t\t\t\tif (this.props.value !== _props.value) {\n\t\t\t\t\t\tsubs.forEach(c => {\n\t\t\t\t\t\t\tc._force = true;\n\t\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.sub = c => {\n\t\t\t\t\tsubs.add(c);\n\t\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\t\tif (subs) {\n\t\t\t\t\t\t\tsubs.delete(c);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn props.children;\n\t\t}\n\t};\n\n\t// Devtools needs access to the context object when it\n\t// encounters a Provider. This is necessary to support\n\t// setting `displayName` on the context object instead\n\t// of on the component itself. See:\n\t// https://reactjs.org/docs/context.html#contextdisplayname\n\n\treturn (context.Provider._contextRef = context.Consumer.contextType =\n\t\tcontext);\n}\n", "import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport { EMPTY_OBJ, EMPTY_ARR, INSERT_VNODE, MATCHED } from '../constants';\nimport { isArray } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * Diff the children of a virtual node\n * @param {PreactElement} parentDom The DOM element whose children are being\n * diffed\n * @param {ComponentChildren[]} renderResult\n * @param {VNode} newParentVNode The new virtual node whose children should be\n * diff'ed against oldParentVNode\n * @param {VNode} oldParentVNode The old virtual node whose children should be\n * diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\tlet i,\n\t\t/** @type {VNode} */\n\t\toldVNode,\n\t\t/** @type {VNode} */\n\t\tchildVNode,\n\t\t/** @type {PreactElement} */\n\t\tnewDom,\n\t\t/** @type {PreactElement} */\n\t\tfirstChildDom;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\t/** @type {VNode[]} */\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet newChildrenLength = renderResult.length;\n\n\tnewParentVNode._nextDom = oldDom;\n\tconstructNewChildrenArray(newParentVNode, renderResult, oldChildren);\n\toldDom = newParentVNode._nextDom;\n\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\tchildVNode = newParentVNode._children[i];\n\t\tif (childVNode == null) continue;\n\n\t\t// At this point, constructNewChildrenArray has assigned _index to be the\n\t\t// matchingIndex for this VNode's oldVNode (or -1 if there is no oldVNode).\n\t\tif (childVNode._index === -1) {\n\t\t\toldVNode = EMPTY_OBJ;\n\t\t} else {\n\t\t\toldVNode = oldChildren[childVNode._index] || EMPTY_OBJ;\n\t\t}\n\n\t\t// Update childVNode._index to its final index\n\t\tchildVNode._index = i;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\n\t\t// Adjust DOM nodes\n\t\tnewDom = childVNode._dom;\n\t\tif (childVNode.ref && oldVNode.ref != childVNode.ref) {\n\t\t\tif (oldVNode.ref) {\n\t\t\t\tapplyRef(oldVNode.ref, null, childVNode);\n\t\t\t}\n\t\t\trefQueue.push(\n\t\t\t\tchildVNode.ref,\n\t\t\t\tchildVNode._component || newDom,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t}\n\n\t\tif (firstChildDom == null && newDom != null) {\n\t\t\tfirstChildDom = newDom;\n\t\t}\n\n\t\tif (\n\t\t\tchildVNode._flags & INSERT_VNODE ||\n\t\t\toldVNode._children === childVNode._children\n\t\t) {\n\t\t\toldDom = insert(childVNode, oldDom, parentDom);\n\t\t} else if (\n\t\t\ttypeof childVNode.type == 'function' &&\n\t\t\tchildVNode._nextDom !== undefined\n\t\t) {\n\t\t\t// Since Fragments or components that return Fragment like VNodes can\n\t\t\t// contain multiple DOM nodes as the same level, continue the diff from\n\t\t\t// the sibling of last DOM child of this child VNode\n\t\t\toldDom = childVNode._nextDom;\n\t\t} else if (newDom) {\n\t\t\toldDom = newDom.nextSibling;\n\t\t}\n\n\t\t// Eagerly cleanup _nextDom. We don't need to persist the value because it\n\t\t// is only used by `diffChildren` to determine where to resume the diff\n\t\t// after diffing Components and Fragments. Once we store it the nextDOM\n\t\t// local var, we can clean up the property. Also prevents us hanging on to\n\t\t// DOM nodes that may have been unmounted.\n\t\tchildVNode._nextDom = undefined;\n\n\t\t// Unset diffing flags\n\t\tchildVNode._flags &= ~(INSERT_VNODE | MATCHED);\n\t}\n\n\t// TODO: With new child diffing algo, consider alt ways to diff Fragments.\n\t// Such as dropping oldDom and moving fragments in place\n\t//\n\t// Because the newParentVNode is Fragment-like, we need to set it's\n\t// _nextDom property to the nextSibling of its last child DOM node.\n\t//\n\t// `oldDom` contains the correct value here because if the last child\n\t// is a Fragment-like, then oldDom has already been set to that child's _nextDom.\n\t// If the last child is a DOM VNode, then oldDom will be set to that DOM\n\t// node's nextSibling.\n\tnewParentVNode._nextDom = oldDom;\n\tnewParentVNode._dom = firstChildDom;\n}\n\n/**\n * @param {VNode} newParentVNode\n * @param {ComponentChildren[]} renderResult\n * @param {VNode[]} oldChildren\n */\nfunction constructNewChildrenArray(newParentVNode, renderResult, oldChildren) {\n\t/** @type {number} */\n\tlet i;\n\t/** @type {VNode} */\n\tlet childVNode;\n\t/** @type {VNode} */\n\tlet oldVNode;\n\n\tconst newChildrenLength = renderResult.length;\n\tlet oldChildrenLength = oldChildren.length,\n\t\tremainingOldChildren = oldChildrenLength;\n\n\tlet skew = 0;\n\n\tnewParentVNode._children = [];\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\t// @ts-expect-error We are reusing the childVNode variable to hold both the\n\t\t// pre and post normalized childVNode\n\t\tchildVNode = renderResult[i];\n\n\t\tif (\n\t\t\tchildVNode == null ||\n\t\t\ttypeof childVNode == 'boolean' ||\n\t\t\ttypeof childVNode == 'function'\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = null;\n\t\t\tcontinue;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint' ||\n\t\t\tchildVNode.constructor == String\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tnull,\n\t\t\t\tchildVNode,\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if (isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if (childVNode.constructor === undefined && childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : null,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tchildVNode = newParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\tconst skewedIndex = i + skew;\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Temporarily store the matchingIndex on the _index property so we can pull\n\t\t// out the oldVNode in diffChildren. We'll override this to the VNode's\n\t\t// final index after using this property to get the oldVNode\n\t\tconst matchingIndex = (childVNode._index = findMatchingIndex(\n\t\t\tchildVNode,\n\t\t\toldChildren,\n\t\t\tskewedIndex,\n\t\t\tremainingOldChildren\n\t\t));\n\n\t\toldVNode = null;\n\t\tif (matchingIndex !== -1) {\n\t\t\toldVNode = oldChildren[matchingIndex];\n\t\t\tremainingOldChildren--;\n\t\t\tif (oldVNode) {\n\t\t\t\toldVNode._flags |= MATCHED;\n\t\t\t}\n\t\t}\n\n\t\t// Here, we define isMounting for the purposes of the skew diffing\n\t\t// algorithm. Nodes that are unsuspending are considered mounting and we detect\n\t\t// this by checking if oldVNode._original === null\n\t\tconst isMounting = oldVNode == null || oldVNode._original === null;\n\n\t\tif (isMounting) {\n\t\t\tif (matchingIndex == -1) {\n\t\t\t\tskew--;\n\t\t\t}\n\n\t\t\t// If we are mounting a DOM VNode, mark it for insertion\n\t\t\tif (typeof childVNode.type != 'function') {\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t} else if (matchingIndex !== skewedIndex) {\n\t\t\t// When we move elements around i.e. [0, 1, 2] --> [1, 0, 2]\n\t\t\t// --> we diff 1, we find it at position 1 while our skewed index is 0 and our skew is 0\n\t\t\t//     we set the skew to 1 as we found an offset.\n\t\t\t// --> we diff 0, we find it at position 0 while our skewed index is at 2 and our skew is 1\n\t\t\t//     this makes us increase the skew again.\n\t\t\t// --> we diff 2, we find it at position 2 while our skewed index is at 4 and our skew is 2\n\t\t\t//\n\t\t\t// this becomes an optimization question where currently we see a 1 element offset as an insertion\n\t\t\t// or deletion i.e. we optimize for [0, 1, 2] --> [9, 0, 1, 2]\n\t\t\t// while a more than 1 offset we see as a swap.\n\t\t\t// We could probably build heuristics for having an optimized course of action here as well, but\n\t\t\t// might go at the cost of some bytes.\n\t\t\t//\n\t\t\t// If we wanted to optimize for i.e. only swaps we'd just do the last two code-branches and have\n\t\t\t// only the first item be a re-scouting and all the others fall in their skewed counter-part.\n\t\t\t// We could also further optimize for swaps\n\t\t\tif (matchingIndex == skewedIndex - 1) {\n\t\t\t\tskew--;\n\t\t\t} else if (matchingIndex == skewedIndex + 1) {\n\t\t\t\tskew++;\n\t\t\t} else {\n\t\t\t\tif (matchingIndex > skewedIndex) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\n\t\t\t\t// Move this VNode's DOM if the original index (matchingIndex) doesn't\n\t\t\t\t// match the new skew index (i + new skew)\n\t\t\t\t// In the former two branches we know that it matches after skewing\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any. Loop forwards so that as we\n\t// unmount DOM from the beginning of the oldChildren, we can adjust oldDom to\n\t// point to the next child, which needs to be the first DOM node that won't be\n\t// unmounted.\n\tif (remainingOldChildren) {\n\t\tfor (i = 0; i < oldChildrenLength; i++) {\n\t\t\toldVNode = oldChildren[i];\n\t\t\tif (oldVNode != null && (oldVNode._flags & MATCHED) === 0) {\n\t\t\t\tif (oldVNode._dom == newParentVNode._nextDom) {\n\t\t\t\t\tnewParentVNode._nextDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\n\t\t\t\tunmount(oldVNode, oldVNode);\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * @param {VNode} parentVNode\n * @param {PreactElement} oldDom\n * @param {PreactElement} parentDom\n * @returns {PreactElement}\n */\nfunction insert(parentVNode, oldDom, parentDom) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\n\tif (typeof parentVNode.type == 'function') {\n\t\tlet children = parentVNode._children;\n\t\tfor (let i = 0; children && i < children.length; i++) {\n\t\t\tif (children[i]) {\n\t\t\t\t// If we enter this code path on sCU bailout, where we copy\n\t\t\t\t// oldVNode._children to newVNode._children, we need to update the old\n\t\t\t\t// children's _parent pointer to point to the newVNode (parentVNode\n\t\t\t\t// here).\n\t\t\t\tchildren[i]._parent = parentVNode;\n\t\t\t\toldDom = insert(children[i], oldDom, parentDom);\n\t\t\t}\n\t\t}\n\n\t\treturn oldDom;\n\t} else if (parentVNode._dom != oldDom) {\n\t\tif (oldDom && parentVNode.type && !parentDom.contains(oldDom)) {\n\t\t\toldDom = getDomSibling(parentVNode);\n\t\t}\n\t\tparentDom.insertBefore(parentVNode._dom, oldDom || null);\n\t\toldDom = parentVNode._dom;\n\t}\n\n\tdo {\n\t\toldDom = oldDom && oldDom.nextSibling;\n\t} while (oldDom != null && oldDom.nodeType === 8);\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {ComponentChildren} children The unflattened children of a virtual\n * node\n * @returns {VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == null || typeof children == 'boolean') {\n\t} else if (isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\n/**\n * @param {VNode} childVNode\n * @param {VNode[]} oldChildren\n * @param {number} skewedIndex\n * @param {number} remainingOldChildren\n * @returns {number}\n */\nfunction findMatchingIndex(\n\tchildVNode,\n\toldChildren,\n\tskewedIndex,\n\tremainingOldChildren\n) {\n\tconst key = childVNode.key;\n\tconst type = childVNode.type;\n\tlet x = skewedIndex - 1;\n\tlet y = skewedIndex + 1;\n\tlet oldVNode = oldChildren[skewedIndex];\n\n\t// We only need to perform a search if there are more children\n\t// (remainingOldChildren) to search. However, if the oldVNode we just looked\n\t// at skewedIndex was not already used in this diff, then there must be at\n\t// least 1 other (so greater than 1) remainingOldChildren to attempt to match\n\t// against. So the following condition checks that ensuring\n\t// remainingOldChildren > 1 if the oldVNode is not already used/matched. Else\n\t// if the oldVNode was null or matched, then there could needs to be at least\n\t// 1 (aka `remainingOldChildren > 0`) children to find and compare against.\n\tlet shouldSearch =\n\t\tremainingOldChildren >\n\t\t(oldVNode != null && (oldVNode._flags & MATCHED) === 0 ? 1 : 0);\n\n\tif (\n\t\toldVNode === null ||\n\t\t(oldVNode &&\n\t\t\tkey == oldVNode.key &&\n\t\t\ttype === oldVNode.type &&\n\t\t\t(oldVNode._flags & MATCHED) === 0)\n\t) {\n\t\treturn skewedIndex;\n\t} else if (shouldSearch) {\n\t\twhile (x >= 0 || y < oldChildren.length) {\n\t\t\tif (x >= 0) {\n\t\t\t\toldVNode = oldChildren[x];\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\t(oldVNode._flags & MATCHED) === 0 &&\n\t\t\t\t\tkey == oldVNode.key &&\n\t\t\t\t\ttype === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\treturn x;\n\t\t\t\t}\n\t\t\t\tx--;\n\t\t\t}\n\n\t\t\tif (y < oldChildren.length) {\n\t\t\t\toldVNode = oldChildren[y];\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\t(oldVNode._flags & MATCHED) === 0 &&\n\t\t\t\t\tkey == oldVNode.key &&\n\t\t\t\t\ttype === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\treturn y;\n\t\t\t\t}\n\t\t\t\ty++;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn -1;\n}\n", "import {\n\tEMPTY_OBJ,\n\tMODE_HYDRATE,\n\tMODE_SUSPENDED,\n\tRESET_MODE\n} from '../constants';\nimport { BaseComponent, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { setProperty } from './props';\nimport { assign, isArray, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {PreactElement} parentDom The parent of the DOM element\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\t/** @type {any} */\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== undefined) return null;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._flags & MODE_SUSPENDED) {\n\t\tisHydrating = !!(oldVNode._flags & MODE_HYDRATE);\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\touter: if (typeof newType == 'function') {\n\t\ttry {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\t\t\tconst isClassComponent =\n\t\t\t\t'prototype' in newType && newType.prototype.render;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif (isClassComponent) {\n\t\t\t\t\t// @ts-expect-error The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-expect-error Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new BaseComponent(\n\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (isClassComponent && c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (isClassComponent && newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\t\t\tc._vnode = newVNode;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!c._force &&\n\t\t\t\t\t((c.shouldComponentUpdate != null &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false) ||\n\t\t\t\t\t\tnewVNode._original === oldVNode._original)\n\t\t\t\t) {\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original !== oldVNode._original) {\n\t\t\t\t\t\t// When we are dealing with a bail because of sCU we have to update\n\t\t\t\t\t\t// the props, state and dirty-state.\n\t\t\t\t\t\t// when we are dealing with strict-equality we don't as the child could still\n\t\t\t\t\t\t// be dirtied see #3883\n\t\t\t\t\t\tc.props = newProps;\n\t\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t\tc._dirty = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.some(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._parentDom = parentDom;\n\t\t\tc._force = false;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif (isClassComponent) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (isClassComponent && !isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type === Fragment && tmp.key == null;\n\t\t\tlet renderResult = isTopLevelFragment ? tmp.props.children : tmp;\n\n\t\t\tdiffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tisArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnamespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._flags &= RESET_MODE;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tnewVNode._original = null;\n\t\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\t\tif (isHydrating || excessDomChildren != null) {\n\t\t\t\tnewVNode._flags |= isHydrating\n\t\t\t\t\t? MODE_HYDRATE | MODE_SUSPENDED\n\t\t\t\t\t: MODE_SUSPENDED;\n\n\t\t\t\twhile (oldDom && oldDom.nodeType === 8 && oldDom.nextSibling) {\n\t\t\t\t\toldDom = oldDom.nextSibling;\n\t\t\t\t}\n\t\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = null;\n\t\t\t\tnewVNode._dom = oldDom;\n\t\t\t} else {\n\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t}\n\t\t\toptions._catchError(e, newVNode, oldVNode);\n\t\t}\n\t} else if (\n\t\texcessDomChildren == null &&\n\t\tnewVNode._original === oldVNode._original\n\t) {\n\t\tnewVNode._children = oldVNode._children;\n\t\tnewVNode._dom = oldVNode._dom;\n\t} else {\n\t\tnewVNode._dom = diffElementNodes(\n\t\t\toldVNode._dom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\t}\n\n\tif ((tmp = options.diffed)) tmp(newVNode);\n}\n\n/**\n * @param {Array<Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {VNode} root\n */\nexport function commitRoot(commitQueue, root, refQueue) {\n\troot._nextDom = undefined;\n\n\tfor (let i = 0; i < refQueue.length; i++) {\n\t\tapplyRef(refQueue[i], refQueue[++i], refQueue[++i]);\n\t}\n\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-expect-error Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-expect-error See above comment on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {PreactElement} dom The DOM element representing the virtual nodes\n * being diffed\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n * @returns {PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating,\n\trefQueue\n) {\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\tlet nodeType = /** @type {string} */ (newVNode.type);\n\t/** @type {any} */\n\tlet i;\n\t/** @type {{ __html?: string }} */\n\tlet newHtml;\n\t/** @type {{ __html?: string }} */\n\tlet oldHtml;\n\t/** @type {ComponentChildren} */\n\tlet newChildren;\n\tlet value;\n\tlet inputValue;\n\tlet checked;\n\n\t// Tracks entering and exiting namespaces when descending through the tree.\n\tif (nodeType === 'svg') namespace = 'http://www.w3.org/2000/svg';\n\telse if (nodeType === 'math')\n\t\tnamespace = 'http://www.w3.org/1998/Math/MathML';\n\telse if (!namespace) namespace = 'http://www.w3.org/1999/xhtml';\n\n\tif (excessDomChildren != null) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tvalue = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tvalue &&\n\t\t\t\t'setAttribute' in value === !!nodeType &&\n\t\t\t\t(nodeType ? value.localName === nodeType : value.nodeType === 3)\n\t\t\t) {\n\t\t\t\tdom = value;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (nodeType === null) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tdom = document.createElementNS(\n\t\t\tnamespace,\n\t\t\tnodeType,\n\t\t\tnewProps.is && newProps\n\t\t);\n\n\t\t// we are creating a new node, so we can assume this is a new subtree (in\n\t\t// case we are hydrating), this deopts the hydrate\n\t\tif (isHydrating) {\n\t\t\tif (options._hydrationMismatch)\n\t\t\t\toptions._hydrationMismatch(newVNode, excessDomChildren);\n\t\t\tisHydrating = false;\n\t\t}\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t}\n\n\tif (nodeType === null) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data !== newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\t// If we are in a situation where we are not hydrating but are using\n\t\t// existing DOM (e.g. replaceNode) we should read the existing DOM\n\t\t// attributes to diff them\n\t\tif (!isHydrating && excessDomChildren != null) {\n\t\t\toldProps = {};\n\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\tvalue = dom.attributes[i];\n\t\t\t\toldProps[value.name] = value.value;\n\t\t\t}\n\t\t}\n\n\t\tfor (i in oldProps) {\n\t\t\tvalue = oldProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\toldHtml = value;\n\t\t\t} else if (!(i in newProps)) {\n\t\t\t\tif (\n\t\t\t\t\t(i == 'value' && 'defaultValue' in newProps) ||\n\t\t\t\t\t(i == 'checked' && 'defaultChecked' in newProps)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tsetProperty(dom, i, null, value, namespace);\n\t\t\t}\n\t\t}\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tfor (i in newProps) {\n\t\t\tvalue = newProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t\tnewChildren = value;\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\tnewHtml = value;\n\t\t\t} else if (i == 'value') {\n\t\t\t\tinputValue = value;\n\t\t\t} else if (i == 'checked') {\n\t\t\t\tchecked = value;\n\t\t\t} else if (\n\t\t\t\t(!isHydrating || typeof value == 'function') &&\n\t\t\t\toldProps[i] !== value\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, value, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\tif (\n\t\t\t\t!isHydrating &&\n\t\t\t\t(!oldHtml ||\n\t\t\t\t\t(newHtml.__html !== oldHtml.__html &&\n\t\t\t\t\t\tnewHtml.__html !== dom.innerHTML))\n\t\t\t) {\n\t\t\t\tdom.innerHTML = newHtml.__html;\n\t\t\t}\n\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\tif (oldHtml) dom.innerHTML = '';\n\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tisArray(newChildren) ? newChildren : [newChildren],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnodeType === 'foreignObject'\n\t\t\t\t\t? 'http://www.w3.org/1999/xhtml'\n\t\t\t\t\t: namespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// As above, don't diff props during hydration\n\t\tif (!isHydrating) {\n\t\t\ti = 'value';\n\t\t\tif (nodeType === 'progress' && inputValue == null) {\n\t\t\t\tdom.removeAttribute('value');\n\t\t\t} else if (\n\t\t\t\tinputValue !== undefined &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(inputValue !== dom[i] ||\n\t\t\t\t\t(nodeType === 'progress' && !inputValue) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType === 'option' && inputValue !== oldProps[i]))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, inputValue, oldProps[i], namespace);\n\t\t\t}\n\n\t\t\ti = 'checked';\n\t\t\tif (checked !== undefined && checked !== dom[i]) {\n\t\t\t\tsetProperty(dom, i, checked, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {Ref<any> & { _unmount?: unknown }} ref\n * @param {any} value\n * @param {VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') {\n\t\t\tlet hasRefUnmount = typeof ref._unmount == 'function';\n\t\t\tif (hasRefUnmount) {\n\t\t\t\t// @ts-ignore TS doesn't like moving narrowing checks into variables\n\t\t\t\tref._unmount();\n\t\t\t}\n\n\t\t\tif (!hasRefUnmount || value != null) {\n\t\t\t\t// Store the cleanup function on the function\n\t\t\t\t// instance object itself to avoid shape\n\t\t\t\t// transitioning vnode\n\t\t\t\tref._unmount = ref(value);\n\t\t\t}\n\t\t} else ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {VNode} vnode The virtual node to unmount\n * @param {VNode} parentVNode The parent of the VNode that initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current === vnode._dom) {\n\t\t\tapplyRef(r, null, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type != 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\t// Must be set to `undefined` to properly clean up `_nextDom`\n\t// for which `null` is a valid value. See comment in `create-element.js`\n\tvnode._component = vnode._parent = vnode._dom = vnode._nextDom = undefined;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n", "import { EMPTY_OBJ } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {ComponentChild} vnode The virtual node to render\n * @param {PreactElement} parentDom The DOM element to render into\n * @param {PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode == 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = ((!isHydrating && replaceNode) || parentDom)._children =\n\t\tcreateElement(Fragment, null, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [],\n\t\trefQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.namespaceURI,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t\t? null\n\t\t\t\t: parentDom.firstChild\n\t\t\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t\t\t: null,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t\t? oldVNode._dom\n\t\t\t\t: parentDom.firstChild,\n\t\tisHydrating,\n\t\trefQueue\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode, refQueue);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {ComponentChild} vnode The virtual node to render\n * @param {PreactElement} parentDom The DOM element to update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n", "import { assign, slice } from './util';\nimport { createVNode } from './create-element';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its\n * children.\n * @param {VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<ComponentChildren>} rest Any additional arguments will be used\n * as replacement children.\n * @returns {VNode}\n */\nexport function cloneElement(vnode, props, children) {\n\tlet normalizedProps = assign({}, vnode.props),\n\t\tkey,\n\t\tref,\n\t\ti;\n\n\tlet defaultProps;\n\n\tif (vnode.type && vnode.type.defaultProps) {\n\t\tdefaultProps = vnode.type.defaultProps;\n\t}\n\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse if (props[i] === undefined && defaultProps !== undefined) {\n\t\t\tnormalizedProps[i] = defaultProps[i];\n\t\t} else {\n\t\t\tnormalizedProps[i] = props[i];\n\t\t}\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\treturn createVNode(\n\t\tvnode.type,\n\t\tnormalizedProps,\n\t\tkey || vnode.key,\n\t\tref || vnode.ref,\n\t\tnull\n\t);\n}\n", "/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {VNode} vnode The vnode that threw the error that was caught (except\n * for unmounting when this parameter is the highest parent that was being\n * unmounted)\n * @param {VNode} [oldVNode]\n * @param {ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {Component} */\n\tlet component,\n\t\t/** @type {ComponentType} */\n\t\tctor,\n\t\t/** @type {boolean} */\n\t\thandled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != null) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != null) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n", "export const VOID_ELEMENTS = /^(?:area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/;\nexport const UNSAFE_NAME = /[\\s\\n\\\\/='\"\\0<>]/;\nexport const NAMESPACE_REPLACE_REGEX = /^(xlink|xmlns|xml)([A-Z])/;\nexport const HTML_LOWER_CASE = /^accessK|^auto[A-Z]|^cell|^ch|^col|cont|cross|dateT|encT|form[A-Z]|frame|hrefL|inputM|maxL|minL|noV|playsI|popoverT|readO|rowS|src[A-Z]|tabI|useM|item[A-Z]/;\nexport const SVG_CAMEL_CASE = /^ac|^ali|arabic|basel|cap|clipPath$|clipRule$|color|dominant|enable|fill|flood|font|glyph[^R]|horiz|image|letter|lighting|marker[^WUH]|overline|panose|pointe|paint|rendering|shape|stop|strikethrough|stroke|text[^L]|transform|underline|unicode|units|^v[^i]|^w|^xH/;\n\n// Boolean DOM properties that translate to enumerated ('true'/'false') attributes\nexport const HTML_ENUMERATED = new Set(['draggable', 'spellcheck']);\n\n// DOM properties that should NOT have \"px\" added when numeric\nconst ENCODED_ENTITIES = /[\"&<]/;\n\n/** @param {string} str */\nexport function encodeEntities(str) {\n\t// Skip all work for strings with no entities needing encoding:\n\tif (str.length === 0 || ENCODED_ENTITIES.test(str) === false) return str;\n\n\tlet last = 0,\n\t\ti = 0,\n\t\tout = '',\n\t\tch = '';\n\n\t// Seek forward in str until the next entity char:\n\tfor (; i < str.length; i++) {\n\t\tswitch (str.charCodeAt(i)) {\n\t\t\tcase 34:\n\t\t\t\tch = '&quot;';\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\tch = '&amp;';\n\t\t\t\tbreak;\n\t\t\tcase 60:\n\t\t\t\tch = '&lt;';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcontinue;\n\t\t}\n\t\t// Append skipped/buffered characters and the encoded entity:\n\t\tif (i !== last) out = out + str.slice(last, i);\n\t\tout = out + ch;\n\t\t// Start the next seek/buffer after the entity's offset:\n\t\tlast = i + 1;\n\t}\n\tif (i !== last) out = out + str.slice(last, i);\n\treturn out;\n}\n\nexport let indent = (s, char) =>\n\tString(s).replace(/(\\n+)/g, '$1' + (char || '\\t'));\n\nexport let isLargeString = (s, length, ignoreLines) =>\n\tString(s).length > (length || 40) ||\n\t(!ignoreLines && String(s).indexOf('\\n') !== -1) ||\n\tString(s).indexOf('<') !== -1;\n\nconst JS_TO_CSS = {};\n\nconst IS_NON_DIMENSIONAL = new Set([\n\t'animation-iteration-count',\n\t'border-image-outset',\n\t'border-image-slice',\n\t'border-image-width',\n\t'box-flex',\n\t'box-flex-group',\n\t'box-ordinal-group',\n\t'column-count',\n\t'fill-opacity',\n\t'flex',\n\t'flex-grow',\n\t'flex-negative',\n\t'flex-order',\n\t'flex-positive',\n\t'flex-shrink',\n\t'flood-opacity',\n\t'font-weight',\n\t'grid-column',\n\t'grid-row',\n\t'line-clamp',\n\t'line-height',\n\t'opacity',\n\t'order',\n\t'orphans',\n\t'stop-opacity',\n\t'stroke-dasharray',\n\t'stroke-dashoffset',\n\t'stroke-miterlimit',\n\t'stroke-opacity',\n\t'stroke-width',\n\t'tab-size',\n\t'widows',\n\t'z-index',\n\t'zoom'\n]);\n\nconst CSS_REGEX = /[A-Z]/g;\n// Convert an Object style to a CSSText string\nexport function styleObjToCss(s) {\n\tlet str = '';\n\tfor (let prop in s) {\n\t\tlet val = s[prop];\n\t\tif (val != null && val !== '') {\n\t\t\tconst name =\n\t\t\t\tprop[0] == '-'\n\t\t\t\t\t? prop\n\t\t\t\t\t: JS_TO_CSS[prop] ||\n\t\t\t\t\t  (JS_TO_CSS[prop] = prop.replace(CSS_REGEX, '-$&').toLowerCase());\n\n\t\t\tlet suffix = ';';\n\t\t\tif (\n\t\t\t\ttypeof val === 'number' &&\n\t\t\t\t// Exclude custom-attributes\n\t\t\t\t!name.startsWith('--') &&\n\t\t\t\t!IS_NON_DIMENSIONAL.has(name)\n\t\t\t) {\n\t\t\t\tsuffix = 'px;';\n\t\t\t}\n\t\t\tstr = str + name + ':' + val + suffix;\n\t\t}\n\t}\n\treturn str || undefined;\n}\n\n/**\n * Get flattened children from the children prop\n * @param {Array} accumulator\n * @param {any} children A `props.children` opaque object.\n * @returns {Array} accumulator\n * @private\n */\nexport function getChildren(accumulator, children) {\n\tif (Array.isArray(children)) {\n\t\tchildren.reduce(getChildren, accumulator);\n\t} else if (children != null && children !== false) {\n\t\taccumulator.push(children);\n\t}\n\treturn accumulator;\n}\n\nfunction markAsDirty() {\n\tthis.__d = true;\n}\n\nexport function createComponent(vnode, context) {\n\treturn {\n\t\t__v: vnode,\n\t\tcontext,\n\t\tprops: vnode.props,\n\t\t// silently drop state updates\n\t\tsetState: markAsDirty,\n\t\tforceUpdate: markAsDirty,\n\t\t__d: true,\n\t\t// hooks\n\t\t__h: new Array(0)\n\t};\n}\n\n// Necessary for createContext api. Setting this property will pass\n// the context value as `this.context` just for this component.\nexport function getContext(nodeName, context) {\n\tlet cxType = nodeName.contextType;\n\tlet provider = cxType && context[cxType.__c];\n\treturn cxType != null\n\t\t? provider\n\t\t\t? provider.props.value\n\t\t\t: cxType.__\n\t\t: context;\n}\n\n/**\n * @template T\n */\nexport class Deferred {\n\tconstructor() {\n\t\t// eslint-disable-next-line lines-around-comment\n\t\t/** @type {Promise<T>} */\n\t\tthis.promise = new Promise((resolve, reject) => {\n\t\t\tthis.resolve = resolve;\n\t\t\tthis.reject = reject;\n\t\t});\n\t}\n}\n", "import {\n\tencodeEntities,\n\tstyleObjToCss,\n\tUNSAFE_NAME,\n\tNAMESPACE_REPLACE_REGEX,\n\tHTML_LOWER_CASE,\n\tHTML_ENUMERATED,\n\tSVG_CAMEL_CASE,\n\tcreateComponent\n} from './lib/util.js';\nimport { options, h, Fragment } from 'preact';\nimport {\n\tCHILDREN,\n\tCOMMIT,\n\tCOMPONENT,\n\tDIFF,\n\tDIFFED,\n\tDIRTY,\n\tNEXT_STATE,\n\tPARENT,\n\tRENDER,\n\tSKIP_EFFECTS,\n\tVNODE,\n\tCATCH_ERROR\n} from './lib/constants.js';\n\nconst EMPTY_OBJ = {};\nconst EMPTY_ARR = [];\nconst isArray = Array.isArray;\nconst assign = Object.assign;\nconst EMPTY_STR = '';\n\n// Global state for the current render pass\nlet beforeDiff, afterDiff, renderHook, ummountHook;\n\n/**\n * Render Preact JSX + Components to an HTML string.\n * @param {VNode} vnode\tJSX Element / VNode to render\n * @param {Object} [context={}] Initial root context object\n * @param {RendererState} [_rendererState] for internal use\n * @returns {string} serialized HTML\n */\nexport function renderToString(vnode, context, _rendererState) {\n\t// Performance optimization: `renderToString` is synchronous and we\n\t// therefore don't execute any effects. To do that we pass an empty\n\t// array to `options._commit` (`__c`). But we can go one step further\n\t// and avoid a lot of dirty checks and allocations by setting\n\t// `options._skipEffects` (`__s`) too.\n\tconst previousSkipEffects = options[SKIP_EFFECTS];\n\toptions[SKIP_EFFECTS] = true;\n\n\t// store options hooks once before each synchronous render call\n\tbeforeDiff = options[DIFF];\n\tafterDiff = options[DIFFED];\n\trenderHook = options[RENDER];\n\tummountHook = options.unmount;\n\n\tconst parent = h(Fragment, null);\n\tparent[CHILDREN] = [vnode];\n\n\ttry {\n\t\tconst rendered = _renderToString(\n\t\t\tvnode,\n\t\t\tcontext || EMPTY_OBJ,\n\t\t\tfalse,\n\t\t\tundefined,\n\t\t\tparent,\n\t\t\tfalse,\n\t\t\t_rendererState\n\t\t);\n\n\t\tif (isArray(rendered)) {\n\t\t\treturn rendered.join(EMPTY_STR);\n\t\t}\n\t\treturn rendered;\n\t} catch (e) {\n\t\tif (e.then) {\n\t\t\tthrow new Error('Use \"renderToStringAsync\" for suspenseful rendering.');\n\t\t}\n\n\t\tthrow e;\n\t} finally {\n\t\t// options._commit, we don't schedule any effects in this library right now,\n\t\t// so we can pass an empty queue to this hook.\n\t\tif (options[COMMIT]) options[COMMIT](vnode, EMPTY_ARR);\n\t\toptions[SKIP_EFFECTS] = previousSkipEffects;\n\t\tEMPTY_ARR.length = 0;\n\t}\n}\n\n/**\n * Render Preact JSX + Components to an HTML string.\n * @param {VNode} vnode\tJSX Element / VNode to render\n * @param {Object} [context={}] Initial root context object\n * @returns {string} serialized HTML\n */\nexport async function renderToStringAsync(vnode, context) {\n\t// Performance optimization: `renderToString` is synchronous and we\n\t// therefore don't execute any effects. To do that we pass an empty\n\t// array to `options._commit` (`__c`). But we can go one step further\n\t// and avoid a lot of dirty checks and allocations by setting\n\t// `options._skipEffects` (`__s`) too.\n\tconst previousSkipEffects = options[SKIP_EFFECTS];\n\toptions[SKIP_EFFECTS] = true;\n\n\t// store options hooks once before each synchronous render call\n\tbeforeDiff = options[DIFF];\n\tafterDiff = options[DIFFED];\n\trenderHook = options[RENDER];\n\tummountHook = options.unmount;\n\n\tconst parent = h(Fragment, null);\n\tparent[CHILDREN] = [vnode];\n\n\ttry {\n\t\tconst rendered = await _renderToString(\n\t\t\tvnode,\n\t\t\tcontext || EMPTY_OBJ,\n\t\t\tfalse,\n\t\t\tundefined,\n\t\t\tparent,\n\t\t\ttrue,\n\t\t\tundefined\n\t\t);\n\n\t\tif (isArray(rendered)) {\n\t\t\tlet count = 0;\n\t\t\tlet resolved = rendered;\n\n\t\t\t// Resolving nested Promises with a maximum depth of 25\n\t\t\twhile (\n\t\t\t\tresolved.some(\n\t\t\t\t\t(element) => element && typeof element.then === 'function'\n\t\t\t\t) &&\n\t\t\t\tcount++ < 25\n\t\t\t) {\n\t\t\t\tresolved = (await Promise.all(resolved)).flat();\n\t\t\t}\n\n\t\t\treturn resolved.join(EMPTY_STR);\n\t\t}\n\n\t\treturn rendered;\n\t} finally {\n\t\t// options._commit, we don't schedule any effects in this library right now,\n\t\t// so we can pass an empty queue to this hook.\n\t\tif (options[COMMIT]) options[COMMIT](vnode, EMPTY_ARR);\n\t\toptions[SKIP_EFFECTS] = previousSkipEffects;\n\t\tEMPTY_ARR.length = 0;\n\t}\n}\n\n/**\n * @param {VNode} vnode\n * @param {Record<string, unknown>} context\n */\nfunction renderClassComponent(vnode, context) {\n\tlet type = /** @type {import(\"preact\").ComponentClass<typeof vnode.props>} */ (vnode.type);\n\n\tlet isMounting = true;\n\tlet c;\n\tif (vnode[COMPONENT]) {\n\t\tisMounting = false;\n\t\tc = vnode[COMPONENT];\n\t\tc.state = c[NEXT_STATE];\n\t} else {\n\t\tc = new type(vnode.props, context);\n\t}\n\n\tvnode[COMPONENT] = c;\n\tc[VNODE] = vnode;\n\n\tc.props = vnode.props;\n\tc.context = context;\n\t// turn off stateful re-rendering:\n\tc[DIRTY] = true;\n\n\tif (c.state == null) c.state = EMPTY_OBJ;\n\n\tif (c[NEXT_STATE] == null) {\n\t\tc[NEXT_STATE] = c.state;\n\t}\n\n\tif (type.getDerivedStateFromProps) {\n\t\tc.state = assign(\n\t\t\t{},\n\t\t\tc.state,\n\t\t\ttype.getDerivedStateFromProps(c.props, c.state)\n\t\t);\n\t} else if (isMounting && c.componentWillMount) {\n\t\tc.componentWillMount();\n\n\t\t// If the user called setState in cWM we need to flush pending,\n\t\t// state updates. This is the same behaviour in React.\n\t\tc.state = c[NEXT_STATE] !== c.state ? c[NEXT_STATE] : c.state;\n\t} else if (!isMounting && c.componentWillUpdate) {\n\t\tc.componentWillUpdate();\n\t}\n\n\tif (renderHook) renderHook(vnode);\n\n\treturn c.render(c.props, c.state, context);\n}\n\n/**\n * Recursively render VNodes to HTML.\n * @param {VNode|any} vnode\n * @param {any} context\n * @param {boolean} isSvgMode\n * @param {any} selectValue\n * @param {VNode} parent\n * @param {boolean} asyncMode\n * @param {RendererState | undefined} [renderer]\n * @returns {string | Promise<string> | (string | Promise<string>)[]}\n */\nfunction _renderToString(\n\tvnode,\n\tcontext,\n\tisSvgMode,\n\tselectValue,\n\tparent,\n\tasyncMode,\n\trenderer\n) {\n\t// Ignore non-rendered VNodes/values\n\tif (\n\t\tvnode == null ||\n\t\tvnode === true ||\n\t\tvnode === false ||\n\t\tvnode === EMPTY_STR\n\t) {\n\t\treturn EMPTY_STR;\n\t}\n\n\tlet vnodeType = typeof vnode;\n\t// Text VNodes: escape as HTML\n\tif (vnodeType != 'object') {\n\t\tif (vnodeType == 'function') return EMPTY_STR;\n\t\treturn vnodeType == 'string' ? encodeEntities(vnode) : vnode + EMPTY_STR;\n\t}\n\n\t// Recurse into children / Arrays\n\tif (isArray(vnode)) {\n\t\tlet rendered = EMPTY_STR,\n\t\t\trenderArray;\n\t\tparent[CHILDREN] = vnode;\n\t\tfor (let i = 0; i < vnode.length; i++) {\n\t\t\tlet child = vnode[i];\n\t\t\tif (child == null || typeof child == 'boolean') continue;\n\n\t\t\tconst childRender = _renderToString(\n\t\t\t\tchild,\n\t\t\t\tcontext,\n\t\t\t\tisSvgMode,\n\t\t\t\tselectValue,\n\t\t\t\tparent,\n\t\t\t\tasyncMode,\n\t\t\t\trenderer\n\t\t\t);\n\n\t\t\tif (typeof childRender == 'string') {\n\t\t\t\trendered = rendered + childRender;\n\t\t\t} else {\n\t\t\t\tif (!renderArray) {\n\t\t\t\t\trenderArray = [];\n\t\t\t\t}\n\n\t\t\t\tif (rendered) renderArray.push(rendered);\n\n\t\t\t\trendered = EMPTY_STR;\n\n\t\t\t\tif (isArray(childRender)) {\n\t\t\t\t\trenderArray.push(...childRender);\n\t\t\t\t} else {\n\t\t\t\t\trenderArray.push(childRender);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (renderArray) {\n\t\t\tif (rendered) renderArray.push(rendered);\n\t\t\treturn renderArray;\n\t\t}\n\n\t\treturn rendered;\n\t}\n\n\t// VNodes have {constructor:undefined} to prevent JSON injection:\n\tif (vnode.constructor !== undefined) return EMPTY_STR;\n\n\tvnode[PARENT] = parent;\n\tif (beforeDiff) beforeDiff(vnode);\n\n\tlet type = vnode.type,\n\t\tprops = vnode.props;\n\n\t// Invoke rendering on Components\n\tif (typeof type == 'function') {\n\t\tlet cctx = context,\n\t\t\tcontextType,\n\t\t\trendered,\n\t\t\tcomponent;\n\t\tif (type === Fragment) {\n\t\t\t// Serialized precompiled JSX.\n\t\t\tif ('tpl' in props) {\n\t\t\t\tlet out = EMPTY_STR;\n\t\t\t\tfor (let i = 0; i < props.tpl.length; i++) {\n\t\t\t\t\tout = out + props.tpl[i];\n\n\t\t\t\t\tif (props.exprs && i < props.exprs.length) {\n\t\t\t\t\t\tconst value = props.exprs[i];\n\t\t\t\t\t\tif (value == null) continue;\n\n\t\t\t\t\t\t// Check if we're dealing with a vnode or an array of nodes\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\ttypeof value == 'object' &&\n\t\t\t\t\t\t\t(value.constructor === undefined || isArray(value))\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tout =\n\t\t\t\t\t\t\t\tout +\n\t\t\t\t\t\t\t\t_renderToString(\n\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\t\t\tisSvgMode,\n\t\t\t\t\t\t\t\t\tselectValue,\n\t\t\t\t\t\t\t\t\tvnode,\n\t\t\t\t\t\t\t\t\tasyncMode,\n\t\t\t\t\t\t\t\t\trenderer\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Values are pre-escaped by the JSX transform\n\t\t\t\t\t\t\tout = out + value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn out;\n\t\t\t} else if ('UNSTABLE_comment' in props) {\n\t\t\t\t// Fragments are the least used components of core that's why\n\t\t\t\t// branching here for comments has the least effect on perf.\n\t\t\t\treturn '<!--' + encodeEntities(props.UNSTABLE_comment) + '-->';\n\t\t\t}\n\n\t\t\trendered = props.children;\n\t\t} else {\n\t\t\tcontextType = type.contextType;\n\t\t\tif (contextType != null) {\n\t\t\t\tlet provider = context[contextType.__c];\n\t\t\t\tcctx = provider ? provider.props.value : contextType.__;\n\t\t\t}\n\n\t\t\tlet isClassComponent =\n\t\t\t\ttype.prototype && typeof type.prototype.render == 'function';\n\t\t\tif (isClassComponent) {\n\t\t\t\trendered = /**#__NOINLINE__**/ renderClassComponent(vnode, cctx);\n\t\t\t\tcomponent = vnode[COMPONENT];\n\t\t\t} else {\n\t\t\t\tvnode[COMPONENT] = component = /**#__NOINLINE__**/ createComponent(\n\t\t\t\t\tvnode,\n\t\t\t\t\tcctx\n\t\t\t\t);\n\n\t\t\t\t// If a hook invokes setState() to invalidate the component during rendering,\n\t\t\t\t// re-render it up to 25 times to allow \"settling\" of memoized states.\n\t\t\t\t// Note:\n\t\t\t\t//   This will need to be updated for Preact 11 to use internal.flags rather than component._dirty:\n\t\t\t\t//   https://github.com/preactjs/preact/blob/d4ca6fdb19bc715e49fd144e69f7296b2f4daa40/src/diff/component.js#L35-L44\n\t\t\t\tlet count = 0;\n\t\t\t\twhile (component[DIRTY] && count++ < 25) {\n\t\t\t\t\tcomponent[DIRTY] = false;\n\n\t\t\t\t\tif (renderHook) renderHook(vnode);\n\n\t\t\t\t\trendered = type.call(component, props, cctx);\n\t\t\t\t}\n\t\t\t\tcomponent[DIRTY] = true;\n\t\t\t}\n\n\t\t\tif (component.getChildContext != null) {\n\t\t\t\tcontext = assign({}, context, component.getChildContext());\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tisClassComponent &&\n\t\t\t\toptions.errorBoundaries &&\n\t\t\t\t(type.getDerivedStateFromError || component.componentDidCatch)\n\t\t\t) {\n\t\t\t\t// When a component returns a Fragment node we flatten it in core, so we\n\t\t\t\t// need to mirror that logic here too\n\t\t\t\tlet isTopLevelFragment =\n\t\t\t\t\trendered != null &&\n\t\t\t\t\trendered.type === Fragment &&\n\t\t\t\t\trendered.key == null &&\n\t\t\t\t\trendered.props.tpl == null;\n\t\t\t\trendered = isTopLevelFragment ? rendered.props.children : rendered;\n\n\t\t\t\ttry {\n\t\t\t\t\treturn _renderToString(\n\t\t\t\t\t\trendered,\n\t\t\t\t\t\tcontext,\n\t\t\t\t\t\tisSvgMode,\n\t\t\t\t\t\tselectValue,\n\t\t\t\t\t\tvnode,\n\t\t\t\t\t\tasyncMode,\n\t\t\t\t\t\trenderer\n\t\t\t\t\t);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tif (type.getDerivedStateFromError) {\n\t\t\t\t\t\tcomponent[NEXT_STATE] = type.getDerivedStateFromError(err);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (component.componentDidCatch) {\n\t\t\t\t\t\tcomponent.componentDidCatch(err, EMPTY_OBJ);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (component[DIRTY]) {\n\t\t\t\t\t\trendered = renderClassComponent(vnode, context);\n\t\t\t\t\t\tcomponent = vnode[COMPONENT];\n\n\t\t\t\t\t\tif (component.getChildContext != null) {\n\t\t\t\t\t\t\tcontext = assign({}, context, component.getChildContext());\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet isTopLevelFragment =\n\t\t\t\t\t\t\trendered != null &&\n\t\t\t\t\t\t\trendered.type === Fragment &&\n\t\t\t\t\t\t\trendered.key == null &&\n\t\t\t\t\t\t\trendered.props.tpl == null;\n\t\t\t\t\t\trendered = isTopLevelFragment ? rendered.props.children : rendered;\n\n\t\t\t\t\t\treturn _renderToString(\n\t\t\t\t\t\t\trendered,\n\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\tisSvgMode,\n\t\t\t\t\t\t\tselectValue,\n\t\t\t\t\t\t\tvnode,\n\t\t\t\t\t\t\tasyncMode,\n\t\t\t\t\t\t\trenderer\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn EMPTY_STR;\n\t\t\t\t} finally {\n\t\t\t\t\tif (afterDiff) afterDiff(vnode);\n\t\t\t\t\tvnode[PARENT] = null;\n\n\t\t\t\t\tif (ummountHook) ummountHook(vnode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// When a component returns a Fragment node we flatten it in core, so we\n\t\t// need to mirror that logic here too\n\t\tlet isTopLevelFragment =\n\t\t\trendered != null &&\n\t\t\trendered.type === Fragment &&\n\t\t\trendered.key == null &&\n\t\t\trendered.props.tpl == null;\n\t\trendered = isTopLevelFragment ? rendered.props.children : rendered;\n\n\t\ttry {\n\t\t\t// Recurse into children before invoking the after-diff hook\n\t\t\tconst str = _renderToString(\n\t\t\t\trendered,\n\t\t\t\tcontext,\n\t\t\t\tisSvgMode,\n\t\t\t\tselectValue,\n\t\t\t\tvnode,\n\t\t\t\tasyncMode,\n\t\t\t\trenderer\n\t\t\t);\n\n\t\t\tif (afterDiff) afterDiff(vnode);\n\t\t\t// when we are dealing with suspense we can't do this...\n\t\t\tvnode[PARENT] = null;\n\n\t\t\tif (options.unmount) options.unmount(vnode);\n\n\t\t\treturn str;\n\t\t} catch (error) {\n\t\t\tif (!asyncMode && renderer && renderer.onError) {\n\t\t\t\tlet res = renderer.onError(error, vnode, (child) =>\n\t\t\t\t\t_renderToString(\n\t\t\t\t\t\tchild,\n\t\t\t\t\t\tcontext,\n\t\t\t\t\t\tisSvgMode,\n\t\t\t\t\t\tselectValue,\n\t\t\t\t\t\tvnode,\n\t\t\t\t\t\tasyncMode,\n\t\t\t\t\t\trenderer\n\t\t\t\t\t)\n\t\t\t\t);\n\n\t\t\t\tif (res !== undefined) return res;\n\n\t\t\t\tlet errorHook = options[CATCH_ERROR];\n\t\t\t\tif (errorHook) errorHook(error, vnode);\n\t\t\t\treturn EMPTY_STR;\n\t\t\t}\n\n\t\t\tif (!asyncMode) throw error;\n\n\t\t\tif (!error || typeof error.then != 'function') throw error;\n\n\t\t\tconst renderNestedChildren = () => {\n\t\t\t\ttry {\n\t\t\t\t\treturn _renderToString(\n\t\t\t\t\t\trendered,\n\t\t\t\t\t\tcontext,\n\t\t\t\t\t\tisSvgMode,\n\t\t\t\t\t\tselectValue,\n\t\t\t\t\t\tvnode,\n\t\t\t\t\t\tasyncMode,\n\t\t\t\t\t\trenderer\n\t\t\t\t\t);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tif (!e || typeof e.then != 'function') throw e;\n\n\t\t\t\t\treturn e.then(\n\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t_renderToString(\n\t\t\t\t\t\t\t\trendered,\n\t\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\t\tisSvgMode,\n\t\t\t\t\t\t\t\tselectValue,\n\t\t\t\t\t\t\t\tvnode,\n\t\t\t\t\t\t\t\tasyncMode,\n\t\t\t\t\t\t\t\trenderer\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\trenderNestedChildren\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn error.then(renderNestedChildren);\n\t\t}\n\t}\n\n\t// Serialize Element VNodes to HTML\n\tlet s = '<' + type,\n\t\thtml = EMPTY_STR,\n\t\tchildren;\n\n\tfor (let name in props) {\n\t\tlet v = props[name];\n\n\t\tif (typeof v == 'function' && name !== 'class' && name !== 'className') {\n\t\t\tcontinue;\n\t\t}\n\n\t\tswitch (name) {\n\t\t\tcase 'children':\n\t\t\t\tchildren = v;\n\t\t\t\tcontinue;\n\n\t\t\t// VDOM-specific props\n\t\t\tcase 'key':\n\t\t\tcase 'ref':\n\t\t\tcase '__self':\n\t\t\tcase '__source':\n\t\t\t\tcontinue;\n\n\t\t\t// prefer for/class over htmlFor/className\n\t\t\tcase 'htmlFor':\n\t\t\t\tif ('for' in props) continue;\n\t\t\t\tname = 'for';\n\t\t\t\tbreak;\n\t\t\tcase 'className':\n\t\t\t\tif ('class' in props) continue;\n\t\t\t\tname = 'class';\n\t\t\t\tbreak;\n\n\t\t\t// Form element reflected properties\n\t\t\tcase 'defaultChecked':\n\t\t\t\tname = 'checked';\n\t\t\t\tbreak;\n\t\t\tcase 'defaultSelected':\n\t\t\t\tname = 'selected';\n\t\t\t\tbreak;\n\n\t\t\t// Special value attribute handling\n\t\t\tcase 'defaultValue':\n\t\t\tcase 'value':\n\t\t\t\tname = 'value';\n\t\t\t\tswitch (type) {\n\t\t\t\t\t// <textarea value=\"a&b\"> --> <textarea>a&amp;b</textarea>\n\t\t\t\t\tcase 'textarea':\n\t\t\t\t\t\tchildren = v;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t// <select value> is serialized as a selected attribute on the matching option child\n\t\t\t\t\tcase 'select':\n\t\t\t\t\t\tselectValue = v;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t// Add a selected attribute to <option> if its value matches the parent <select> value\n\t\t\t\t\tcase 'option':\n\t\t\t\t\t\tif (selectValue == v && !('selected' in props)) {\n\t\t\t\t\t\t\ts = s + ' selected';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'dangerouslySetInnerHTML':\n\t\t\t\thtml = v && v.__html;\n\t\t\t\tcontinue;\n\n\t\t\t// serialize object styles to a CSS string\n\t\t\tcase 'style':\n\t\t\t\tif (typeof v === 'object') {\n\t\t\t\t\tv = styleObjToCss(v);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'acceptCharset':\n\t\t\t\tname = 'accept-charset';\n\t\t\t\tbreak;\n\t\t\tcase 'httpEquiv':\n\t\t\t\tname = 'http-equiv';\n\t\t\t\tbreak;\n\n\t\t\tdefault: {\n\t\t\t\tif (NAMESPACE_REPLACE_REGEX.test(name)) {\n\t\t\t\t\tname = name.replace(NAMESPACE_REPLACE_REGEX, '$1:$2').toLowerCase();\n\t\t\t\t} else if (UNSAFE_NAME.test(name)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t} else if (\n\t\t\t\t\t(name[4] === '-' || HTML_ENUMERATED.has(name)) &&\n\t\t\t\t\tv != null\n\t\t\t\t) {\n\t\t\t\t\t// serialize boolean aria-xyz or enumerated attribute values as strings\n\t\t\t\t\tv = v + EMPTY_STR;\n\t\t\t\t} else if (isSvgMode) {\n\t\t\t\t\tif (SVG_CAMEL_CASE.test(name)) {\n\t\t\t\t\t\tname =\n\t\t\t\t\t\t\tname === 'panose1'\n\t\t\t\t\t\t\t\t? 'panose-1'\n\t\t\t\t\t\t\t\t: name.replace(/([A-Z])/g, '-$1').toLowerCase();\n\t\t\t\t\t}\n\t\t\t\t} else if (HTML_LOWER_CASE.test(name)) {\n\t\t\t\t\tname = name.toLowerCase();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// write this attribute to the buffer\n\t\tif (v != null && v !== false) {\n\t\t\tif (v === true || v === EMPTY_STR) {\n\t\t\t\ts = s + ' ' + name;\n\t\t\t} else {\n\t\t\t\ts =\n\t\t\t\t\ts +\n\t\t\t\t\t' ' +\n\t\t\t\t\tname +\n\t\t\t\t\t'=\"' +\n\t\t\t\t\t(typeof v == 'string' ? encodeEntities(v) : v + EMPTY_STR) +\n\t\t\t\t\t'\"';\n\t\t\t}\n\t\t}\n\t}\n\n\tif (UNSAFE_NAME.test(type)) {\n\t\t// this seems to performs a lot better than throwing\n\t\t// return '<!-- -->';\n\t\tthrow new Error(`${type} is not a valid HTML tag name in ${s}>`);\n\t}\n\n\tif (html) {\n\t\t// dangerouslySetInnerHTML defined this node's contents\n\t} else if (typeof children === 'string') {\n\t\t// single text child\n\t\thtml = encodeEntities(children);\n\t} else if (children != null && children !== false && children !== true) {\n\t\t// recurse into this element VNode's children\n\t\tlet childSvgMode =\n\t\t\ttype === 'svg' || (type !== 'foreignObject' && isSvgMode);\n\t\thtml = _renderToString(\n\t\t\tchildren,\n\t\t\tcontext,\n\t\t\tchildSvgMode,\n\t\t\tselectValue,\n\t\t\tvnode,\n\t\t\tasyncMode,\n\t\t\trenderer\n\t\t);\n\t}\n\n\tif (afterDiff) afterDiff(vnode);\n\n\t// TODO: this was commented before\n\tvnode[PARENT] = null;\n\n\tif (ummountHook) ummountHook(vnode);\n\n\t// Emit self-closing tag for empty void elements:\n\tif (!html && SELF_CLOSING.has(type)) {\n\t\treturn s + '/>';\n\t}\n\n\tconst endTag = '</' + type + '>';\n\tconst startTag = s + '>';\n\n\tif (isArray(html)) return [startTag, ...html, endTag];\n\telse if (typeof html != 'string') return [startTag, html, endTag];\n\treturn startTag + html + endTag;\n}\n\nconst SELF_CLOSING = new Set([\n\t'area',\n\t'base',\n\t'br',\n\t'col',\n\t'command',\n\t'embed',\n\t'hr',\n\t'img',\n\t'input',\n\t'keygen',\n\t'link',\n\t'meta',\n\t'param',\n\t'source',\n\t'track',\n\t'wbr'\n]);\n\nexport default renderToString;\nexport const render = renderToString;\nexport const renderToStaticMarkup = renderToString;\n", "const ENCODED_ENTITIES = /[\"&<]/;\n\n/** @param {string} str */\nexport function encodeEntities(str) {\n\t// Skip all work for strings with no entities needing encoding:\n\tif (str.length === 0 || ENCODED_ENTITIES.test(str) === false) return str;\n\n\tlet last = 0,\n\t\ti = 0,\n\t\tout = '',\n\t\tch = '';\n\n\t// Seek forward in str until the next entity char:\n\tfor (; i < str.length; i++) {\n\t\tswitch (str.charCodeAt(i)) {\n\t\t\tcase 34:\n\t\t\t\tch = '&quot;';\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\tch = '&amp;';\n\t\t\t\tbreak;\n\t\t\tcase 60:\n\t\t\t\tch = '&lt;';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcontinue;\n\t\t}\n\t\t// Append skipped/buffered characters and the encoded entity:\n\t\tif (i !== last) out += str.slice(last, i);\n\t\tout += ch;\n\t\t// Start the next seek/buffer after the entity's offset:\n\t\tlast = i + 1;\n\t}\n\tif (i !== last) out += str.slice(last, i);\n\treturn out;\n}\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 16;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 17;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { options, Fragment } from 'preact';\nimport { encodeEntities } from './utils';\nimport { IS_NON_DIMENSIONAL } from '../../src/constants';\n\nlet vnodeId = 0;\n\nconst isArray = Array.isArray;\n\n/**\n * @fileoverview\n * This file exports various methods that implement Babel's \"automatic\" JSX runtime API:\n * - jsx(type, props, key)\n * - jsxs(type, props, key)\n * - jsxDEV(type, props, key, __source, __self)\n *\n * The implementation of createVNode here is optimized for performance.\n * Benchmarks: https://esbench.com/bench/5f6b54a0b4632100a7dcd2b3\n */\n\n/**\n * JSX.Element factory used by Babel's {runtime:\"automatic\"} JSX transform\n * @param {VNode['type']} type\n * @param {VNode['props']} props\n * @param {VNode['key']} [key]\n * @param {unknown} [isStaticChildren]\n * @param {unknown} [__source]\n * @param {unknown} [__self]\n */\nfunction createVNode(type, props, key, isStaticChildren, __source, __self) {\n\tif (!props) props = {};\n\t// We'll want to preserve `ref` in props to get rid of the need for\n\t// forwardRef components in the future, but that should happen via\n\t// a separate PR.\n\tlet normalizedProps = props,\n\t\tref,\n\t\ti;\n\n\tif ('ref' in props) {\n\t\tref = props.ref;\n\t\tdelete props.ref;\n\t}\n\n\t/** @type {VNode & { __source: any; __self: any }} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops: normalizedProps,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\tconstructor: undefined,\n\t\t_original: --vnodeId,\n\t\t_index: -1,\n\t\t_flags: 0,\n\t\t__source,\n\t\t__self\n\t};\n\n\t// If a Component VNode, check for and apply defaultProps.\n\t// Note: `type` is often a String, and can be `undefined` in development.\n\tif (typeof type === 'function' && (ref = type.defaultProps)) {\n\t\tfor (i in ref)\n\t\t\tif (typeof normalizedProps[i] === 'undefined') {\n\t\t\t\tnormalizedProps[i] = ref[i];\n\t\t\t}\n\t}\n\n\tif (options.vnode) options.vnode(vnode);\n\treturn vnode;\n}\n\n/**\n * Create a template vnode. This function is not expected to be\n * used directly, but rather through a precompile JSX transform\n * @param {string[]} templates\n * @param  {Array<string | null | VNode>} exprs\n * @returns {VNode}\n */\nfunction jsxTemplate(templates, ...exprs) {\n\tconst vnode = createVNode(Fragment, { tpl: templates, exprs });\n\t// Bypass render to string top level Fragment optimization\n\tvnode.key = vnode._vnode;\n\treturn vnode;\n}\n\nconst JS_TO_CSS = {};\nconst CSS_REGEX = /[A-Z]/g;\n\n/**\n * Serialize an HTML attribute to a string. This function is not\n * expected to be used directly, but rather through a precompile\n * JSX transform\n * @param {string} name The attribute name\n * @param {*} value The attribute value\n * @returns {string}\n */\nfunction jsxAttr(name, value) {\n\tif (options.attr) {\n\t\tconst result = options.attr(name, value);\n\t\tif (typeof result === 'string') return result;\n\t}\n\n\tif (name === 'ref' || name === 'key') return '';\n\tif (name === 'style' && typeof value === 'object') {\n\t\tlet str = '';\n\t\tfor (let prop in value) {\n\t\t\tlet val = value[prop];\n\t\t\tif (val != null && val !== '') {\n\t\t\t\tconst name =\n\t\t\t\t\tprop[0] == '-'\n\t\t\t\t\t\t? prop\n\t\t\t\t\t\t: JS_TO_CSS[prop] ||\n\t\t\t\t\t\t\t(JS_TO_CSS[prop] = prop.replace(CSS_REGEX, '-$&').toLowerCase());\n\n\t\t\t\tlet suffix = ';';\n\t\t\t\tif (\n\t\t\t\t\ttypeof val === 'number' &&\n\t\t\t\t\t// Exclude custom-attributes\n\t\t\t\t\t!name.startsWith('--') &&\n\t\t\t\t\t!IS_NON_DIMENSIONAL.test(name)\n\t\t\t\t) {\n\t\t\t\t\tsuffix = 'px;';\n\t\t\t\t}\n\t\t\t\tstr = str + name + ':' + val + suffix;\n\t\t\t}\n\t\t}\n\t\treturn name + '=\"' + str + '\"';\n\t}\n\n\tif (\n\t\tvalue == null ||\n\t\tvalue === false ||\n\t\ttypeof value === 'function' ||\n\t\ttypeof value === 'object'\n\t) {\n\t\treturn '';\n\t} else if (value === true) return name;\n\n\treturn name + '=\"' + encodeEntities(value) + '\"';\n}\n\n/**\n * Escape a dynamic child passed to `jsxTemplate`. This function\n * is not expected to be used directly, but rather through a\n * precompile JSX transform\n * @param {*} value\n * @returns {string | null | VNode | Array<string | null | VNode>}\n */\nfunction jsxEscape(value) {\n\tif (\n\t\tvalue == null ||\n\t\ttypeof value === 'boolean' ||\n\t\ttypeof value === 'function'\n\t) {\n\t\treturn null;\n\t}\n\n\tif (typeof value === 'object') {\n\t\t// Check for VNode\n\t\tif (value.constructor === undefined) return value;\n\n\t\tif (isArray(value)) {\n\t\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\t\tvalue[i] = jsxEscape(value[i]);\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t}\n\n\treturn encodeEntities('' + value);\n}\n\nexport {\n\tcreateVNode as jsx,\n\tcreateVNode as jsxs,\n\tcreateVNode as jsxDEV,\n\tFragment,\n\t// precompiled JSX transform\n\tjsxTemplate,\n\tjsxAttr,\n\tjsxEscape\n};\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\n/** Renders an error page. */\nexport default function ErrorPage(props) {\n    const { url, error = \"default\", theme } = props;\n    const signinPageUrl = `${url}/signin`;\n    const errors = {\n        default: {\n            status: 200,\n            heading: \"Error\",\n            message: (_jsx(\"p\", { children: _jsx(\"a\", { className: \"site\", href: url?.origin, children: url?.host }) })),\n        },\n        Configuration: {\n            status: 500,\n            heading: \"Server error\",\n            message: (_jsxs(\"div\", { children: [_jsx(\"p\", { children: \"There is a problem with the server configuration.\" }), _jsx(\"p\", { children: \"Check the server logs for more information.\" })] })),\n        },\n        AccessDenied: {\n            status: 403,\n            heading: \"Access Denied\",\n            message: (_jsxs(\"div\", { children: [_jsx(\"p\", { children: \"You do not have permission to sign in.\" }), _jsx(\"p\", { children: _jsx(\"a\", { className: \"button\", href: signinPageUrl, children: \"Sign in\" }) })] })),\n        },\n        Verification: {\n            status: 403,\n            heading: \"Unable to sign in\",\n            message: (_jsxs(\"div\", { children: [_jsx(\"p\", { children: \"The sign in link is no longer valid.\" }), _jsx(\"p\", { children: \"It may have been used already or it may have expired.\" })] })),\n            signin: (_jsx(\"a\", { className: \"button\", href: signinPageUrl, children: \"Sign in\" })),\n        },\n    };\n    const { status, heading, message, signin } = errors[error] ?? errors.default;\n    return {\n        status,\n        html: (_jsxs(\"div\", { className: \"error\", children: [theme?.brandColor && (_jsx(\"style\", { dangerouslySetInnerHTML: {\n                        __html: `\n        :root {\n          --brand-color: ${theme?.brandColor}\n        }\n      `,\n                    } })), _jsxs(\"div\", { className: \"card\", children: [theme?.logo && _jsx(\"img\", { src: theme?.logo, alt: \"Logo\", className: \"logo\" }), _jsx(\"h1\", { children: heading }), _jsx(\"div\", { className: \"message\", children: message }), signin] })] })),\n    };\n}\n", "//@ts-check\n// Declare a SimpleWebAuthnBrowser variable as part of \"window\"\n/** @typedef {\"authenticate\"} WebAuthnAuthenticate */\n/** @typedef {\"register\"} WebAuthnRegister */\n/** @typedef {WebAuthnRegister | WebAuthnAuthenticate} WebAuthnOptionsAction */\n/**\n * @template {WebAuthnOptionsAction} T\n * @typedef {T extends WebAuthnAuthenticate ?\n *  { options: import(\"@simplewebauthn/types\").PublicKeyCredentialRequestOptionsJSON; action: \"authenticate\" } :\n *  T extends WebAuthnRegister ?\n *  { options: import(\"@simplewebauthn/types\").PublicKeyCredentialCreationOptionsJSON; action: \"register\" } :\n * never\n * } WebAuthnOptionsReturn\n */\n/**\n * webauthnScript is the client-side script that handles the webauthn form\n *\n * @param {string} authURL is the URL of the auth API\n * @param {string} providerID is the ID of the webauthn provider\n */\nexport async function webauthnScript(authURL, providerID) {\n    /** @type {typeof import(\"@simplewebauthn/browser\")} */\n    // @ts-ignore\n    const WebAuthnBrowser = window.SimpleWebAuthnBrowser;\n    /**\n     * Fetch webauthn options from the server\n     *\n     * @template {WebAuthnOptionsAction} T\n     * @param {T | undefined} action action to fetch options for\n     * @returns {Promise<WebAuthnOptionsReturn<T> | undefined>}\n     */\n    async function fetchOptions(action) {\n        // Create the options URL with the action and query parameters\n        const url = new URL(`${authURL}/webauthn-options/${providerID}`);\n        if (action)\n            url.searchParams.append(\"action\", action);\n        const formFields = getFormFields();\n        formFields.forEach((field) => {\n            url.searchParams.append(field.name, field.value);\n        });\n        const res = await fetch(url);\n        if (!res.ok) {\n            console.error(\"Failed to fetch options\", res);\n            return;\n        }\n        return res.json();\n    }\n    /**\n     * Get the webauthn form from the page\n     *\n     * @returns {HTMLFormElement}\n     */\n    function getForm() {\n        const formID = `#${providerID}-form`;\n        /** @type {HTMLFormElement | null} */\n        const form = document.querySelector(formID);\n        if (!form)\n            throw new Error(`Form '${formID}' not found`);\n        return form;\n    }\n    /**\n     * Get formFields from the form\n     *\n     * @returns {HTMLInputElement[]}\n     */\n    function getFormFields() {\n        const form = getForm();\n        /** @type {HTMLInputElement[]} */\n        const formFields = Array.from(form.querySelectorAll(\"input[data-form-field]\"));\n        return formFields;\n    }\n    /**\n     * Passkey form submission handler.\n     * Takes the input from the form and a few other parameters and submits it to the server.\n     *\n     * @param {WebAuthnOptionsAction} action action to submit\n     * @param {unknown | undefined} data optional data to submit\n     * @returns {Promise<void>}\n     */\n    async function submitForm(action, data) {\n        const form = getForm();\n        // If a POST request, create hidden fields in the form\n        // and submit it so the browser redirects on login\n        if (action) {\n            const actionInput = document.createElement(\"input\");\n            actionInput.type = \"hidden\";\n            actionInput.name = \"action\";\n            actionInput.value = action;\n            form.appendChild(actionInput);\n        }\n        if (data) {\n            const dataInput = document.createElement(\"input\");\n            dataInput.type = \"hidden\";\n            dataInput.name = \"data\";\n            dataInput.value = JSON.stringify(data);\n            form.appendChild(dataInput);\n        }\n        return form.submit();\n    }\n    /**\n     * Executes the authentication flow by fetching options from the server,\n     * starting the authentication, and submitting the response to the server.\n     *\n     * @param {WebAuthnOptionsReturn<WebAuthnAuthenticate>['options']} options\n     * @param {boolean} autofill Whether or not to use the browser's autofill\n     * @returns {Promise<void>}\n     */\n    async function authenticationFlow(options, autofill) {\n        // Start authentication\n        const authResp = await WebAuthnBrowser.startAuthentication(options, autofill);\n        // Submit authentication response to server\n        return await submitForm(\"authenticate\", authResp);\n    }\n    /**\n     * @param {WebAuthnOptionsReturn<WebAuthnRegister>['options']} options\n     */\n    async function registrationFlow(options) {\n        // Check if all required formFields are set\n        const formFields = getFormFields();\n        formFields.forEach((field) => {\n            if (field.required && !field.value) {\n                throw new Error(`Missing required field: ${field.name}`);\n            }\n        });\n        // Start registration\n        const regResp = await WebAuthnBrowser.startRegistration(options);\n        // Submit registration response to server\n        return await submitForm(\"register\", regResp);\n    }\n    /**\n     * Attempts to authenticate the user when the page loads\n     * using the browser's autofill popup.\n     *\n     * @returns {Promise<void>}\n     */\n    async function autofillAuthentication() {\n        // if the browser can't handle autofill, don't try\n        if (!WebAuthnBrowser.browserSupportsWebAuthnAutofill())\n            return;\n        const res = await fetchOptions(\"authenticate\");\n        if (!res) {\n            console.error(\"Failed to fetch option for autofill authentication\");\n            return;\n        }\n        try {\n            await authenticationFlow(res.options, true);\n        }\n        catch (e) {\n            console.error(e);\n        }\n    }\n    /**\n     * Sets up the passkey form by overriding the form submission handler\n     * so that it attempts to authenticate the user when the form is submitted.\n     * If the user is not registered, it will attempt to register them instead.\n     */\n    async function setupForm() {\n        const form = getForm();\n        // If the browser can't do WebAuthn, hide the form\n        if (!WebAuthnBrowser.browserSupportsWebAuthn()) {\n            form.style.display = \"none\";\n            return;\n        }\n        if (form) {\n            form.addEventListener(\"submit\", async (e) => {\n                e.preventDefault();\n                // Fetch options from the server without assuming that\n                // the user is registered\n                const res = await fetchOptions(undefined);\n                if (!res) {\n                    console.error(\"Failed to fetch options for form submission\");\n                    return;\n                }\n                // Then execute the appropriate flow\n                if (res.action === \"authenticate\") {\n                    try {\n                        await authenticationFlow(res.options, false);\n                    }\n                    catch (e) {\n                        console.error(e);\n                    }\n                }\n                else if (res.action === \"register\") {\n                    try {\n                        await registrationFlow(res.options);\n                    }\n                    catch (e) {\n                        console.error(e);\n                    }\n                }\n            });\n        }\n    }\n    // On page load, setup the form and attempt to authenticate the user.\n    setupForm();\n    autofillAuthentication();\n}\n", "import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { webauthnScript } from \"../utils/webauthn-client.js\";\nconst signinErrors = {\n    default: \"Unable to sign in.\",\n    Signin: \"Try signing in with a different account.\",\n    OAuthSignin: \"Try signing in with a different account.\",\n    OAuthCallbackError: \"Try signing in with a different account.\",\n    OAuthCreateAccount: \"Try signing in with a different account.\",\n    EmailCreateAccount: \"Try signing in with a different account.\",\n    Callback: \"Try signing in with a different account.\",\n    OAuthAccountNotLinked: \"To confirm your identity, sign in with the same account you used originally.\",\n    EmailSignin: \"The e-mail could not be sent.\",\n    CredentialsSignin: \"Sign in failed. Check the details you provided are correct.\",\n    SessionRequired: \"Please sign in to access this page.\",\n};\nfunction ConditionalUIScript(providerID) {\n    const startConditionalUIScript = `\nconst currentURL = window.location.href;\nconst authURL = currentURL.substring(0, currentURL.lastIndexOf('/'));\n(${webauthnScript})(authURL, \"${providerID}\");\n`;\n    return (_jsx(_Fragment, { children: _jsx(\"script\", { dangerouslySetInnerHTML: { __html: startConditionalUIScript } }) }));\n}\nexport default function SigninPage(props) {\n    const { csrfToken, providers = [], callbackUrl, theme, email, error: errorType, } = props;\n    if (typeof document !== \"undefined\" && theme?.brandColor) {\n        document.documentElement.style.setProperty(\"--brand-color\", theme.brandColor);\n    }\n    if (typeof document !== \"undefined\" && theme?.buttonText) {\n        document.documentElement.style.setProperty(\"--button-text-color\", theme.buttonText);\n    }\n    const error = errorType && (signinErrors[errorType] ?? signinErrors.default);\n    const providerLogoPath = \"https://authjs.dev/img/providers\";\n    const conditionalUIProviderID = providers.find((provider) => provider.type === \"webauthn\" && provider.enableConditionalUI)?.id;\n    return (_jsxs(\"div\", { className: \"signin\", children: [theme?.brandColor && (_jsx(\"style\", { dangerouslySetInnerHTML: {\n                    __html: `:root {--brand-color: ${theme.brandColor}}`,\n                } })), theme?.buttonText && (_jsx(\"style\", { dangerouslySetInnerHTML: {\n                    __html: `\n        :root {\n          --button-text-color: ${theme.buttonText}\n        }\n      `,\n                } })), _jsxs(\"div\", { className: \"card\", children: [error && (_jsx(\"div\", { className: \"error\", children: _jsx(\"p\", { children: error }) })), theme?.logo && _jsx(\"img\", { src: theme.logo, alt: \"Logo\", className: \"logo\" }), providers.map((provider, i) => {\n                        let bg, brandColor, logo;\n                        if (provider.type === \"oauth\" || provider.type === \"oidc\") {\n                            ;\n                            ({\n                                bg = \"#fff\",\n                                brandColor,\n                                logo = `${providerLogoPath}/${provider.id}.svg`,\n                            } = provider.style ?? {});\n                        }\n                        const color = brandColor ?? bg ?? \"#fff\";\n                        return (_jsxs(\"div\", { className: \"provider\", children: [provider.type === \"oauth\" || provider.type === \"oidc\" ? (_jsxs(\"form\", { action: provider.signinUrl, method: \"POST\", children: [_jsx(\"input\", { type: \"hidden\", name: \"csrfToken\", value: csrfToken }), callbackUrl && (_jsx(\"input\", { type: \"hidden\", name: \"callbackUrl\", value: callbackUrl })), _jsxs(\"button\", { type: \"submit\", className: \"button\", style: {\n                                                \"--provider-bg\": \"#fff\",\n                                                \"--provider-bg-hover\": `color-mix(in srgb, ${color} 30%, #fff)`,\n                                                \"--provider-dark-bg\": \"#161b22\",\n                                                \"--provider-dark-bg-hover\": `color-mix(in srgb, ${color} 30%, #000)`,\n                                            }, tabIndex: 0, children: [_jsxs(\"span\", { style: {\n                                                        filter: \"invert(1) grayscale(1) brightness(1.3) contrast(9000)\",\n                                                        \"mix-blend-mode\": \"luminosity\",\n                                                        opacity: 0.95,\n                                                    }, children: [\"Sign in with \", provider.name] }), logo && _jsx(\"img\", { loading: \"lazy\", height: 24, src: logo })] })] })) : null, (provider.type === \"email\" ||\n                                    provider.type === \"credentials\" ||\n                                    provider.type === \"webauthn\") &&\n                                    i > 0 &&\n                                    providers[i - 1].type !== \"email\" &&\n                                    providers[i - 1].type !== \"credentials\" &&\n                                    providers[i - 1].type !== \"webauthn\" && _jsx(\"hr\", {}), provider.type === \"email\" && (_jsxs(\"form\", { action: provider.signinUrl, method: \"POST\", children: [_jsx(\"input\", { type: \"hidden\", name: \"csrfToken\", value: csrfToken }), _jsx(\"label\", { className: \"section-header\", htmlFor: `input-email-for-${provider.id}-provider`, children: \"Email\" }), _jsx(\"input\", { id: `input-email-for-${provider.id}-provider`, autoFocus: true, type: \"email\", name: \"email\", value: email, placeholder: \"email@example.com\", required: true }), _jsxs(\"button\", { id: \"submitButton\", type: \"submit\", tabIndex: 0, children: [\"Sign in with \", provider.name] })] })), provider.type === \"credentials\" && (_jsxs(\"form\", { action: provider.callbackUrl, method: \"POST\", children: [_jsx(\"input\", { type: \"hidden\", name: \"csrfToken\", value: csrfToken }), Object.keys(provider.credentials).map((credential) => {\n                                            return (_jsxs(\"div\", { children: [_jsx(\"label\", { className: \"section-header\", htmlFor: `input-${credential}-for-${provider.id}-provider`, children: provider.credentials[credential].label ?? credential }), _jsx(\"input\", { name: credential, id: `input-${credential}-for-${provider.id}-provider`, type: provider.credentials[credential].type ?? \"text\", placeholder: provider.credentials[credential].placeholder ?? \"\", ...provider.credentials[credential] })] }, `input-group-${provider.id}`));\n                                        }), _jsxs(\"button\", { id: \"submitButton\", type: \"submit\", tabIndex: 0, children: [\"Sign in with \", provider.name] })] })), provider.type === \"webauthn\" && (_jsxs(\"form\", { action: provider.callbackUrl, method: \"POST\", id: `${provider.id}-form`, children: [_jsx(\"input\", { type: \"hidden\", name: \"csrfToken\", value: csrfToken }), Object.keys(provider.formFields).map((field) => {\n                                            return (_jsxs(\"div\", { children: [_jsx(\"label\", { className: \"section-header\", htmlFor: `input-${field}-for-${provider.id}-provider`, children: provider.formFields[field].label ?? field }), _jsx(\"input\", { name: field, \"data-form-field\": true, id: `input-${field}-for-${provider.id}-provider`, type: provider.formFields[field].type ?? \"text\", placeholder: provider.formFields[field].placeholder ?? \"\", ...provider.formFields[field] })] }, `input-group-${provider.id}`));\n                                        }), _jsxs(\"button\", { id: `submitButton-${provider.id}`, type: \"submit\", tabIndex: 0, children: [\"Sign in with \", provider.name] })] })), (provider.type === \"email\" ||\n                                    provider.type === \"credentials\" ||\n                                    provider.type === \"webauthn\") &&\n                                    i + 1 < providers.length && _jsx(\"hr\", {})] }, provider.id));\n                    })] }), conditionalUIProviderID && ConditionalUIScript(conditionalUIProviderID)] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nexport default function SignoutPage(props) {\n    const { url, csrfToken, theme } = props;\n    return (_jsxs(\"div\", { className: \"signout\", children: [theme?.brandColor && (_jsx(\"style\", { dangerouslySetInnerHTML: {\n                    __html: `\n        :root {\n          --brand-color: ${theme.brandColor}\n        }\n      `,\n                } })), theme?.buttonText && (_jsx(\"style\", { dangerouslySetInnerHTML: {\n                    __html: `\n        :root {\n          --button-text-color: ${theme.buttonText}\n        }\n      `,\n                } })), _jsxs(\"div\", { className: \"card\", children: [theme?.logo && _jsx(\"img\", { src: theme.logo, alt: \"Logo\", className: \"logo\" }), _jsx(\"h1\", { children: \"Signout\" }), _jsx(\"p\", { children: \"Are you sure you want to sign out?\" }), _jsxs(\"form\", { action: url?.toString(), method: \"POST\", children: [_jsx(\"input\", { type: \"hidden\", name: \"csrfToken\", value: csrfToken }), _jsx(\"button\", { id: \"submitButton\", type: \"submit\", children: \"Sign out\" })] })] })] }));\n}\n", "// Generated by `pnpm css`\nexport default `:root {\n  --border-width: 1px;\n  --border-radius: 0.5rem;\n  --color-error: #c94b4b;\n  --color-info: #157efb;\n  --color-info-hover: #0f6ddb;\n  --color-info-text: #fff;\n}\n\n.__next-auth-theme-auto,\n.__next-auth-theme-light {\n  --color-background: #ececec;\n  --color-background-hover: rgba(236, 236, 236, 0.8);\n  --color-background-card: #fff;\n  --color-text: #000;\n  --color-primary: #444;\n  --color-control-border: #bbb;\n  --color-button-active-background: #f9f9f9;\n  --color-button-active-border: #aaa;\n  --color-separator: #ccc;\n}\n\n.__next-auth-theme-dark {\n  --color-background: #161b22;\n  --color-background-hover: rgba(22, 27, 34, 0.8);\n  --color-background-card: #0d1117;\n  --color-text: #fff;\n  --color-primary: #ccc;\n  --color-control-border: #555;\n  --color-button-active-background: #060606;\n  --color-button-active-border: #666;\n  --color-separator: #444;\n}\n\n@media (prefers-color-scheme: dark) {\n  .__next-auth-theme-auto {\n    --color-background: #161b22;\n    --color-background-hover: rgba(22, 27, 34, 0.8);\n    --color-background-card: #0d1117;\n    --color-text: #fff;\n    --color-primary: #ccc;\n    --color-control-border: #555;\n    --color-button-active-background: #060606;\n    --color-button-active-border: #666;\n    --color-separator: #444;\n  }\n\n  button,\n  a.button {\n    color: var(--provider-dark-color, var(--color-primary)) !important;\n    background-color: var(\n      --provider-dark-bg,\n      var(--color-background)\n    ) !important;\n  }\n\n    :is(button,a.button):hover {\n      background-color: var(\n        --provider-dark-bg-hover,\n        var(--color-background-hover)\n      ) !important;\n    }\n\n    :is(button,a.button) span {\n      color: var(--provider-dark-bg) !important;\n    }\n}\n\nhtml {\n  box-sizing: border-box;\n}\n\n*,\n*:before,\n*:after {\n  box-sizing: inherit;\n  margin: 0;\n  padding: 0;\n}\n\nbody {\n  background-color: var(--color-background);\n  margin: 0;\n  padding: 0;\n  font-family:\n    ui-sans-serif,\n    system-ui,\n    -apple-system,\n    BlinkMacSystemFont,\n    \"Segoe UI\",\n    Roboto,\n    \"Helvetica Neue\",\n    Arial,\n    \"Noto Sans\",\n    sans-serif,\n    \"Apple Color Emoji\",\n    \"Segoe UI Emoji\",\n    \"Segoe UI Symbol\",\n    \"Noto Color Emoji\";\n}\n\nh1 {\n  margin-bottom: 1.5rem;\n  padding: 0 1rem;\n  font-weight: 400;\n  color: var(--color-text);\n}\n\np {\n  margin-bottom: 1.5rem;\n  padding: 0 1rem;\n  color: var(--color-text);\n}\n\nform {\n  margin: 0;\n  padding: 0;\n}\n\nlabel {\n  font-weight: 500;\n  text-align: left;\n  margin-bottom: 0.25rem;\n  display: block;\n  color: var(--color-text);\n}\n\ninput[type] {\n  box-sizing: border-box;\n  display: block;\n  width: 100%;\n  padding: 0.5rem 1rem;\n  border: var(--border-width) solid var(--color-control-border);\n  background: var(--color-background-card);\n  font-size: 1rem;\n  border-radius: var(--border-radius);\n  color: var(--color-text);\n}\n\np {\n  font-size: 1.1rem;\n  line-height: 2rem;\n}\n\na.button {\n  text-decoration: none;\n  line-height: 1rem;\n}\n\na.button:link,\n  a.button:visited {\n    background-color: var(--color-background);\n    color: var(--color-primary);\n  }\n\nbutton,\na.button {\n  padding: 0.75rem 1rem;\n  color: var(--provider-color, var(--color-primary));\n  background-color: var(--provider-bg, var(--color-background));\n  border: 1px solid #00000031;\n  font-size: 0.9rem;\n  height: 50px;\n  border-radius: var(--border-radius);\n  transition: background-color 250ms ease-in-out;\n  font-weight: 300;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n:is(button,a.button):hover {\n    background-color: var(--provider-bg-hover, var(--color-background-hover));\n    cursor: pointer;\n  }\n\n:is(button,a.button):active {\n    cursor: pointer;\n  }\n\n:is(button,a.button) span {\n    color: #fff;\n  }\n\n#submitButton {\n  color: var(--button-text-color, var(--color-info-text));\n  background-color: var(--brand-color, var(--color-info));\n  width: 100%;\n}\n\n#submitButton:hover {\n    background-color: var(\n      --button-hover-bg,\n      var(--color-info-hover)\n    ) !important;\n  }\n\na.site {\n  color: var(--color-primary);\n  text-decoration: none;\n  font-size: 1rem;\n  line-height: 2rem;\n}\n\na.site:hover {\n    text-decoration: underline;\n  }\n\n.page {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: grid;\n  place-items: center;\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n.page > div {\n    text-align: center;\n  }\n\n.error a.button {\n    padding-left: 2rem;\n    padding-right: 2rem;\n    margin-top: 0.5rem;\n  }\n\n.error .message {\n    margin-bottom: 1.5rem;\n  }\n\n.signin input[type=\"text\"] {\n    margin-left: auto;\n    margin-right: auto;\n    display: block;\n  }\n\n.signin hr {\n    display: block;\n    border: 0;\n    border-top: 1px solid var(--color-separator);\n    margin: 2rem auto 1rem auto;\n    overflow: visible;\n  }\n\n.signin hr::before {\n      content: \"or\";\n      background: var(--color-background-card);\n      color: #888;\n      padding: 0 0.4rem;\n      position: relative;\n      top: -0.7rem;\n    }\n\n.signin .error {\n    background: #f5f5f5;\n    font-weight: 500;\n    border-radius: 0.3rem;\n    background: var(--color-error);\n  }\n\n.signin .error p {\n      text-align: left;\n      padding: 0.5rem 1rem;\n      font-size: 0.9rem;\n      line-height: 1.2rem;\n      color: var(--color-info-text);\n    }\n\n.signin > div,\n  .signin form {\n    display: block;\n  }\n\n.signin > div input[type], .signin form input[type] {\n      margin-bottom: 0.5rem;\n    }\n\n.signin > div button, .signin form button {\n      width: 100%;\n    }\n\n.signin .provider + .provider {\n    margin-top: 1rem;\n  }\n\n.logo {\n  display: inline-block;\n  max-width: 150px;\n  margin: 1.25rem 0;\n  max-height: 70px;\n}\n\n.card {\n  background-color: var(--color-background-card);\n  border-radius: 1rem;\n  padding: 1.25rem 2rem;\n}\n\n.card .header {\n    color: var(--color-primary);\n  }\n\n.card input[type]::-moz-placeholder {\n    color: color-mix(\n      in srgb,\n      var(--color-text) 20%,\n      var(--color-button-active-background)\n    );\n  }\n\n.card input[type]::placeholder {\n    color: color-mix(\n      in srgb,\n      var(--color-text) 20%,\n      var(--color-button-active-background)\n    );\n  }\n\n.card input[type] {\n    background: color-mix(in srgb, var(--color-background-card) 95%, black);\n  }\n\n.section-header {\n  color: var(--color-text);\n}\n\n@media screen and (min-width: 450px) {\n  .card {\n    margin: 2rem 0;\n    width: 368px;\n  }\n}\n\n@media screen and (max-width: 450px) {\n  .card {\n    margin: 1rem 0;\n    width: 343px;\n  }\n}\n`;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nexport default function VerifyRequestPage(props) {\n    const { url, theme } = props;\n    return (_jsxs(\"div\", { className: \"verify-request\", children: [theme.brandColor && (_jsx(\"style\", { dangerouslySetInnerHTML: {\n                    __html: `\n        :root {\n          --brand-color: ${theme.brandColor}\n        }\n      `,\n                } })), _jsxs(\"div\", { className: \"card\", children: [theme.logo && _jsx(\"img\", { src: theme.logo, alt: \"Logo\", className: \"logo\" }), _jsx(\"h1\", { children: \"Check your email\" }), _jsx(\"p\", { children: \"A sign in link has been sent to your email address.\" }), _jsx(\"p\", { children: _jsx(\"a\", { className: \"site\", href: url.origin, children: url.host }) })] })] }));\n}\n", "import { renderToString } from \"preact-render-to-string\";\nimport ErrorPage from \"./error.js\";\nimport SigninPage from \"./signin.js\";\nimport SignoutPage from \"./signout.js\";\nimport css from \"./styles.js\";\nimport VerifyRequestPage from \"./verify-request.js\";\nimport { UnknownAction } from \"../../errors.js\";\nfunction send({ html, title, status, cookies, theme, headTags, }) {\n    return {\n        cookies,\n        status,\n        headers: { \"Content-Type\": \"text/html\" },\n        body: `<!DOCTYPE html><html lang=\"en\"><head><meta charset=\"UTF-8\"><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><style>${css}</style><title>${title}</title>${headTags ?? \"\"}</head><body class=\"__next-auth-theme-${theme?.colorScheme ?? \"auto\"}\"><div class=\"page\">${renderToString(html)}</div></body></html>`,\n    };\n}\n/**\n * Unless the user defines their [own pages](https://authjs.dev/reference/core#pages),\n * we render a set of default ones, using Preact SSR.\n */\nexport default function renderPage(params) {\n    const { url, theme, query, cookies, pages, providers } = params;\n    return {\n        csrf(skip, options, cookies) {\n            if (!skip) {\n                return {\n                    headers: { \"Content-Type\": \"application/json\" },\n                    body: { csrfToken: options.csrfToken },\n                    cookies,\n                };\n            }\n            options.logger.warn(\"csrf-disabled\");\n            cookies.push({\n                name: options.cookies.csrfToken.name,\n                value: \"\",\n                options: { ...options.cookies.csrfToken.options, maxAge: 0 },\n            });\n            return { status: 404, cookies };\n        },\n        providers(providers) {\n            return {\n                headers: { \"Content-Type\": \"application/json\" },\n                body: providers.reduce((acc, { id, name, type, signinUrl, callbackUrl }) => {\n                    acc[id] = { id, name, type, signinUrl, callbackUrl };\n                    return acc;\n                }, {}),\n            };\n        },\n        signin(providerId, error) {\n            if (providerId)\n                throw new UnknownAction(\"Unsupported action\");\n            if (pages?.signIn) {\n                let signinUrl = `${pages.signIn}${pages.signIn.includes(\"?\") ? \"&\" : \"?\"}${new URLSearchParams({ callbackUrl: params.callbackUrl ?? \"/\" })}`;\n                if (error)\n                    signinUrl = `${signinUrl}&${new URLSearchParams({ error })}`;\n                return { redirect: signinUrl, cookies };\n            }\n            // If we have a webauthn provider with conditional UI and\n            // a simpleWebAuthnBrowserScript is defined, we need to\n            // render the script in the page.\n            const webauthnProvider = providers?.find((p) => p.type === \"webauthn\" &&\n                p.enableConditionalUI &&\n                !!p.simpleWebAuthnBrowserVersion);\n            let simpleWebAuthnBrowserScript = \"\";\n            if (webauthnProvider) {\n                const { simpleWebAuthnBrowserVersion } = webauthnProvider;\n                simpleWebAuthnBrowserScript = `<script src=\"https://unpkg.com/@simplewebauthn/browser@${simpleWebAuthnBrowserVersion}/dist/bundle/index.umd.min.js\" crossorigin=\"anonymous\"></script>`;\n            }\n            return send({\n                cookies,\n                theme,\n                html: SigninPage({\n                    csrfToken: params.csrfToken,\n                    // We only want to render providers\n                    providers: params.providers?.filter((provider) => \n                    // Always render oauth and email type providers\n                    [\"email\", \"oauth\", \"oidc\"].includes(provider.type) ||\n                        // Only render credentials type provider if credentials are defined\n                        (provider.type === \"credentials\" && provider.credentials) ||\n                        // Only render webauthn type provider if formFields are defined\n                        (provider.type === \"webauthn\" && provider.formFields) ||\n                        // Don't render other provider types\n                        false),\n                    callbackUrl: params.callbackUrl,\n                    theme: params.theme,\n                    error,\n                    ...query,\n                }),\n                title: \"Sign In\",\n                headTags: simpleWebAuthnBrowserScript,\n            });\n        },\n        signout() {\n            if (pages?.signOut)\n                return { redirect: pages.signOut, cookies };\n            return send({\n                cookies,\n                theme,\n                html: SignoutPage({ csrfToken: params.csrfToken, url, theme }),\n                title: \"Sign Out\",\n            });\n        },\n        verifyRequest(props) {\n            if (pages?.verifyRequest)\n                return {\n                    redirect: `${pages.verifyRequest}${url?.search ?? \"\"}`,\n                    cookies,\n                };\n            return send({\n                cookies,\n                theme,\n                html: VerifyRequestPage({ url, theme, ...props }),\n                title: \"Verify Request\",\n            });\n        },\n        error(error) {\n            if (pages?.error) {\n                return {\n                    redirect: `${pages.error}${pages.error.includes(\"?\") ? \"&\" : \"?\"}error=${error}`,\n                    cookies,\n                };\n            }\n            return send({\n                cookies,\n                theme,\n                // @ts-expect-error fix error type\n                ...ErrorPage({ url, theme, error }),\n                title: \"Error\",\n            });\n        },\n    };\n}\n", "/**\n * Takes a number in seconds and returns the date in the future.\n * Optionally takes a second date parameter. In that case\n * the date in the future will be calculated from that date instead of now.\n */\nexport function fromDate(time, date = Date.now()) {\n    return new Date(date + time * 1000);\n}\n", "import { AccountNotLinked, OAuthAccountNotLinked } from \"../../../errors.js\";\nimport { fromDate } from \"../../utils/date.js\";\n/**\n * This function handles the complex flow of signing users in, and either creating,\n * linking (or not linking) accounts depending on if the user is currently logged\n * in, if they have account already and the authentication mechanism they are using.\n *\n * It prevents insecure behaviour, such as linking OAuth accounts unless a user is\n * signed in and authenticated with an existing valid account.\n *\n * All verification (e.g. OAuth flows or email address verification flows) are\n * done prior to this handler being called to avoid additional complexity in this\n * handler.\n */\nexport async function handleLoginOrRegister(sessionToken, _profile, _account, options) {\n    // Input validation\n    if (!_account?.providerAccountId || !_account.type)\n        throw new Error(\"Missing or invalid provider account\");\n    if (![\"email\", \"oauth\", \"oidc\", \"webauthn\"].includes(_account.type))\n        throw new Error(\"Provider not supported\");\n    const { adapter, jwt, events, session: { strategy: sessionStrategy, generateSessionToken }, } = options;\n    // If no adapter is configured then we don't have a database and cannot\n    // persist data; in this mode we just return a dummy session object.\n    if (!adapter) {\n        return { user: _profile, account: _account };\n    }\n    const profile = _profile;\n    let account = _account;\n    const { createUser, updateUser, getUser, getUserByAccount, getUserByEmail, linkAccount, createSession, getSessionAndUser, deleteSession, } = adapter;\n    let session = null;\n    let user = null;\n    let isNewUser = false;\n    const useJwtSession = sessionStrategy === \"jwt\";\n    if (sessionToken) {\n        if (useJwtSession) {\n            try {\n                const salt = options.cookies.sessionToken.name;\n                session = await jwt.decode({ ...jwt, token: sessionToken, salt });\n                if (session && \"sub\" in session && session.sub) {\n                    user = await getUser(session.sub);\n                }\n            }\n            catch {\n                // If session can't be verified, treat as no session\n            }\n        }\n        else {\n            const userAndSession = await getSessionAndUser(sessionToken);\n            if (userAndSession) {\n                session = userAndSession.session;\n                user = userAndSession.user;\n            }\n        }\n    }\n    if (account.type === \"email\") {\n        // If signing in with an email, check if an account with the same email address exists already\n        const userByEmail = await getUserByEmail(profile.email);\n        if (userByEmail) {\n            // If they are not already signed in as the same user, this flow will\n            // sign them out of the current session and sign them in as the new user\n            if (user?.id !== userByEmail.id && !useJwtSession && sessionToken) {\n                // Delete existing session if they are currently signed in as another user.\n                // This will switch user accounts for the session in cases where the user was\n                // already logged in with a different account.\n                await deleteSession(sessionToken);\n            }\n            // Update emailVerified property on the user object\n            user = await updateUser({\n                id: userByEmail.id,\n                emailVerified: new Date(),\n            });\n            await events.updateUser?.({ user });\n        }\n        else {\n            // Create user account if there isn't one for the email address already\n            user = await createUser({ ...profile, emailVerified: new Date() });\n            await events.createUser?.({ user });\n            isNewUser = true;\n        }\n        // Create new session\n        session = useJwtSession\n            ? {}\n            : await createSession({\n                sessionToken: generateSessionToken(),\n                userId: user.id,\n                expires: fromDate(options.session.maxAge),\n            });\n        return { session, user, isNewUser };\n    }\n    else if (account.type === \"webauthn\") {\n        // Check if the account exists\n        const userByAccount = await getUserByAccount({\n            providerAccountId: account.providerAccountId,\n            provider: account.provider,\n        });\n        if (userByAccount) {\n            if (user) {\n                // If the user is already signed in with this account, we don't need to do anything\n                if (userByAccount.id === user.id) {\n                    const currentAccount = { ...account, userId: user.id };\n                    return { session, user, isNewUser, account: currentAccount };\n                }\n                // If the user is currently signed in, but the new account they are signing in\n                // with is already associated with another user, then we cannot link them\n                // and need to return an error.\n                throw new AccountNotLinked(\"The account is already associated with another user\", { provider: account.provider });\n            }\n            // If there is no active session, but the account being signed in with is already\n            // associated with a valid user then create session to sign the user in.\n            session = useJwtSession\n                ? {}\n                : await createSession({\n                    sessionToken: generateSessionToken(),\n                    userId: userByAccount.id,\n                    expires: fromDate(options.session.maxAge),\n                });\n            const currentAccount = {\n                ...account,\n                userId: userByAccount.id,\n            };\n            return {\n                session,\n                user: userByAccount,\n                isNewUser,\n                account: currentAccount,\n            };\n        }\n        else {\n            // If the account doesn't exist, we'll create it\n            if (user) {\n                // If the user is already signed in and the account isn't already associated\n                // with another user account then we can go ahead and link the accounts safely.\n                await linkAccount({ ...account, userId: user.id });\n                await events.linkAccount?.({ user, account, profile });\n                // As they are already signed in, we don't need to do anything after linking them\n                const currentAccount = { ...account, userId: user.id };\n                return { session, user, isNewUser, account: currentAccount };\n            }\n            // If the user is not signed in and it looks like a new account then we\n            // check there also isn't an user account already associated with the same\n            // email address as the one in the request.\n            const userByEmail = profile.email\n                ? await getUserByEmail(profile.email)\n                : null;\n            if (userByEmail) {\n                // We don't trust user-provided email addresses, so we don't want to link accounts\n                // if the email address associated with the new account is already associated with\n                // an existing account.\n                throw new AccountNotLinked(\"Another account already exists with the same e-mail address\", { provider: account.provider });\n            }\n            else {\n                // If the current user is not logged in and the profile isn't linked to any user\n                // accounts (by email or provider account id)...\n                //\n                // If no account matching the same [provider].id or .email exists, we can\n                // create a new account for the user, link it to the OAuth account and\n                // create a new session for them so they are signed in with it.\n                user = await createUser({ ...profile });\n            }\n            await events.createUser?.({ user });\n            await linkAccount({ ...account, userId: user.id });\n            await events.linkAccount?.({ user, account, profile });\n            session = useJwtSession\n                ? {}\n                : await createSession({\n                    sessionToken: generateSessionToken(),\n                    userId: user.id,\n                    expires: fromDate(options.session.maxAge),\n                });\n            const currentAccount = { ...account, userId: user.id };\n            return { session, user, isNewUser: true, account: currentAccount };\n        }\n    }\n    // If signing in with OAuth account, check to see if the account exists already\n    const userByAccount = await getUserByAccount({\n        providerAccountId: account.providerAccountId,\n        provider: account.provider,\n    });\n    if (userByAccount) {\n        if (user) {\n            // If the user is already signed in with this account, we don't need to do anything\n            if (userByAccount.id === user.id) {\n                return { session, user, isNewUser };\n            }\n            // If the user is currently signed in, but the new account they are signing in\n            // with is already associated with another user, then we cannot link them\n            // and need to return an error.\n            throw new OAuthAccountNotLinked(\"The account is already associated with another user\", { provider: account.provider });\n        }\n        // If there is no active session, but the account being signed in with is already\n        // associated with a valid user then create session to sign the user in.\n        session = useJwtSession\n            ? {}\n            : await createSession({\n                sessionToken: generateSessionToken(),\n                userId: userByAccount.id,\n                expires: fromDate(options.session.maxAge),\n            });\n        return { session, user: userByAccount, isNewUser };\n    }\n    else {\n        const { provider: p } = options;\n        const { type, provider, providerAccountId, userId, ...tokenSet } = account;\n        const defaults = { providerAccountId, provider, type, userId };\n        account = Object.assign(p.account(tokenSet) ?? {}, defaults);\n        if (user) {\n            // If the user is already signed in and the OAuth account isn't already associated\n            // with another user account then we can go ahead and link the accounts safely.\n            await linkAccount({ ...account, userId: user.id });\n            await events.linkAccount?.({ user, account, profile });\n            // As they are already signed in, we don't need to do anything after linking them\n            return { session, user, isNewUser };\n        }\n        // If the user is not signed in and it looks like a new OAuth account then we\n        // check there also isn't an user account already associated with the same\n        // email address as the one in the OAuth profile.\n        //\n        // This step is often overlooked in OAuth implementations, but covers the following cases:\n        //\n        // 1. It makes it harder for someone to accidentally create two accounts.\n        //    e.g. by signin in with email, then again with an oauth account connected to the same email.\n        // 2. It makes it harder to hijack a user account using a 3rd party OAuth account.\n        //    e.g. by creating an oauth account then changing the email address associated with it.\n        //\n        // It's quite common for services to automatically link accounts in this case, but it's\n        // better practice to require the user to sign in *then* link accounts to be sure\n        // someone is not exploiting a problem with a third party OAuth service.\n        //\n        // OAuth providers should require email address verification to prevent this, but in\n        // practice that is not always the case; this helps protect against that.\n        const userByEmail = profile.email\n            ? await getUserByEmail(profile.email)\n            : null;\n        if (userByEmail) {\n            const provider = options.provider;\n            if (provider?.allowDangerousEmailAccountLinking) {\n                // If you trust the oauth provider to correctly verify email addresses, you can opt-in to\n                // account linking even when the user is not signed-in.\n                user = userByEmail;\n                isNewUser = false;\n            }\n            else {\n                // We end up here when we don't have an account with the same [provider].id *BUT*\n                // we do already have an account with the same email address as the one in the\n                // OAuth profile the user has just tried to sign in with.\n                //\n                // We don't want to have two accounts with the same email address, and we don't\n                // want to link them in case it's not safe to do so, so instead we prompt the user\n                // to sign in via email to verify their identity and then link the accounts.\n                throw new OAuthAccountNotLinked(\"Another account already exists with the same e-mail address\", { provider: account.provider });\n            }\n        }\n        else {\n            // If the current user is not logged in and the profile isn't linked to any user\n            // accounts (by email or provider account id)...\n            //\n            // If no account matching the same [provider].id or .email exists, we can\n            // create a new account for the user, link it to the OAuth account and\n            // create a new session for them so they are signed in with it.\n            user = await createUser({ ...profile, emailVerified: null });\n            isNewUser = true;\n        }\n        await events.createUser?.({ user });\n        await linkAccount({ ...account, userId: user.id });\n        await events.linkAccount?.({ user, account, profile });\n        session = useJwtSession\n            ? {}\n            : await createSession({\n                sessionToken: generateSessionToken(),\n                userId: user.id,\n                expires: fromDate(options.session.maxAge),\n            });\n        return { session, user, isNewUser };\n    }\n}\n", null, "import * as o from \"oauth4webapi\";\nimport { InvalidCheck } from \"../../../../errors.js\";\n// NOTE: We use the default JWT methods here because they encrypt/decrypt the payload, not just sign it.\nimport { decode, encode } from \"../../../../jwt.js\";\nconst COOKIE_TTL = 60 * 15; // 15 minutes\n/** Returns a cookie with a JWT encrypted payload. */\nasync function sealCookie(name, payload, options) {\n    const { cookies, logger } = options;\n    const cookie = cookies[name];\n    const expires = new Date();\n    expires.setTime(expires.getTime() + COOKIE_TTL * 1000);\n    logger.debug(`CREATE_${name.toUpperCase()}`, {\n        name: cookie.name,\n        payload,\n        COOKIE_TTL,\n        expires,\n    });\n    const encoded = await encode({\n        ...options.jwt,\n        maxAge: COOKIE_TTL,\n        token: { value: payload },\n        salt: cookie.name,\n    });\n    const cookieOptions = { ...cookie.options, expires };\n    return { name: cookie.name, value: encoded, options: cookieOptions };\n}\nasync function parseCookie(name, value, options) {\n    try {\n        const { logger, cookies, jwt } = options;\n        logger.debug(`PARSE_${name.toUpperCase()}`, { cookie: value });\n        if (!value)\n            throw new InvalidCheck(`${name} cookie was missing`);\n        const parsed = await decode({\n            ...jwt,\n            token: value,\n            salt: cookies[name].name,\n        });\n        if (parsed?.value)\n            return parsed.value;\n        throw new Error(\"Invalid cookie\");\n    }\n    catch (error) {\n        throw new InvalidCheck(`${name} value could not be parsed`, {\n            cause: error,\n        });\n    }\n}\nfunction clearCookie(name, options, resCookies) {\n    const { logger, cookies } = options;\n    const cookie = cookies[name];\n    logger.debug(`CLEAR_${name.toUpperCase()}`, { cookie });\n    resCookies.push({\n        name: cookie.name,\n        value: \"\",\n        options: { ...cookies[name].options, maxAge: 0 },\n    });\n}\nfunction useCookie(check, name) {\n    return async function (cookies, resCookies, options) {\n        const { provider, logger } = options;\n        if (!provider?.checks?.includes(check))\n            return;\n        const cookieValue = cookies?.[options.cookies[name].name];\n        logger.debug(`USE_${name.toUpperCase()}`, { value: cookieValue });\n        const parsed = await parseCookie(name, cookieValue, options);\n        clearCookie(name, options, resCookies);\n        return parsed;\n    };\n}\n/**\n * @see https://www.rfc-editor.org/rfc/rfc7636\n * @see https://danielfett.de/2020/05/16/pkce-vs-nonce-equivalent-or-not/#pkce\n */\nexport const pkce = {\n    /** Creates a PKCE code challenge and verifier pair. The verifier in stored in the cookie. */\n    async create(options) {\n        const code_verifier = o.generateRandomCodeVerifier();\n        const value = await o.calculatePKCECodeChallenge(code_verifier);\n        const cookie = await sealCookie(\"pkceCodeVerifier\", code_verifier, options);\n        return { cookie, value };\n    },\n    /**\n     * Returns code_verifier if the provider is configured to use PKCE,\n     * and clears the container cookie afterwards.\n     * An error is thrown if the code_verifier is missing or invalid.\n     */\n    use: useCookie(\"pkce\", \"pkceCodeVerifier\"),\n};\nconst STATE_MAX_AGE = 60 * 15; // 15 minutes in seconds\nconst encodedStateSalt = \"encodedState\";\n/**\n * @see https://www.rfc-editor.org/rfc/rfc6749#section-10.12\n * @see https://www.rfc-editor.org/rfc/rfc6749#section-4.1.1\n */\nexport const state = {\n    /** Creates a state cookie with an optionally encoded body. */\n    async create(options, origin) {\n        const { provider } = options;\n        if (!provider.checks.includes(\"state\")) {\n            if (origin) {\n                throw new InvalidCheck(\"State data was provided but the provider is not configured to use state\");\n            }\n            return;\n        }\n        // IDEA: Allow the user to pass data to be stored in the state\n        const payload = {\n            origin,\n            random: o.generateRandomState(),\n        };\n        const value = await encode({\n            secret: options.jwt.secret,\n            token: payload,\n            salt: encodedStateSalt,\n            maxAge: STATE_MAX_AGE,\n        });\n        const cookie = await sealCookie(\"state\", value, options);\n        return { cookie, value };\n    },\n    /**\n     * Returns state if the provider is configured to use state,\n     * and clears the container cookie afterwards.\n     * An error is thrown if the state is missing or invalid.\n     */\n    use: useCookie(\"state\", \"state\"),\n    /** Decodes the state. If it could not be decoded, it throws an error. */\n    async decode(state, options) {\n        try {\n            options.logger.debug(\"DECODE_STATE\", { state });\n            const payload = await decode({\n                secret: options.jwt.secret,\n                token: state,\n                salt: encodedStateSalt,\n            });\n            if (payload)\n                return payload;\n            throw new Error(\"Invalid state\");\n        }\n        catch (error) {\n            throw new InvalidCheck(\"State could not be decoded\", { cause: error });\n        }\n    },\n};\nexport const nonce = {\n    async create(options) {\n        if (!options.provider.checks.includes(\"nonce\"))\n            return;\n        const value = o.generateRandomNonce();\n        const cookie = await sealCookie(\"nonce\", value, options);\n        return { cookie, value };\n    },\n    /**\n     * Returns nonce if the provider is configured to use nonce,\n     * and clears the container cookie afterwards.\n     * An error is thrown if the nonce is missing or invalid.\n     * @see https://openid.net/specs/openid-connect-core-1_0.html#NonceNotes\n     * @see https://danielfett.de/2020/05/16/pkce-vs-nonce-equivalent-or-not/#nonce\n     */\n    use: useCookie(\"nonce\", \"nonce\"),\n};\nconst WEBAUTHN_CHALLENGE_MAX_AGE = 60 * 15; // 15 minutes in seconds\nconst webauthnChallengeSalt = \"encodedWebauthnChallenge\";\nexport const webauthnChallenge = {\n    async create(options, challenge, registerData) {\n        return {\n            cookie: await sealCookie(\"webauthnChallenge\", await encode({\n                secret: options.jwt.secret,\n                token: { challenge, registerData },\n                salt: webauthnChallengeSalt,\n                maxAge: WEBAUTHN_CHALLENGE_MAX_AGE,\n            }), options),\n        };\n    },\n    /** Returns WebAuthn challenge if present. */\n    async use(options, cookies, resCookies) {\n        const cookieValue = cookies?.[options.cookies.webauthnChallenge.name];\n        const parsed = await parseCookie(\"webauthnChallenge\", cookieValue, options);\n        const payload = await decode({\n            secret: options.jwt.secret,\n            token: parsed,\n            salt: webauthnChallengeSalt,\n        });\n        // Clear the WebAuthn challenge cookie after use\n        clearCookie(\"webauthnChallenge\", options, resCookies);\n        if (!payload)\n            throw new InvalidCheck(\"WebAuthn challenge was missing\");\n        return payload;\n    },\n};\n", "import * as checks from \"./checks.js\";\nimport * as o from \"oauth4webapi\";\nimport { OAuthCallbackError, OAuthProfileParseError, } from \"../../../../errors.js\";\nimport { isOIDCProvider } from \"../../../utils/providers.js\";\nimport { conformInternal, customFetch } from \"../../../symbols.js\";\nimport { decodeJwt } from \"jose\";\nfunction formUrlEncode(token) {\n    return encodeURIComponent(token).replace(/%20/g, \"+\");\n}\n/**\n * Formats client_id and client_secret as an HTTP Basic Authentication header as per the OAuth 2.0\n * specified in RFC6749.\n */\nfunction clientSecretBasic(clientId, clientSecret) {\n    const username = formUrlEncode(clientId);\n    const password = formUrlEncode(clientSecret);\n    const credentials = btoa(`${username}:${password}`);\n    return `Basic ${credentials}`;\n}\n/**\n * Handles the following OAuth steps.\n * https://www.rfc-editor.org/rfc/rfc6749#section-4.1.1\n * https://www.rfc-editor.org/rfc/rfc6749#section-4.1.3\n * https://openid.net/specs/openid-connect-core-1_0.html#UserInfoRequest\n *\n * @note Although requesting userinfo is not required by the OAuth2.0 spec,\n * we fetch it anyway. This is because we always want a user profile.\n */\nexport async function handleOAuth(params, cookies, options) {\n    const { logger, provider } = options;\n    let as;\n    const { token, userinfo } = provider;\n    // Falls back to authjs.dev if the user only passed params\n    if ((!token?.url || token.url.host === \"authjs.dev\") &&\n        (!userinfo?.url || userinfo.url.host === \"authjs.dev\")) {\n        // We assume that issuer is always defined as this has been asserted earlier\n        const issuer = new URL(provider.issuer);\n        const discoveryResponse = await o.discoveryRequest(issuer, {\n            [o.allowInsecureRequests]: true,\n            [o.customFetch]: provider[customFetch],\n        });\n        as = await o.processDiscoveryResponse(issuer, discoveryResponse);\n        if (!as.token_endpoint)\n            throw new TypeError(\"TODO: Authorization server did not provide a token endpoint.\");\n        if (!as.userinfo_endpoint)\n            throw new TypeError(\"TODO: Authorization server did not provide a userinfo endpoint.\");\n    }\n    else {\n        as = {\n            issuer: provider.issuer ?? \"https://authjs.dev\", // TODO: review fallback issuer\n            token_endpoint: token?.url.toString(),\n            userinfo_endpoint: userinfo?.url.toString(),\n        };\n    }\n    const client = {\n        client_id: provider.clientId,\n        ...provider.client,\n    };\n    let clientAuth;\n    switch (client.token_endpoint_auth_method) {\n        // TODO: in the next breaking major version have undefined be `client_secret_post`\n        case undefined:\n        case \"client_secret_basic\":\n            // TODO: in the next breaking major version use o.ClientSecretBasic() here\n            clientAuth = (_as, _client, _body, headers) => {\n                headers.set(\"authorization\", clientSecretBasic(provider.clientId, provider.clientSecret));\n            };\n            break;\n        case \"client_secret_post\":\n            clientAuth = o.ClientSecretPost(provider.clientSecret);\n            break;\n        case \"client_secret_jwt\":\n            clientAuth = o.ClientSecretJwt(provider.clientSecret);\n            break;\n        case \"private_key_jwt\":\n            clientAuth = o.PrivateKeyJwt(provider.token.clientPrivateKey, {\n                // TODO: review in the next breaking change\n                [o.modifyAssertion](_header, payload) {\n                    payload.aud = [as.issuer, as.token_endpoint];\n                },\n            });\n            break;\n        case \"none\":\n            clientAuth = o.None();\n            break;\n        default:\n            throw new Error(\"unsupported client authentication method\");\n    }\n    const resCookies = [];\n    const state = await checks.state.use(cookies, resCookies, options);\n    let codeGrantParams;\n    try {\n        codeGrantParams = o.validateAuthResponse(as, client, new URLSearchParams(params), provider.checks.includes(\"state\") ? state : o.skipStateCheck);\n    }\n    catch (err) {\n        if (err instanceof o.AuthorizationResponseError) {\n            const cause = {\n                providerId: provider.id,\n                ...Object.fromEntries(err.cause.entries()),\n            };\n            logger.debug(\"OAuthCallbackError\", cause);\n            throw new OAuthCallbackError(\"OAuth Provider returned an error\", cause);\n        }\n        throw err;\n    }\n    const codeVerifier = await checks.pkce.use(cookies, resCookies, options);\n    let redirect_uri = provider.callbackUrl;\n    if (!options.isOnRedirectProxy && provider.redirectProxyUrl) {\n        redirect_uri = provider.redirectProxyUrl;\n    }\n    let codeGrantResponse = await o.authorizationCodeGrantRequest(as, client, clientAuth, codeGrantParams, redirect_uri, codeVerifier ?? \"decoy\", {\n        // TODO: move away from allowing insecure HTTP requests\n        [o.allowInsecureRequests]: true,\n        [o.customFetch]: (...args) => {\n            if (!provider.checks.includes(\"pkce\")) {\n                args[1].body.delete(\"code_verifier\");\n            }\n            return (provider[customFetch] ?? fetch)(...args);\n        },\n    });\n    if (provider.token?.conform) {\n        codeGrantResponse =\n            (await provider.token.conform(codeGrantResponse.clone())) ??\n                codeGrantResponse;\n    }\n    let profile = {};\n    const requireIdToken = isOIDCProvider(provider);\n    if (provider[conformInternal]) {\n        switch (provider.id) {\n            case \"microsoft-entra-id\":\n            case \"azure-ad\": {\n                /**\n                 * These providers need the authorization server metadata to be re-processed\n                 * based on the `id_token`'s `tid` claim\n                 * @see https://github.com/MicrosoftDocs/azure-docs/issues/113944\n                 */\n                const { tid } = decodeJwt((await codeGrantResponse.clone().json()).id_token);\n                if (typeof tid === \"string\") {\n                    const tenantRe = /microsoftonline\\.com\\/(\\w+)\\/v2\\.0/;\n                    const tenantId = as.issuer?.match(tenantRe)?.[1] ?? \"common\";\n                    const issuer = new URL(as.issuer.replace(tenantId, tid));\n                    const discoveryResponse = await o.discoveryRequest(issuer, {\n                        [o.customFetch]: provider[customFetch],\n                    });\n                    as = await o.processDiscoveryResponse(issuer, discoveryResponse);\n                }\n                break;\n            }\n            default:\n                break;\n        }\n    }\n    const processedCodeResponse = await o.processAuthorizationCodeResponse(as, client, codeGrantResponse, {\n        expectedNonce: await checks.nonce.use(cookies, resCookies, options),\n        requireIdToken,\n    });\n    const tokens = processedCodeResponse;\n    if (requireIdToken) {\n        const idTokenClaims = o.getValidatedIdTokenClaims(processedCodeResponse);\n        profile = idTokenClaims;\n        // Apple sends some of the user information in a `user` parameter as a stringified JSON.\n        // It also only does so the first time the user consents to share their information.\n        if (provider[conformInternal] && provider.id === \"apple\") {\n            try {\n                profile.user = JSON.parse(params?.user);\n            }\n            catch { }\n        }\n        if (provider.idToken === false) {\n            const userinfoResponse = await o.userInfoRequest(as, client, processedCodeResponse.access_token, {\n                [o.customFetch]: provider[customFetch],\n                // TODO: move away from allowing insecure HTTP requests\n                [o.allowInsecureRequests]: true,\n            });\n            profile = await o.processUserInfoResponse(as, client, idTokenClaims.sub, userinfoResponse);\n        }\n    }\n    else {\n        if (userinfo?.request) {\n            const _profile = await userinfo.request({ tokens, provider });\n            if (_profile instanceof Object)\n                profile = _profile;\n        }\n        else if (userinfo?.url) {\n            const userinfoResponse = await o.userInfoRequest(as, client, processedCodeResponse.access_token, { [o.customFetch]: provider[customFetch] });\n            profile = await userinfoResponse.json();\n        }\n        else {\n            throw new TypeError(\"No userinfo endpoint configured\");\n        }\n    }\n    if (tokens.expires_in) {\n        tokens.expires_at =\n            Math.floor(Date.now() / 1000) + Number(tokens.expires_in);\n    }\n    const profileResult = await getUserAndAccount(profile, provider, tokens, logger);\n    return { ...profileResult, profile, cookies: resCookies };\n}\n/**\n * Returns the user and account that is going to be created in the database.\n * @internal\n */\nexport async function getUserAndAccount(OAuthProfile, provider, tokens, logger) {\n    try {\n        const userFromProfile = await provider.profile(OAuthProfile, tokens);\n        const user = {\n            ...userFromProfile,\n            // The user's id is intentionally not set based on the profile id, as\n            // the user should remain independent of the provider and the profile id\n            // is saved on the Account already, as `providerAccountId`.\n            id: crypto.randomUUID(),\n            email: userFromProfile.email?.toLowerCase(),\n        };\n        return {\n            user,\n            account: {\n                ...tokens,\n                provider: provider.id,\n                type: provider.type,\n                providerAccountId: userFromProfile.id ?? crypto.randomUUID(),\n            },\n        };\n    }\n    catch (e) {\n        // If we didn't get a response either there was a problem with the provider\n        // response *or* the user cancelled the action with the provider.\n        //\n        // Unfortunately, we can't tell which - at least not in a way that works for\n        // all providers, so we return an empty object; the user should then be\n        // redirected back to the sign up page. We log the error to help developers\n        // who might be trying to debug this when configuring a new provider.\n        logger.debug(\"getProfile error details\", OAuthProfile);\n        logger.error(new OAuthProfileParseError(e, { provider: provider.id }));\n    }\n}\n", "import { AdapterError, AuthError, InvalidProvider, MissingAdapter, WebAuthnVerificationError, } from \"../../errors.js\";\nimport { webauthnChallenge } from \"../actions/callback/oauth/checks.js\";\nimport { randomString } from \"./web.js\";\n/**\n * Infers the WebAuthn options based on the provided parameters.\n *\n * @param action - The WebAuthn action to perform (optional).\n * @param loggedInUser - The logged-in user (optional).\n * @param userInfoResponse - The response containing user information (optional).\n *\n * @returns The WebAuthn action to perform, or null if no inference could be made.\n */\nexport function inferWebAuthnOptions(action, loggedIn, userInfoResponse) {\n    const { user, exists = false } = userInfoResponse ?? {};\n    switch (action) {\n        case \"authenticate\": {\n            /**\n             * Always allow explicit authentication requests.\n             */\n            return \"authenticate\";\n        }\n        case \"register\": {\n            /**\n             * Registration is only allowed if:\n             * - The user is logged in, meaning the user wants to register a new authenticator.\n             * - The user is not logged in and provided user info that does NOT exist, meaning the user wants to register a new account.\n             */\n            if (user && loggedIn === exists)\n                return \"register\";\n            break;\n        }\n        case undefined: {\n            /**\n             * When no explicit action is provided, we try to infer it based on the user info provided. These are the possible cases:\n             * - Logged in users must always send an explit action, so we bail out in this case.\n             * - Otherwise, if no user info is provided, the desired action is authentication without pre-defined authenticators.\n             * - Otherwise, if the user info provided is of an existing user, the desired action is authentication with their pre-defined authenticators.\n             * - Finally, if the user info provided is of a non-existing user, the desired action is registration.\n             */\n            if (!loggedIn) {\n                if (user) {\n                    if (exists) {\n                        return \"authenticate\";\n                    }\n                    else {\n                        return \"register\";\n                    }\n                }\n                else {\n                    return \"authenticate\";\n                }\n            }\n            break;\n        }\n    }\n    // No decision could be made\n    return null;\n}\n/**\n * Retrieves the registration response for WebAuthn options request.\n *\n * @param options - The internal options for WebAuthn.\n * @param request - The request object.\n * @param user - The user information.\n * @param resCookies - Optional cookies to be included in the response.\n * @returns A promise that resolves to the WebAuthnOptionsResponse.\n */\nexport async function getRegistrationResponse(options, request, user, resCookies) {\n    // Get registration options\n    const regOptions = await getRegistrationOptions(options, request, user);\n    // Get signed cookie\n    const { cookie } = await webauthnChallenge.create(options, regOptions.challenge, user);\n    return {\n        status: 200,\n        cookies: [...(resCookies ?? []), cookie],\n        body: {\n            action: \"register\",\n            options: regOptions,\n        },\n        headers: {\n            \"Content-Type\": \"application/json\",\n        },\n    };\n}\n/**\n * Retrieves the authentication response for WebAuthn options request.\n *\n * @param options - The internal options for WebAuthn.\n * @param request - The request object.\n * @param user - Optional user information.\n * @param resCookies - Optional array of cookies to be included in the response.\n * @returns A promise that resolves to a WebAuthnOptionsResponse object.\n */\nexport async function getAuthenticationResponse(options, request, user, resCookies) {\n    // Get authentication options\n    const authOptions = await getAuthenticationOptions(options, request, user);\n    // Get signed cookie\n    const { cookie } = await webauthnChallenge.create(options, authOptions.challenge);\n    return {\n        status: 200,\n        cookies: [...(resCookies ?? []), cookie],\n        body: {\n            action: \"authenticate\",\n            options: authOptions,\n        },\n        headers: {\n            \"Content-Type\": \"application/json\",\n        },\n    };\n}\nexport async function verifyAuthenticate(options, request, resCookies) {\n    const { adapter, provider } = options;\n    // Get WebAuthn response from request body\n    const data = request.body && typeof request.body.data === \"string\"\n        ? JSON.parse(request.body.data)\n        : undefined;\n    if (!data ||\n        typeof data !== \"object\" ||\n        !(\"id\" in data) ||\n        typeof data.id !== \"string\") {\n        throw new AuthError(\"Invalid WebAuthn Authentication response\");\n    }\n    // Reset the ID so we smooth out implementation differences\n    const credentialID = toBase64(fromBase64(data.id));\n    // Get authenticator from database\n    const authenticator = await adapter.getAuthenticator(credentialID);\n    if (!authenticator) {\n        throw new AuthError(`WebAuthn authenticator not found in database: ${JSON.stringify({\n            credentialID,\n        })}`);\n    }\n    // Get challenge from request cookies\n    const { challenge: expectedChallenge } = await webauthnChallenge.use(options, request.cookies, resCookies);\n    // Verify the response\n    let verification;\n    try {\n        const relayingParty = provider.getRelayingParty(options, request);\n        verification = await provider.simpleWebAuthn.verifyAuthenticationResponse({\n            ...provider.verifyAuthenticationOptions,\n            expectedChallenge,\n            response: data,\n            authenticator: fromAdapterAuthenticator(authenticator),\n            expectedOrigin: relayingParty.origin,\n            expectedRPID: relayingParty.id,\n        });\n    }\n    catch (e) {\n        throw new WebAuthnVerificationError(e);\n    }\n    const { verified, authenticationInfo } = verification;\n    // Make sure the response was verified\n    if (!verified) {\n        throw new WebAuthnVerificationError(\"WebAuthn authentication response could not be verified\");\n    }\n    // Update authenticator counter\n    try {\n        const { newCounter } = authenticationInfo;\n        await adapter.updateAuthenticatorCounter(authenticator.credentialID, newCounter);\n    }\n    catch (e) {\n        throw new AdapterError(`Failed to update authenticator counter. This may cause future authentication attempts to fail. ${JSON.stringify({\n            credentialID,\n            oldCounter: authenticator.counter,\n            newCounter: authenticationInfo.newCounter,\n        })}`, e);\n    }\n    // Get the account and user\n    const account = await adapter.getAccount(authenticator.providerAccountId, provider.id);\n    if (!account) {\n        throw new AuthError(`WebAuthn account not found in database: ${JSON.stringify({\n            credentialID,\n            providerAccountId: authenticator.providerAccountId,\n        })}`);\n    }\n    const user = await adapter.getUser(account.userId);\n    if (!user) {\n        throw new AuthError(`WebAuthn user not found in database: ${JSON.stringify({\n            credentialID,\n            providerAccountId: authenticator.providerAccountId,\n            userID: account.userId,\n        })}`);\n    }\n    return {\n        account,\n        user,\n    };\n}\nexport async function verifyRegister(options, request, resCookies) {\n    const { provider } = options;\n    // Get WebAuthn response from request body\n    const data = request.body && typeof request.body.data === \"string\"\n        ? JSON.parse(request.body.data)\n        : undefined;\n    if (!data ||\n        typeof data !== \"object\" ||\n        !(\"id\" in data) ||\n        typeof data.id !== \"string\") {\n        throw new AuthError(\"Invalid WebAuthn Registration response\");\n    }\n    // Get challenge from request cookies\n    const { challenge: expectedChallenge, registerData: user } = await webauthnChallenge.use(options, request.cookies, resCookies);\n    if (!user) {\n        throw new AuthError(\"Missing user registration data in WebAuthn challenge cookie\");\n    }\n    // Verify the response\n    let verification;\n    try {\n        const relayingParty = provider.getRelayingParty(options, request);\n        verification = await provider.simpleWebAuthn.verifyRegistrationResponse({\n            ...provider.verifyRegistrationOptions,\n            expectedChallenge,\n            response: data,\n            expectedOrigin: relayingParty.origin,\n            expectedRPID: relayingParty.id,\n        });\n    }\n    catch (e) {\n        throw new WebAuthnVerificationError(e);\n    }\n    // Make sure the response was verified\n    if (!verification.verified || !verification.registrationInfo) {\n        throw new WebAuthnVerificationError(\"WebAuthn registration response could not be verified\");\n    }\n    // Build a new account\n    const account = {\n        providerAccountId: toBase64(verification.registrationInfo.credentialID),\n        provider: options.provider.id,\n        type: provider.type,\n    };\n    // Build a new authenticator\n    const authenticator = {\n        providerAccountId: account.providerAccountId,\n        counter: verification.registrationInfo.counter,\n        credentialID: toBase64(verification.registrationInfo.credentialID),\n        credentialPublicKey: toBase64(verification.registrationInfo.credentialPublicKey),\n        credentialBackedUp: verification.registrationInfo.credentialBackedUp,\n        credentialDeviceType: verification.registrationInfo.credentialDeviceType,\n        transports: transportsToString(data.response\n            .transports),\n    };\n    // Return created stuff\n    return {\n        user,\n        account,\n        authenticator,\n    };\n}\n/**\n * Generates WebAuthn authentication options.\n *\n * @param options - The internal options for WebAuthn.\n * @param request - The request object.\n * @param user - Optional user information.\n * @returns The authentication options.\n */\nasync function getAuthenticationOptions(options, request, user) {\n    const { provider, adapter } = options;\n    // Get the user's authenticators.\n    const authenticators = user && user[\"id\"]\n        ? await adapter.listAuthenticatorsByUserId(user.id)\n        : null;\n    const relayingParty = provider.getRelayingParty(options, request);\n    // Return the authentication options.\n    return await provider.simpleWebAuthn.generateAuthenticationOptions({\n        ...provider.authenticationOptions,\n        rpID: relayingParty.id,\n        allowCredentials: authenticators?.map((a) => ({\n            id: fromBase64(a.credentialID),\n            type: \"public-key\",\n            transports: stringToTransports(a.transports),\n        })),\n    });\n}\n/**\n * Generates WebAuthn registration options.\n *\n * @param options - The internal options for WebAuthn.\n * @param request - The request object.\n * @param user - The user information.\n * @returns The registration options.\n */\nasync function getRegistrationOptions(options, request, user) {\n    const { provider, adapter } = options;\n    // Get the user's authenticators.\n    const authenticators = user[\"id\"]\n        ? await adapter.listAuthenticatorsByUserId(user.id)\n        : null;\n    // Generate a random user ID for the credential.\n    // We can do this because we don't use this user ID to link the\n    // credential to the user. Instead, we store actual userID in the\n    // Authenticator object and fetch it via it's credential ID.\n    const userID = randomString(32);\n    const relayingParty = provider.getRelayingParty(options, request);\n    // Return the registration options.\n    return await provider.simpleWebAuthn.generateRegistrationOptions({\n        ...provider.registrationOptions,\n        userID,\n        userName: user.email,\n        userDisplayName: user.name ?? undefined,\n        rpID: relayingParty.id,\n        rpName: relayingParty.name,\n        excludeCredentials: authenticators?.map((a) => ({\n            id: fromBase64(a.credentialID),\n            type: \"public-key\",\n            transports: stringToTransports(a.transports),\n        })),\n    });\n}\nexport function assertInternalOptionsWebAuthn(options) {\n    const { provider, adapter } = options;\n    // Adapter is required for WebAuthn\n    if (!adapter)\n        throw new MissingAdapter(\"An adapter is required for the WebAuthn provider\");\n    // Provider must be WebAuthn\n    if (!provider || provider.type !== \"webauthn\") {\n        throw new InvalidProvider(\"Provider must be WebAuthn\");\n    }\n    // Narrow the options type for typed usage later\n    return { ...options, provider, adapter };\n}\nfunction fromAdapterAuthenticator(authenticator) {\n    return {\n        ...authenticator,\n        credentialDeviceType: authenticator.credentialDeviceType,\n        transports: stringToTransports(authenticator.transports),\n        credentialID: fromBase64(authenticator.credentialID),\n        credentialPublicKey: fromBase64(authenticator.credentialPublicKey),\n    };\n}\nexport function fromBase64(base64) {\n    return new Uint8Array(Buffer.from(base64, \"base64\"));\n}\nexport function toBase64(bytes) {\n    return Buffer.from(bytes).toString(\"base64\");\n}\nexport function transportsToString(transports) {\n    return transports?.join(\",\");\n}\nexport function stringToTransports(tstring) {\n    return tstring\n        ? tstring.split(\",\")\n        : undefined;\n}\n", "// TODO: Make this file smaller\nimport { AuthError, AccessDenied, CallbackRouteError, CredentialsSignin, InvalidProvider, Verification, } from \"../../../errors.js\";\nimport { handleLoginOrRegister } from \"./handle-login.js\";\nimport { handleOAuth } from \"./oauth/callback.js\";\nimport { state } from \"./oauth/checks.js\";\nimport { createHash } from \"../../utils/web.js\";\nimport { assertInternalOptionsWebAuthn, verifyAuthenticate, verifyRegister, } from \"../../utils/webauthn-utils.js\";\n/** Handle callbacks from login services */\nexport async function callback(request, options, sessionStore, cookies) {\n    if (!options.provider)\n        throw new InvalidProvider(\"Callback route called without provider\");\n    const { query, body, method, headers } = request;\n    const { provider, adapter, url, callbackUrl, pages, jwt, events, callbacks, session: { strategy: sessionStrategy, maxAge: sessionMaxAge }, logger, } = options;\n    const useJwtSession = sessionStrategy === \"jwt\";\n    try {\n        if (provider.type === \"oauth\" || provider.type === \"oidc\") {\n            // Use body if the response mode is set to form_post. For all other cases, use query\n            const params = provider.authorization?.url.searchParams.get(\"response_mode\") ===\n                \"form_post\"\n                ? body\n                : query;\n            // If we have a state and we are on a redirect proxy, we try to parse it\n            // and see if it contains a valid origin to redirect to. If it does, we\n            // redirect the user to that origin with the original state.\n            if (options.isOnRedirectProxy && params?.state) {\n                // NOTE: We rely on the state being encrypted using a shared secret\n                // between the proxy and the original server.\n                const parsedState = await state.decode(params.state, options);\n                const shouldRedirect = parsedState?.origin &&\n                    new URL(parsedState.origin).origin !== options.url.origin;\n                if (shouldRedirect) {\n                    const proxyRedirect = `${parsedState.origin}?${new URLSearchParams(params)}`;\n                    logger.debug(\"Proxy redirecting to\", proxyRedirect);\n                    return { redirect: proxyRedirect, cookies };\n                }\n            }\n            const authorizationResult = await handleOAuth(params, request.cookies, options);\n            if (authorizationResult.cookies.length) {\n                cookies.push(...authorizationResult.cookies);\n            }\n            logger.debug(\"authorization result\", authorizationResult);\n            const { user: userFromProvider, account, profile: OAuthProfile, } = authorizationResult;\n            // If we don't have a profile object then either something went wrong\n            // or the user cancelled signing in. We don't know which, so we just\n            // direct the user to the signin page for now. We could do something\n            // else in future.\n            // TODO: Handle user cancelling signin\n            if (!userFromProvider || !account || !OAuthProfile) {\n                return { redirect: `${url}/signin`, cookies };\n            }\n            // Check if user is allowed to sign in\n            // Attempt to get Profile from OAuth provider details before invoking\n            // signIn callback - but if no user object is returned, that is fine\n            // (that just means it's a new user signing in for the first time).\n            let userByAccount;\n            if (adapter) {\n                const { getUserByAccount } = adapter;\n                userByAccount = await getUserByAccount({\n                    providerAccountId: account.providerAccountId,\n                    provider: provider.id,\n                });\n            }\n            const redirect = await handleAuthorized({\n                user: userByAccount ?? userFromProvider,\n                account,\n                profile: OAuthProfile,\n            }, options);\n            if (redirect)\n                return { redirect, cookies };\n            const { user, session, isNewUser } = await handleLoginOrRegister(sessionStore.value, userFromProvider, account, options);\n            if (useJwtSession) {\n                const defaultToken = {\n                    name: user.name,\n                    email: user.email,\n                    picture: user.image,\n                    sub: user.id?.toString(),\n                };\n                const token = await callbacks.jwt({\n                    token: defaultToken,\n                    user,\n                    account,\n                    profile: OAuthProfile,\n                    isNewUser,\n                    trigger: isNewUser ? \"signUp\" : \"signIn\",\n                });\n                // Clear cookies if token is null\n                if (token === null) {\n                    cookies.push(...sessionStore.clean());\n                }\n                else {\n                    const salt = options.cookies.sessionToken.name;\n                    // Encode token\n                    const newToken = await jwt.encode({ ...jwt, token, salt });\n                    // Set cookie expiry date\n                    const cookieExpires = new Date();\n                    cookieExpires.setTime(cookieExpires.getTime() + sessionMaxAge * 1000);\n                    const sessionCookies = sessionStore.chunk(newToken, {\n                        expires: cookieExpires,\n                    });\n                    cookies.push(...sessionCookies);\n                }\n            }\n            else {\n                // Save Session Token in cookie\n                cookies.push({\n                    name: options.cookies.sessionToken.name,\n                    value: session.sessionToken,\n                    options: {\n                        ...options.cookies.sessionToken.options,\n                        expires: session.expires,\n                    },\n                });\n            }\n            await events.signIn?.({\n                user,\n                account,\n                profile: OAuthProfile,\n                isNewUser,\n            });\n            // Handle first logins on new accounts\n            // e.g. option to send users to a new account landing page on initial login\n            // Note that the callback URL is preserved, so the journey can still be resumed\n            if (isNewUser && pages.newUser) {\n                return {\n                    redirect: `${pages.newUser}${pages.newUser.includes(\"?\") ? \"&\" : \"?\"}${new URLSearchParams({ callbackUrl })}`,\n                    cookies,\n                };\n            }\n            return { redirect: callbackUrl, cookies };\n        }\n        else if (provider.type === \"email\") {\n            const paramToken = query?.token;\n            const paramIdentifier = query?.email;\n            if (!paramToken) {\n                const e = new TypeError(\"Missing token. The sign-in URL was manually opened without token or the link was not sent correctly in the email.\", { cause: { hasToken: !!paramToken } });\n                e.name = \"Configuration\";\n                throw e;\n            }\n            const secret = provider.secret ?? options.secret;\n            // @ts-expect-error -- Verified in `assertConfig`.\n            const invite = await adapter.useVerificationToken({\n                // @ts-expect-error User-land adapters might decide to omit the identifier during lookup\n                identifier: paramIdentifier, // TODO: Drop this requirement for lookup in official adapters too\n                token: await createHash(`${paramToken}${secret}`),\n            });\n            const hasInvite = !!invite;\n            const expired = hasInvite && invite.expires.valueOf() < Date.now();\n            const invalidInvite = !hasInvite ||\n                expired ||\n                // The user might have configured the link to not contain the identifier\n                // so we only compare if it exists\n                (paramIdentifier && invite.identifier !== paramIdentifier);\n            if (invalidInvite)\n                throw new Verification({ hasInvite, expired });\n            const { identifier } = invite;\n            const user = (await adapter.getUserByEmail(identifier)) ?? {\n                id: crypto.randomUUID(),\n                email: identifier,\n                emailVerified: null,\n            };\n            const account = {\n                providerAccountId: user.email,\n                userId: user.id,\n                type: \"email\",\n                provider: provider.id,\n            };\n            const redirect = await handleAuthorized({ user, account }, options);\n            if (redirect)\n                return { redirect, cookies };\n            // Sign user in\n            const { user: loggedInUser, session, isNewUser, } = await handleLoginOrRegister(sessionStore.value, user, account, options);\n            if (useJwtSession) {\n                const defaultToken = {\n                    name: loggedInUser.name,\n                    email: loggedInUser.email,\n                    picture: loggedInUser.image,\n                    sub: loggedInUser.id?.toString(),\n                };\n                const token = await callbacks.jwt({\n                    token: defaultToken,\n                    user: loggedInUser,\n                    account,\n                    isNewUser,\n                    trigger: isNewUser ? \"signUp\" : \"signIn\",\n                });\n                // Clear cookies if token is null\n                if (token === null) {\n                    cookies.push(...sessionStore.clean());\n                }\n                else {\n                    const salt = options.cookies.sessionToken.name;\n                    // Encode token\n                    const newToken = await jwt.encode({ ...jwt, token, salt });\n                    // Set cookie expiry date\n                    const cookieExpires = new Date();\n                    cookieExpires.setTime(cookieExpires.getTime() + sessionMaxAge * 1000);\n                    const sessionCookies = sessionStore.chunk(newToken, {\n                        expires: cookieExpires,\n                    });\n                    cookies.push(...sessionCookies);\n                }\n            }\n            else {\n                // Save Session Token in cookie\n                cookies.push({\n                    name: options.cookies.sessionToken.name,\n                    value: session.sessionToken,\n                    options: {\n                        ...options.cookies.sessionToken.options,\n                        expires: session.expires,\n                    },\n                });\n            }\n            await events.signIn?.({ user: loggedInUser, account, isNewUser });\n            // Handle first logins on new accounts\n            // e.g. option to send users to a new account landing page on initial login\n            // Note that the callback URL is preserved, so the journey can still be resumed\n            if (isNewUser && pages.newUser) {\n                return {\n                    redirect: `${pages.newUser}${pages.newUser.includes(\"?\") ? \"&\" : \"?\"}${new URLSearchParams({ callbackUrl })}`,\n                    cookies,\n                };\n            }\n            // Callback URL is already verified at this point, so safe to use if specified\n            return { redirect: callbackUrl, cookies };\n        }\n        else if (provider.type === \"credentials\" && method === \"POST\") {\n            const credentials = body ?? {};\n            // TODO: Forward the original request as is, instead of reconstructing it\n            Object.entries(query ?? {}).forEach(([k, v]) => url.searchParams.set(k, v));\n            const userFromAuthorize = await provider.authorize(credentials, \n            // prettier-ignore\n            new Request(url, { headers, method, body: JSON.stringify(body) }));\n            const user = userFromAuthorize;\n            if (!user)\n                throw new CredentialsSignin();\n            else\n                user.id = user.id?.toString() ?? crypto.randomUUID();\n            const account = {\n                providerAccountId: user.id,\n                type: \"credentials\",\n                provider: provider.id,\n            };\n            const redirect = await handleAuthorized({ user, account, credentials }, options);\n            if (redirect)\n                return { redirect, cookies };\n            const defaultToken = {\n                name: user.name,\n                email: user.email,\n                picture: user.image,\n                sub: user.id,\n            };\n            const token = await callbacks.jwt({\n                token: defaultToken,\n                user,\n                account,\n                isNewUser: false,\n                trigger: \"signIn\",\n            });\n            // Clear cookies if token is null\n            if (token === null) {\n                cookies.push(...sessionStore.clean());\n            }\n            else {\n                const salt = options.cookies.sessionToken.name;\n                // Encode token\n                const newToken = await jwt.encode({ ...jwt, token, salt });\n                // Set cookie expiry date\n                const cookieExpires = new Date();\n                cookieExpires.setTime(cookieExpires.getTime() + sessionMaxAge * 1000);\n                const sessionCookies = sessionStore.chunk(newToken, {\n                    expires: cookieExpires,\n                });\n                cookies.push(...sessionCookies);\n            }\n            await events.signIn?.({ user, account });\n            return { redirect: callbackUrl, cookies };\n        }\n        else if (provider.type === \"webauthn\" && method === \"POST\") {\n            // Get callback action from request. It should be either \"authenticate\" or \"register\"\n            const action = request.body?.action;\n            if (typeof action !== \"string\" ||\n                (action !== \"authenticate\" && action !== \"register\")) {\n                throw new AuthError(\"Invalid action parameter\");\n            }\n            // Return an error if the adapter is missing or if the provider\n            // is not a webauthn provider.\n            const localOptions = assertInternalOptionsWebAuthn(options);\n            // Verify request to get user, account and authenticator\n            let user;\n            let account;\n            let authenticator;\n            switch (action) {\n                case \"authenticate\": {\n                    const verified = await verifyAuthenticate(localOptions, request, cookies);\n                    user = verified.user;\n                    account = verified.account;\n                    break;\n                }\n                case \"register\": {\n                    const verified = await verifyRegister(options, request, cookies);\n                    user = verified.user;\n                    account = verified.account;\n                    authenticator = verified.authenticator;\n                    break;\n                }\n            }\n            // Check if user is allowed to sign in\n            await handleAuthorized({ user, account }, options);\n            // Sign user in, creating them and their account if needed\n            const { user: loggedInUser, isNewUser, session, account: currentAccount, } = await handleLoginOrRegister(sessionStore.value, user, account, options);\n            if (!currentAccount) {\n                // This is mostly for type checking. It should never actually happen.\n                throw new AuthError(\"Error creating or finding account\");\n            }\n            // Create new authenticator if needed\n            if (authenticator && loggedInUser.id) {\n                await localOptions.adapter.createAuthenticator({\n                    ...authenticator,\n                    userId: loggedInUser.id,\n                });\n            }\n            // Do the session registering dance\n            if (useJwtSession) {\n                const defaultToken = {\n                    name: loggedInUser.name,\n                    email: loggedInUser.email,\n                    picture: loggedInUser.image,\n                    sub: loggedInUser.id?.toString(),\n                };\n                const token = await callbacks.jwt({\n                    token: defaultToken,\n                    user: loggedInUser,\n                    account: currentAccount,\n                    isNewUser,\n                    trigger: isNewUser ? \"signUp\" : \"signIn\",\n                });\n                // Clear cookies if token is null\n                if (token === null) {\n                    cookies.push(...sessionStore.clean());\n                }\n                else {\n                    const salt = options.cookies.sessionToken.name;\n                    // Encode token\n                    const newToken = await jwt.encode({ ...jwt, token, salt });\n                    // Set cookie expiry date\n                    const cookieExpires = new Date();\n                    cookieExpires.setTime(cookieExpires.getTime() + sessionMaxAge * 1000);\n                    const sessionCookies = sessionStore.chunk(newToken, {\n                        expires: cookieExpires,\n                    });\n                    cookies.push(...sessionCookies);\n                }\n            }\n            else {\n                // Save Session Token in cookie\n                cookies.push({\n                    name: options.cookies.sessionToken.name,\n                    value: session.sessionToken,\n                    options: {\n                        ...options.cookies.sessionToken.options,\n                        expires: session.expires,\n                    },\n                });\n            }\n            await events.signIn?.({\n                user: loggedInUser,\n                account: currentAccount,\n                isNewUser,\n            });\n            // Handle first logins on new accounts\n            // e.g. option to send users to a new account landing page on initial login\n            // Note that the callback URL is preserved, so the journey can still be resumed\n            if (isNewUser && pages.newUser) {\n                return {\n                    redirect: `${pages.newUser}${pages.newUser.includes(\"?\") ? \"&\" : \"?\"}${new URLSearchParams({ callbackUrl })}`,\n                    cookies,\n                };\n            }\n            // Callback URL is already verified at this point, so safe to use if specified\n            return { redirect: callbackUrl, cookies };\n        }\n        throw new InvalidProvider(`Callback for provider type (${provider.type}) is not supported`);\n    }\n    catch (e) {\n        if (e instanceof AuthError)\n            throw e;\n        const error = new CallbackRouteError(e, { provider: provider.id });\n        logger.debug(\"callback route error details\", { method, query, body });\n        throw error;\n    }\n}\nasync function handleAuthorized(params, config) {\n    let authorized;\n    const { signIn, redirect } = config.callbacks;\n    try {\n        authorized = await signIn(params);\n    }\n    catch (e) {\n        if (e instanceof AuthError)\n            throw e;\n        throw new AccessDenied(e);\n    }\n    if (!authorized)\n        throw new AccessDenied(\"AccessDenied\");\n    if (typeof authorized !== \"string\")\n        return;\n    return await redirect({ url: authorized, baseUrl: config.url.origin });\n}\n", "import { JWTSessionError, SessionTokenError } from \"../../errors.js\";\nimport { fromDate } from \"../utils/date.js\";\n/** Return a session object filtered via `callbacks.session` */\nexport async function session(options, sessionStore, cookies, isUpdate, newSession) {\n    const { adapter, jwt, events, callbacks, logger, session: { strategy: sessionStrategy, maxAge: sessionMaxAge }, } = options;\n    const response = {\n        body: null,\n        headers: { \"Content-Type\": \"application/json\" },\n        cookies,\n    };\n    const sessionToken = sessionStore.value;\n    if (!sessionToken)\n        return response;\n    if (sessionStrategy === \"jwt\") {\n        try {\n            const salt = options.cookies.sessionToken.name;\n            const payload = await jwt.decode({ ...jwt, token: sessionToken, salt });\n            if (!payload)\n                throw new Error(\"Invalid JWT\");\n            // @ts-expect-error\n            const token = await callbacks.jwt({\n                token: payload,\n                ...(isUpdate && { trigger: \"update\" }),\n                session: newSession,\n            });\n            const newExpires = fromDate(sessionMaxAge);\n            if (token !== null) {\n                // By default, only exposes a limited subset of information to the client\n                // as needed for presentation purposes (e.g. \"you are logged in as...\").\n                const session = {\n                    user: { name: token.name, email: token.email, image: token.picture },\n                    expires: newExpires.toISOString(),\n                };\n                // @ts-expect-error\n                const newSession = await callbacks.session({ session, token });\n                // Return session payload as response\n                response.body = newSession;\n                // Refresh JWT expiry by re-signing it, with an updated expiry date\n                const newToken = await jwt.encode({ ...jwt, token, salt });\n                // Set cookie, to also update expiry date on cookie\n                const sessionCookies = sessionStore.chunk(newToken, {\n                    expires: newExpires,\n                });\n                response.cookies?.push(...sessionCookies);\n                await events.session?.({ session: newSession, token });\n            }\n            else {\n                response.cookies?.push(...sessionStore.clean());\n            }\n        }\n        catch (e) {\n            logger.error(new JWTSessionError(e));\n            // If the JWT is not verifiable remove the broken session cookie(s).\n            response.cookies?.push(...sessionStore.clean());\n        }\n        return response;\n    }\n    // Retrieve session from database\n    try {\n        const { getSessionAndUser, deleteSession, updateSession } = adapter;\n        let userAndSession = await getSessionAndUser(sessionToken);\n        // If session has expired, clean up the database\n        if (userAndSession &&\n            userAndSession.session.expires.valueOf() < Date.now()) {\n            await deleteSession(sessionToken);\n            userAndSession = null;\n        }\n        if (userAndSession) {\n            const { user, session } = userAndSession;\n            const sessionUpdateAge = options.session.updateAge;\n            // Calculate last updated date to throttle write updates to database\n            // Formula: ({expiry date} - sessionMaxAge) + sessionUpdateAge\n            //     e.g. ({expiry date} - 30 days) + 1 hour\n            const sessionIsDueToBeUpdatedDate = session.expires.valueOf() -\n                sessionMaxAge * 1000 +\n                sessionUpdateAge * 1000;\n            const newExpires = fromDate(sessionMaxAge);\n            // Trigger update of session expiry date and write to database, only\n            // if the session was last updated more than {sessionUpdateAge} ago\n            if (sessionIsDueToBeUpdatedDate <= Date.now()) {\n                await updateSession({\n                    sessionToken: sessionToken,\n                    expires: newExpires,\n                });\n            }\n            // Pass Session through to the session callback\n            const sessionPayload = await callbacks.session({\n                // TODO: user already passed below,\n                // remove from session object in https://github.com/nextauthjs/next-auth/pull/9702\n                // @ts-expect-error\n                session: { ...session, user },\n                user,\n                newSession,\n                ...(isUpdate ? { trigger: \"update\" } : {}),\n            });\n            // Return session payload as response\n            response.body = sessionPayload;\n            // Set cookie again to update expiry\n            response.cookies?.push({\n                name: options.cookies.sessionToken.name,\n                value: sessionToken,\n                options: {\n                    ...options.cookies.sessionToken.options,\n                    expires: newExpires,\n                },\n            });\n            // @ts-expect-error\n            await events.session?.({ session: sessionPayload });\n        }\n        else if (sessionToken) {\n            // If `sessionToken` was found set but it's not valid for a session then\n            // remove the sessionToken cookie from browser.\n            response.cookies?.push(...sessionStore.clean());\n        }\n    }\n    catch (e) {\n        logger.error(new SessionTokenError(e));\n    }\n    return response;\n}\n", "import * as checks from \"../callback/oauth/checks.js\";\nimport * as o from \"oauth4webapi\";\nimport { customFetch } from \"../../symbols.js\";\n/**\n * Generates an authorization/request token URL.\n *\n * [OAuth 2](https://www.oauth.com/oauth2-servers/authorization/the-authorization-request/)\n */\nexport async function getAuthorizationUrl(query, options) {\n    const { logger, provider } = options;\n    let url = provider.authorization?.url;\n    let as;\n    // Falls back to authjs.dev if the user only passed params\n    if (!url || url.host === \"authjs.dev\") {\n        // If url is undefined, we assume that issuer is always defined\n        // We check this in assert.ts\n        const issuer = new URL(provider.issuer);\n        const discoveryResponse = await o.discoveryRequest(issuer, {\n            [o.customFetch]: provider[customFetch],\n            // TODO: move away from allowing insecure HTTP requests\n            [o.allowInsecureRequests]: true,\n        });\n        const as = await o.processDiscoveryResponse(issuer, discoveryResponse);\n        if (!as.authorization_endpoint) {\n            throw new TypeError(\"Authorization server did not provide an authorization endpoint.\");\n        }\n        url = new URL(as.authorization_endpoint);\n    }\n    const authParams = url.searchParams;\n    let redirect_uri = provider.callbackUrl;\n    let data;\n    if (!options.isOnRedirectProxy && provider.redirectProxyUrl) {\n        redirect_uri = provider.redirectProxyUrl;\n        data = provider.callbackUrl;\n        logger.debug(\"using redirect proxy\", { redirect_uri, data });\n    }\n    const params = Object.assign({\n        response_type: \"code\",\n        // clientId can technically be undefined, should we check this in assert.ts or rely on the Authorization Server to do it?\n        client_id: provider.clientId,\n        redirect_uri,\n        // @ts-expect-error TODO:\n        ...provider.authorization?.params,\n    }, Object.fromEntries(provider.authorization?.url.searchParams ?? []), query);\n    for (const k in params)\n        authParams.set(k, params[k]);\n    const cookies = [];\n    if (\n    // Otherwise \"POST /redirect_uri\" wouldn't include the cookies\n    provider.authorization?.url.searchParams.get(\"response_mode\") ===\n        \"form_post\") {\n        options.cookies.state.options.sameSite = \"none\";\n        options.cookies.state.options.secure = true;\n        options.cookies.nonce.options.sameSite = \"none\";\n        options.cookies.nonce.options.secure = true;\n    }\n    const state = await checks.state.create(options, data);\n    if (state) {\n        authParams.set(\"state\", state.value);\n        cookies.push(state.cookie);\n    }\n    if (provider.checks?.includes(\"pkce\")) {\n        if (as && !as.code_challenge_methods_supported?.includes(\"S256\")) {\n            // We assume S256 PKCE support, if the server does not advertise that,\n            // a random `nonce` must be used for CSRF protection.\n            if (provider.type === \"oidc\")\n                provider.checks = [\"nonce\"];\n        }\n        else {\n            const { value, cookie } = await checks.pkce.create(options);\n            authParams.set(\"code_challenge\", value);\n            authParams.set(\"code_challenge_method\", \"S256\");\n            cookies.push(cookie);\n        }\n    }\n    const nonce = await checks.nonce.create(options);\n    if (nonce) {\n        authParams.set(\"nonce\", nonce.value);\n        cookies.push(nonce.cookie);\n    }\n    // TODO: This does not work in normalizeOAuth because authorization endpoint can come from discovery\n    // Need to make normalizeOAuth async\n    if (provider.type === \"oidc\" && !url.searchParams.has(\"scope\")) {\n        url.searchParams.set(\"scope\", \"openid profile email\");\n    }\n    logger.debug(\"authorization url is ready\", { url, cookies, provider });\n    return { redirect: url.toString(), cookies };\n}\n", "import { createHash, randomString, toRequest } from \"../../utils/web.js\";\nimport { AccessDenied } from \"../../../errors.js\";\n/**\n * Starts an e-mail login flow, by generating a token,\n * and sending it to the user's e-mail (with the help of a DB adapter).\n * At the end, it returns a redirect to the `verify-request` page.\n */\nexport async function sendToken(request, options) {\n    const { body } = request;\n    const { provider, callbacks, adapter } = options;\n    const normalizer = provider.normalizeIdentifier ?? defaultNormalizer;\n    const email = normalizer(body?.email);\n    const defaultUser = { id: crypto.randomUUID(), email, emailVerified: null };\n    const user = (await adapter.getUserByEmail(email)) ?? defaultUser;\n    const account = {\n        providerAccountId: email,\n        userId: user.id,\n        type: \"email\",\n        provider: provider.id,\n    };\n    let authorized;\n    try {\n        authorized = await callbacks.signIn({\n            user,\n            account,\n            email: { verificationRequest: true },\n        });\n    }\n    catch (e) {\n        throw new AccessDenied(e);\n    }\n    if (!authorized)\n        throw new AccessDenied(\"AccessDenied\");\n    if (typeof authorized === \"string\") {\n        return {\n            redirect: await callbacks.redirect({\n                url: authorized,\n                baseUrl: options.url.origin,\n            }),\n        };\n    }\n    const { callbackUrl, theme } = options;\n    const token = (await provider.generateVerificationToken?.()) ?? randomString(32);\n    const ONE_DAY_IN_SECONDS = 86400;\n    const expires = new Date(Date.now() + (provider.maxAge ?? ONE_DAY_IN_SECONDS) * 1000);\n    const secret = provider.secret ?? options.secret;\n    const baseUrl = new URL(options.basePath, options.url.origin);\n    const sendRequest = provider.sendVerificationRequest({\n        identifier: email,\n        token,\n        expires,\n        url: `${baseUrl}/callback/${provider.id}?${new URLSearchParams({\n            callbackUrl,\n            token,\n            email,\n        })}`,\n        provider,\n        theme,\n        request: toRequest(request),\n    });\n    const createToken = adapter.createVerificationToken?.({\n        identifier: email,\n        token: await createHash(`${token}${secret}`),\n        expires,\n    });\n    await Promise.all([sendRequest, createToken]);\n    return {\n        redirect: `${baseUrl}/verify-request?${new URLSearchParams({\n            provider: provider.id,\n            type: provider.type,\n        })}`,\n    };\n}\nfunction defaultNormalizer(email) {\n    if (!email)\n        throw new Error(\"Missing email from request body.\");\n    // Get the first two elements only,\n    // separated by `@` from user input.\n    let [local, domain] = email.toLowerCase().trim().split(\"@\");\n    // The part before \"@\" can contain a \",\"\n    // but we remove it on the domain part\n    domain = domain.split(\",\")[0];\n    return `${local}@${domain}`;\n}\n", "import { getAuthorizationUrl } from \"./authorization-url.js\";\nimport { sendToken } from \"./send-token.js\";\nexport async function signIn(request, cookies, options) {\n    const signInUrl = `${options.url.origin}${options.basePath}/signin`;\n    if (!options.provider)\n        return { redirect: signInUrl, cookies };\n    switch (options.provider.type) {\n        case \"oauth\":\n        case \"oidc\": {\n            const { redirect, cookies: authCookies } = await getAuthorizationUrl(request.query, options);\n            if (authCookies)\n                cookies.push(...authCookies);\n            return { redirect, cookies };\n        }\n        case \"email\": {\n            const response = await sendToken(request, options);\n            return { ...response, cookies };\n        }\n        default:\n            return { redirect: signInUrl, cookies };\n    }\n}\n", "import { SignOutError } from \"../../errors.js\";\n/**\n * Destroys the session.\n * If the session strategy is database,\n * The session is also deleted from the database.\n * In any case, the session cookie is cleared and\n * {@link AuthConfig[\"events\"].signOut} is emitted.\n */\nexport async function signOut(cookies, sessionStore, options) {\n    const { jwt, events, callbackUrl: redirect, logger, session } = options;\n    const sessionToken = sessionStore.value;\n    if (!sessionToken)\n        return { redirect, cookies };\n    try {\n        if (session.strategy === \"jwt\") {\n            const salt = options.cookies.sessionToken.name;\n            const token = await jwt.decode({ ...jwt, token: sessionToken, salt });\n            await events.signOut?.({ token });\n        }\n        else {\n            const session = await options.adapter?.deleteSession(sessionToken);\n            await events.signOut?.({ session });\n        }\n    }\n    catch (e) {\n        logger.error(new SignOutError(e));\n    }\n    cookies.push(...sessionStore.clean());\n    return { redirect, cookies };\n}\n", "/**\n * Returns the currently logged in user, if any.\n */\nexport async function getLoggedInUser(options, sessionStore) {\n    const { adapter, jwt, session: { strategy: sessionStrategy }, } = options;\n    const sessionToken = sessionStore.value;\n    if (!sessionToken)\n        return null;\n    // Try to decode JWT\n    if (sessionStrategy === \"jwt\") {\n        const salt = options.cookies.sessionToken.name;\n        const payload = await jwt.decode({ ...jwt, token: sessionToken, salt });\n        if (payload && payload.sub) {\n            return {\n                id: payload.sub,\n                name: payload.name,\n                email: payload.email,\n                image: payload.picture,\n            };\n        }\n    }\n    else {\n        const userAndSession = await adapter?.getSessionAndUser(sessionToken);\n        if (userAndSession) {\n            return userAndSession.user;\n        }\n    }\n    return null;\n}\n", "import { getLoggedInUser } from \"../utils/session.js\";\nimport { assertInternalOptionsWebAuthn, inferWebAuthnOptions, getAuthenticationResponse, getRegistrationResponse, } from \"../utils/webauthn-utils.js\";\n/**\n * Returns authentication or registration options for a WebAuthn flow\n * depending on the parameters provided.\n */\nexport async function webAuthnOptions(request, options, sessionStore, cookies\n// @ts-expect-error issue with returning from a switch case\n) {\n    // Return an error if the adapter is missing or if the provider\n    // is not a webauthn provider.\n    const narrowOptions = assertInternalOptionsWebAuthn(options);\n    const { provider } = narrowOptions;\n    // Extract the action from the query parameters\n    const { action } = (request.query ?? {});\n    // Action must be either \"register\", \"authenticate\", or undefined\n    if (action !== \"register\" &&\n        action !== \"authenticate\" &&\n        typeof action !== \"undefined\") {\n        return {\n            status: 400,\n            body: { error: \"Invalid action\" },\n            cookies,\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n        };\n    }\n    // Get the user info from the session\n    const sessionUser = await getLoggedInUser(options, sessionStore);\n    // Extract user info from request\n    // If session user exists, we don't need to call getUserInfo\n    const getUserInfoResponse = sessionUser\n        ? {\n            user: sessionUser,\n            exists: true,\n        }\n        : await provider.getUserInfo(options, request);\n    const userInfo = getUserInfoResponse?.user;\n    // Make a decision on what kind of webauthn options to return\n    const decision = inferWebAuthnOptions(action, !!sessionUser, getUserInfoResponse);\n    switch (decision) {\n        case \"authenticate\":\n            return getAuthenticationResponse(narrowOptions, request, userInfo, cookies);\n        case \"register\":\n            if (typeof userInfo?.email === \"string\") {\n                return getRegistrationResponse(narrowOptions, request, userInfo, cookies);\n            }\n            break;\n        default:\n            return {\n                status: 400,\n                body: { error: \"Invalid request\" },\n                cookies,\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n            };\n    }\n}\n", "import { UnknownAction } from \"../errors.js\";\nimport { SessionStore } from \"./utils/cookie.js\";\nimport { init } from \"./init.js\";\nimport renderPage from \"./pages/index.js\";\nimport * as actions from \"./actions/index.js\";\nimport { validateCSRF } from \"./actions/callback/oauth/csrf-token.js\";\nimport { skipCSRFCheck } from \"./symbols.js\";\nexport { customFetch, raw, skipCSRFCheck } from \"./symbols.js\";\n/** @internal */\nexport async function AuthInternal(request, authOptions) {\n    const { action, providerId, error, method } = request;\n    const csrfDisabled = authOptions.skipCSRFCheck === skipCSRFCheck;\n    const { options, cookies } = await init({\n        authOptions,\n        action,\n        providerId,\n        url: request.url,\n        callbackUrl: request.body?.callbackUrl ?? request.query?.callbackUrl,\n        csrfToken: request.body?.csrfToken,\n        cookies: request.cookies,\n        isPost: method === \"POST\",\n        csrfDisabled,\n    });\n    const sessionStore = new SessionStore(options.cookies.sessionToken, request.cookies, options.logger);\n    if (method === \"GET\") {\n        const render = renderPage({ ...options, query: request.query, cookies });\n        switch (action) {\n            case \"callback\":\n                return await actions.callback(request, options, sessionStore, cookies);\n            case \"csrf\":\n                return render.csrf(csrfDisabled, options, cookies);\n            case \"error\":\n                return render.error(error);\n            case \"providers\":\n                return render.providers(options.providers);\n            case \"session\":\n                return await actions.session(options, sessionStore, cookies);\n            case \"signin\":\n                return render.signin(providerId, error);\n            case \"signout\":\n                return render.signout();\n            case \"verify-request\":\n                return render.verifyRequest();\n            case \"webauthn-options\":\n                return await actions.webAuthnOptions(request, options, sessionStore, cookies);\n            default:\n        }\n    }\n    else {\n        const { csrfTokenVerified } = options;\n        switch (action) {\n            case \"callback\":\n                if (options.provider.type === \"credentials\")\n                    // Verified CSRF Token required for credentials providers only\n                    validateCSRF(action, csrfTokenVerified);\n                return await actions.callback(request, options, sessionStore, cookies);\n            case \"session\":\n                validateCSRF(action, csrfTokenVerified);\n                return await actions.session(options, sessionStore, cookies, true, request.body?.data);\n            case \"signin\":\n                validateCSRF(action, csrfTokenVerified);\n                return await actions.signIn(request, cookies, options);\n            case \"signout\":\n                validateCSRF(action, csrfTokenVerified);\n                return await actions.signOut(cookies, sessionStore, options);\n            default:\n        }\n    }\n    throw new UnknownAction(`Cannot handle action: ${action}`);\n}\n", "import { setLogger } from \"./logger.js\";\n/**\n *  Set default env variables on the config object\n * @param suppressWarnings intended for framework authors.\n */\nexport function setEnvDefaults(envObject, config, suppressBasePathWarning = false) {\n    try {\n        const url = envObject.AUTH_URL;\n        if (url) {\n            if (config.basePath) {\n                if (!suppressBasePathWarning) {\n                    const logger = setLogger(config);\n                    logger.warn(\"env-url-basepath-redundant\");\n                }\n            }\n            else {\n                config.basePath = new URL(url).pathname;\n            }\n        }\n    }\n    catch {\n        // Catching and swallowing potential URL parsing errors, we'll fall\n        // back to `/auth` below.\n    }\n    finally {\n        config.basePath ?? (config.basePath = `/auth`);\n    }\n    if (!config.secret?.length) {\n        config.secret = [];\n        const secret = envObject.AUTH_SECRET;\n        if (secret)\n            config.secret.push(secret);\n        for (const i of [1, 2, 3]) {\n            const secret = envObject[`AUTH_SECRET_${i}`];\n            if (secret)\n                config.secret.unshift(secret);\n        }\n    }\n    config.redirectProxyUrl ?? (config.redirectProxyUrl = envObject.AUTH_REDIRECT_PROXY_URL);\n    config.trustHost ?? (config.trustHost = !!(envObject.AUTH_URL ??\n        envObject.AUTH_TRUST_HOST ??\n        envObject.VERCEL ??\n        envObject.CF_PAGES ??\n        envObject.NODE_ENV !== \"production\"));\n    config.providers = config.providers.map((provider) => {\n        const { id } = typeof provider === \"function\" ? provider({}) : provider;\n        const ID = id.toUpperCase().replace(/-/g, \"_\");\n        const clientId = envObject[`AUTH_${ID}_ID`];\n        const clientSecret = envObject[`AUTH_${ID}_SECRET`];\n        const issuer = envObject[`AUTH_${ID}_ISSUER`];\n        const apiKey = envObject[`AUTH_${ID}_KEY`];\n        const finalProvider = typeof provider === \"function\"\n            ? provider({ clientId, clientSecret, issuer, apiKey })\n            : provider;\n        if (finalProvider.type === \"oauth\" || finalProvider.type === \"oidc\") {\n            finalProvider.clientId ?? (finalProvider.clientId = clientId);\n            finalProvider.clientSecret ?? (finalProvider.clientSecret = clientSecret);\n            finalProvider.issuer ?? (finalProvider.issuer = issuer);\n        }\n        else if (finalProvider.type === \"email\") {\n            finalProvider.apiKey ?? (finalProvider.apiKey = apiKey);\n        }\n        return finalProvider;\n    });\n}\nexport function createActionURL(action, protocol, headers, envObject, config) {\n    const basePath = config?.basePath;\n    const envUrl = envObject.AUTH_URL ?? envObject.NEXTAUTH_URL;\n    let url;\n    if (envUrl) {\n        url = new URL(envUrl);\n        if (basePath && basePath !== \"/\" && url.pathname !== \"/\") {\n            if (url.pathname !== basePath) {\n                const logger = setLogger(config);\n                logger.warn(\"env-url-basepath-mismatch\");\n            }\n            url.pathname = \"/\";\n        }\n    }\n    else {\n        const detectedHost = headers.get(\"x-forwarded-host\") ?? headers.get(\"host\");\n        const detectedProtocol = headers.get(\"x-forwarded-proto\") ?? protocol ?? \"https\";\n        const _protocol = detectedProtocol.endsWith(\":\")\n            ? detectedProtocol\n            : detectedProtocol + \":\";\n        url = new URL(`${_protocol}//${detectedHost}`);\n    }\n    // remove trailing slash\n    const sanitizedUrl = url.toString().replace(/\\/$/, \"\");\n    if (basePath) {\n        // remove leading and trailing slash\n        const sanitizedBasePath = basePath?.replace(/(^\\/|\\/$)/g, \"\") ?? \"\";\n        return new URL(`${sanitizedUrl}/${sanitizedBasePath}/${action}`);\n    }\n    return new URL(`${sanitizedUrl}/${action}`);\n}\n", "/**\n *\n * :::warning Experimental\n * `@auth/core` is under active development.\n * :::\n *\n * This is the main entry point to the Auth.js library.\n *\n * Based on the {@link https://developer.mozilla.org/en-US/docs/Web/API/Request Request}\n * and {@link https://developer.mozilla.org/en-US/docs/Web/API/Response Response} Web standard APIs.\n * Primarily used to implement [framework](https://authjs.dev/getting-started/integrations)-specific packages,\n * but it can also be used directly.\n *\n * ## Installation\n *\n * ```bash npm2yarn\n * npm install @auth/core\n * ```\n *\n * ## Usage\n *\n * ```ts\n * import { Auth } from \"@auth/core\"\n *\n * const request = new Request(\"https://example.com\")\n * const response = await Auth(request, {...})\n *\n * console.log(response instanceof Response) // true\n * ```\n *\n * ## Resources\n *\n * - [Getting started](https://authjs.dev/getting-started)\n * - [Guides](https://authjs.dev/guides)\n *\n * @module @auth/core\n */\nimport { assertConfig } from \"./lib/utils/assert.js\";\nimport { AuthError, CredentialsSignin, ErrorPageLoop, isClientError, } from \"./errors.js\";\nimport { AuthInternal, raw, skipCSRFCheck } from \"./lib/index.js\";\nimport { setEnvDefaults, createActionURL } from \"./lib/utils/env.js\";\nimport renderPage from \"./lib/pages/index.js\";\nimport { setLogger } from \"./lib/utils/logger.js\";\nimport { toInternalRequest, toResponse } from \"./lib/utils/web.js\";\nimport { isAuthAction } from \"./lib/utils/actions.js\";\nexport { customFetch } from \"./lib/symbols.js\";\nexport { skipCSRFCheck, raw, setEnvDefaults, createActionURL, isAuthAction };\n/**\n * Core functionality provided by Auth.js.\n *\n * Receives a standard {@link Request} and returns a {@link Response}.\n *\n * @example\n * ```ts\n * import { Auth } from \"@auth/core\"\n *\n * const request = new Request(\"https://example.com\")\n * const response = await Auth(request, {\n *   providers: [Google],\n *   secret: \"...\",\n *   trustHost: true,\n * })\n *```\n * @see [Documentation](https://authjs.dev)\n */\nexport async function Auth(request, config) {\n    const logger = setLogger(config);\n    const internalRequest = await toInternalRequest(request, config);\n    // There was an error parsing the request\n    if (!internalRequest)\n        return Response.json(`Bad request.`, { status: 400 });\n    const warningsOrError = assertConfig(internalRequest, config);\n    if (Array.isArray(warningsOrError)) {\n        warningsOrError.forEach(logger.warn);\n    }\n    else if (warningsOrError) {\n        // If there's an error in the user config, bail out early\n        logger.error(warningsOrError);\n        const htmlPages = new Set([\n            \"signin\",\n            \"signout\",\n            \"error\",\n            \"verify-request\",\n        ]);\n        if (!htmlPages.has(internalRequest.action) ||\n            internalRequest.method !== \"GET\") {\n            const message = \"There was a problem with the server configuration. Check the server logs for more information.\";\n            return Response.json({ message }, { status: 500 });\n        }\n        const { pages, theme } = config;\n        // If this is true, the config required auth on the error page\n        // which could cause a redirect loop\n        const authOnErrorPage = pages?.error &&\n            internalRequest.url.searchParams\n                .get(\"callbackUrl\")\n                ?.startsWith(pages.error);\n        // Either there was no error page configured or the configured one contains infinite redirects\n        if (!pages?.error || authOnErrorPage) {\n            if (authOnErrorPage) {\n                logger.error(new ErrorPageLoop(`The error page ${pages?.error} should not require authentication`));\n            }\n            const page = renderPage({ theme }).error(\"Configuration\");\n            return toResponse(page);\n        }\n        const url = `${internalRequest.url.origin}${pages.error}?error=Configuration`;\n        return Response.redirect(url);\n    }\n    const isRedirect = request.headers?.has(\"X-Auth-Return-Redirect\");\n    const isRaw = config.raw === raw;\n    try {\n        const internalResponse = await AuthInternal(internalRequest, config);\n        if (isRaw)\n            return internalResponse;\n        const response = toResponse(internalResponse);\n        const url = response.headers.get(\"Location\");\n        if (!isRedirect || !url)\n            return response;\n        return Response.json({ url }, { headers: response.headers });\n    }\n    catch (e) {\n        const error = e;\n        logger.error(error);\n        const isAuthError = error instanceof AuthError;\n        if (isAuthError && isRaw && !isRedirect)\n            throw error;\n        // If the CSRF check failed for POST/session, return a 400 status code.\n        // We should not redirect to a page as this is an API route\n        if (request.method === \"POST\" && internalRequest.action === \"session\")\n            return Response.json(null, { status: 400 });\n        const isClientSafeErrorType = isClientError(error);\n        const type = isClientSafeErrorType ? error.type : \"Configuration\";\n        const params = new URLSearchParams({ error: type });\n        if (error instanceof CredentialsSignin)\n            params.set(\"code\", error.code);\n        const pageKind = (isAuthError && error.kind) || \"error\";\n        const pagePath = config.pages?.[pageKind] ?? `${config.basePath}/${pageKind.toLowerCase()}`;\n        const url = `${internalRequest.url.origin}${pagePath}?${params}`;\n        if (isRedirect)\n            return Response.json({ url });\n        return Response.redirect(url);\n    }\n}\n", "// src/helper/adapter/index.ts\nvar env = (c, runtime) => {\n  const global = globalThis;\n  const globalEnv = global?.process?.env;\n  runtime ??= getRuntimeKey();\n  const runtimeEnvHandlers = {\n    bun: () => globalEnv,\n    node: () => globalEnv,\n    \"edge-light\": () => globalEnv,\n    deno: () => {\n      return Deno.env.toObject();\n    },\n    workerd: () => c.env,\n    fastly: () => ({}),\n    other: () => ({})\n  };\n  return runtimeEnvHandlers[runtime]();\n};\nvar knownUserAgents = {\n  deno: \"Deno\",\n  bun: \"Bun\",\n  workerd: \"Cloudflare-Workers\",\n  node: \"Node.js\"\n};\nvar getRuntimeKey = () => {\n  const global = globalThis;\n  const userAgentSupported = typeof navigator !== \"undefined\" && typeof navigator.userAgent === \"string\";\n  if (userAgentSupported) {\n    for (const [runtimeKey, userAgent] of Object.entries(knownUserAgents)) {\n      if (checkUserAgentEquals(userAgent)) {\n        return runtimeKey;\n      }\n    }\n  }\n  if (typeof global?.EdgeRuntime === \"string\") {\n    return \"edge-light\";\n  }\n  if (global?.fastly !== void 0) {\n    return \"fastly\";\n  }\n  if (global?.process?.release?.name === \"node\") {\n    return \"node\";\n  }\n  return \"other\";\n};\nvar checkUserAgentEquals = (platform) => {\n  const userAgent = navigator.userAgent;\n  return userAgent.startsWith(platform);\n};\nexport {\n  checkUserAgentEquals,\n  env,\n  getRuntimeKey,\n  knownUserAgents\n};\n", "// src/http-exception.ts\nvar HTTPException = class extends Error {\n  res;\n  status;\n  constructor(status = 500, options) {\n    super(options?.message, { cause: options?.cause });\n    this.res = options?.res;\n    this.status = status;\n  }\n  getResponse() {\n    if (this.res) {\n      const newResponse = new Response(this.res.body, {\n        status: this.status,\n        headers: this.res.headers\n      });\n      return newResponse;\n    }\n    return new Response(this.message, {\n      status: this.status\n    });\n  }\n};\nexport {\n  HTTPException\n};\n", "// src/index.ts\nimport { Auth } from \"@auth/core\";\nimport { env } from \"hono/adapter\";\nimport { HTTPException } from \"hono/http-exception\";\nimport { setEnvDefaults as coreSetEnvDefaults } from \"@auth/core\";\nfunction setEnvDefaults(env2, config) {\n  config.secret ??= env2.AUTH_SECRET;\n  coreSetEnvDefaults(env2, config);\n}\nfunction reqWithEnvUrl(req, authUrl) {\n  if (authUrl) {\n    const reqUrlObj = new URL(req.url);\n    const authUrlObj = new URL(authUrl);\n    const props = [\"hostname\", \"protocol\", \"port\", \"password\", \"username\"];\n    for (const prop of props) {\n      if (authUrlObj[prop])\n        reqUrlObj[prop] = authUrlObj[prop];\n    }\n    return new Request(reqUrlObj.href, req);\n  }\n  const url = new URL(req.url);\n  const newReq = new Request(url.href, req);\n  const proto = newReq.headers.get(\"x-forwarded-proto\");\n  const host = newReq.headers.get(\"x-forwarded-host\") ?? newReq.headers.get(\"host\");\n  if (proto != null)\n    url.protocol = proto.endsWith(\":\") ? proto : `${proto}:`;\n  if (host != null) {\n    url.host = host;\n    const portMatch = host.match(/:(\\d+)$/);\n    if (portMatch)\n      url.port = portMatch[1];\n    else\n      url.port = \"\";\n    newReq.headers.delete(\"x-forwarded-host\");\n    newReq.headers.delete(\"Host\");\n    newReq.headers.set(\"Host\", host);\n  }\n  return new Request(url.href, newReq);\n}\nasync function getAuthUser(c) {\n  const config = c.get(\"authConfig\");\n  const ctxEnv = env(c);\n  setEnvDefaults(ctxEnv, config);\n  const authReq = reqWithEnvUrl(c.req.raw, ctxEnv.AUTH_URL);\n  const origin = new URL(authReq.url).origin;\n  const request = new Request(`${origin}${config.basePath}/session`, {\n    headers: { cookie: c.req.header(\"cookie\") ?? \"\" }\n  });\n  let authUser = {};\n  const response = await Auth(request, {\n    ...config,\n    callbacks: {\n      ...config.callbacks,\n      async session(...args) {\n        authUser = args[0];\n        const session2 = await config.callbacks?.session?.(...args) ?? args[0].session;\n        const user = args[0].user ?? args[0].token;\n        return { user, ...session2 };\n      }\n    }\n  });\n  const session = await response.json();\n  return session?.user ? authUser : null;\n}\nfunction verifyAuth() {\n  return async (c, next) => {\n    const authUser = await getAuthUser(c);\n    const isAuth = !!authUser?.token || !!authUser?.user;\n    if (!isAuth) {\n      const res = new Response(\"Unauthorized\", {\n        status: 401\n      });\n      throw new HTTPException(401, { res });\n    }\n    c.set(\"authUser\", authUser);\n    await next();\n  };\n}\nfunction initAuthConfig(cb) {\n  return async (c, next) => {\n    const config = cb(c);\n    c.set(\"authConfig\", config);\n    await next();\n  };\n}\nfunction authHandler() {\n  return async (c) => {\n    const config = c.get(\"authConfig\");\n    const ctxEnv = env(c);\n    setEnvDefaults(ctxEnv, config);\n    if (!config.secret || config.secret.length === 0) {\n      throw new HTTPException(500, { message: \"Missing AUTH_SECRET\" });\n    }\n    const res = await Auth(reqWithEnvUrl(c.req.raw, ctxEnv.AUTH_URL), config);\n    return new Response(res.body, res);\n  };\n}\nexport {\n  authHandler,\n  getAuthUser,\n  initAuthConfig,\n  reqWithEnvUrl,\n  setEnvDefaults,\n  verifyAuth\n};\n", "/**\n * <div class=\"provider\" style={{backgroundColor: \"#24292f\", display: \"flex\", justifyContent: \"space-between\", color: \"#fff\", padding: 16}}>\n * <span>Built-in <b>GitHub</b> integration.</span>\n * <a href=\"https://github.com\">\n *   <img style={{display: \"block\"}} src=\"https://authjs.dev/img/providers/github.svg\" height=\"48\" width=\"48\"/>\n * </a>\n * </div>\n *\n * @module providers/github\n */\n/**\n * Add GitHub login to your page and make requests to [GitHub APIs](https://docs.github.com/en/rest).\n *\n * ### Setup\n *\n * #### Callback URL\n * ```\n * https://example.com/api/auth/callback/github\n * ```\n *\n * #### Configuration\n * ```ts\n * import { Auth } from \"@auth/core\"\n * import GitHub from \"@auth/core/providers/github\"\n *\n * const request = new Request(origin)\n * const response = await Auth(request, {\n *   providers: [\n *     GitHub({ clientId: GITHUB_CLIENT_ID, clientSecret: GITHUB_CLIENT_SECRET }),\n *   ],\n * })\n * ```\n *\n * ### Resources\n *\n * - [GitHub - Creating an OAuth App](https://docs.github.com/en/developers/apps/building-oauth-apps/creating-an-oauth-app)\n * - [GitHub - Authorizing OAuth Apps](https://docs.github.com/en/developers/apps/building-oauth-apps/authorizing-oauth-apps)\n * - [GitHub - Configure your GitHub OAuth Apps](https://github.com/settings/developers)\n * - [Learn more about OAuth](https://authjs.dev/concepts/oauth)\n * - [Source code](https://github.com/nextauthjs/next-auth/blob/main/packages/core/src/providers/github.ts)\n *\n * ### Notes\n *\n * By default, Auth.js assumes that the GitHub provider is\n * based on the [OAuth 2](https://www.rfc-editor.org/rfc/rfc6749.html) specification.\n *\n * :::tip\n *\n * The GitHub provider comes with a [default configuration](https://github.com/nextauthjs/next-auth/blob/main/packages/core/src/providers/github.ts).\n * To override the defaults for your use case, check out [customizing a built-in OAuth provider](https://authjs.dev/guides/configuring-oauth-providers).\n *\n * :::\n *\n * :::info **Disclaimer**\n *\n * If you think you found a bug in the default configuration, you can [open an issue](https://authjs.dev/new/provider-issue).\n *\n * Auth.js strictly adheres to the specification and it cannot take responsibility for any deviation from\n * the spec by the provider. You can open an issue, but if the problem is non-compliance with the spec,\n * we might not pursue a resolution. You can ask for more help in [Discussions](https://authjs.dev/new/github-discussions).\n *\n * :::\n */\nexport default function GitHub(config) {\n    const baseUrl = config?.enterprise?.baseUrl ?? \"https://github.com\";\n    const apiBaseUrl = config?.enterprise?.baseUrl\n        ? `${config?.enterprise?.baseUrl}/api/v3`\n        : \"https://api.github.com\";\n    return {\n        id: \"github\",\n        name: \"GitHub\",\n        type: \"oauth\",\n        authorization: {\n            url: `${baseUrl}/login/oauth/authorize`,\n            params: { scope: \"read:user user:email\" },\n        },\n        token: `${baseUrl}/login/oauth/access_token`,\n        userinfo: {\n            url: `${apiBaseUrl}/user`,\n            async request({ tokens, provider }) {\n                const profile = await fetch(provider.userinfo?.url, {\n                    headers: {\n                        Authorization: `Bearer ${tokens.access_token}`,\n                        \"User-Agent\": \"authjs\",\n                    },\n                }).then(async (res) => await res.json());\n                if (!profile.email) {\n                    // If the user does not have a public email, get another via the GitHub API\n                    // See https://docs.github.com/en/rest/users/emails#list-public-email-addresses-for-the-authenticated-user\n                    const res = await fetch(`${apiBaseUrl}/user/emails`, {\n                        headers: {\n                            Authorization: `Bearer ${tokens.access_token}`,\n                            \"User-Agent\": \"authjs\",\n                        },\n                    });\n                    if (res.ok) {\n                        const emails = await res.json();\n                        profile.email = (emails.find((e) => e.primary) ?? emails[0]).email;\n                    }\n                }\n                return profile;\n            },\n        },\n        profile(profile) {\n            return {\n                id: profile.id.toString(),\n                name: profile.name ?? profile.login,\n                email: profile.email,\n                image: profile.avatar_url,\n            };\n        },\n        style: { bg: \"#24292f\", text: \"#fff\" },\n        options: config,\n    };\n}\n", "import { Hono } from 'hono'\r\nimport { authHandler, initAuthConfig, verifyAuth } from '@hono/auth-js'\r\nimport GitHub from '@auth/core/providers/github'\r\n\r\n\r\nconst app = new Hono()\r\n\r\napp.use(\r\n    '*',\r\n    initAuthConfig((c) => ({\r\n      secret: c.env.AUTH_SECRET,\r\n      providers: [\r\n        GitHub({\r\n          clientId: c.env.GITHUB_ID,\r\n          clientSecret: c.env.GITHUB_SECRET,\r\n        }),\r\n      ]\r\n    }))\r\n  )\r\n\r\n\r\napp.use('/api/auth/*', authHandler())\r\n\r\napp.use('/api/*', verifyAuth())\r\n\r\napp.get('/api', (c) => c.text('Hello Cloudflare Workers!'))\r\n\r\napp.get('/api/users', (c) => c.text('Hello Cloudflare Workers! - Users Path'))\r\n\r\napp.get('/api/protected', (c) => {\r\n  const auth = c.get('authUser')\r\n  return c.json(auth)\r\n})\r\n\r\napp.all('/api/session', (c) => {\r\n  console.log(\"Notty\");\r\n  const auth = c.get('authUser')\r\n  return c.json(auth)\r\n})\r\nexport default app", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"A:\\\\Accustra\\\\Devlopement\\\\react-projects\\\\fullstack-hono-react-cloudflare-pages\\\\api.js\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"C:\\\\Users\\\\Swaraj Sahu\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"C:\\\\Users\\\\Swaraj Sahu\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"A:\\\\Accustra\\\\Devlopement\\\\react-projects\\\\fullstack-hono-react-cloudflare-pages\\\\api.js\";\n\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"A:\\\\Accustra\\\\Devlopement\\\\react-projects\\\\fullstack-hono-react-cloudflare-pages\\\\.wrangler\\\\tmp\\\\bundle-K3Abh8\\\\middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"C:\\\\Users\\\\Swaraj Sahu\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\common.ts\";\nimport type { WorkerEntrypointConstructor } from \"A:\\\\Accustra\\\\Devlopement\\\\react-projects\\\\fullstack-hono-react-cloudflare-pages\\\\.wrangler\\\\tmp\\\\bundle-K3Abh8\\\\middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"A:\\\\Accustra\\\\Devlopement\\\\react-projects\\\\fullstack-hono-react-cloudflare-pages\\\\.wrangler\\\\tmp\\\\bundle-K3Abh8\\\\middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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",
  "names": ["i", "j", "decoder", "p", "v", "i", "a", "endIndex", "raw", "c", "k", "v", "e", "v2", "i", "c", "p", "app", "r", "env", "a", "b", "k", "c", "i", "j", "_", "_", "i", "j", "h", "e", "k", "a", "b", "p", "r", "init", "i", "i2", "e", "Node", "i", "p", "v", "a", "i2", "j", "k", "b", "Node", "i", "Hono", "state", "f", "a", "b", "_SessionStore_chunk", "i", "c", "_SessionStore_clean", "message", "p", "a", "t", "u", "f", "session", "digest", "digest", "buf", "i", "alg", "CHUNK_SIZE", "i", "message", "message", "alg", "enc", "a", "b", "i", "alg", "types", "alg", "enc", "tag", "alg", "p2s", "getCryptoKey", "alg", "deriveKey", "p2s", "decrypt", "alg", "alg", "encrypt", "alg", "decrypt", "k", "alg", "bitLength", "alg", "alg", "alg", "enc", "tag", "encrypt", "wrap", "alg", "unwrap", "tag", "alg", "bitLength", "decrypt", "p2s", "tag", "unwrap", "s", "protectedHeader", "alg", "enc", "tag", "tag", "alg", "alg", "enc", "x", "y", "bitLength", "encrypt", "p2s", "wrap", "alg", "enc", "tag", "now", "enc", "decode", "encode", "encode", "decode", "decode", "parse", "C", "parse", "decode", "enc", "e", "encode", "decode", "enc", "secret", "enc", "message", "parseCookie", "e", "message", "b", "i", "r", "a", "csrfToken", "csrfTokenHash", "isObject", "raw", "p", "c", "o", "k", "v", "e", "session", "encode", "decode", "e", "slice", "options", "vnodeId", "isValidElement", "rerenderQueue", "prevDebounce", "defer", "depthSort", "eventClock", "eventProxy", "eventProxyCapture", "i", "EMPTY_OBJ", "EMPTY_ARR", "IS_NON_DIMENSIONAL", "isArray", "Array", "assign", "obj", "props", "removeNode", "node", "parentNode", "removeChild", "createElement", "type", "children", "key", "ref", "normalizedProps", "arguments", "length", "call", "defaultProps", "createVNode", "original", "vnode", "__k", "__", "__b", "__e", "__d", "__c", "constructor", "__v", "__i", "__u", "Fragment", "props", "children", "BaseComponent", "context", "this", "getDomSibling", "vnode", "childIndex", "__", "__i", "sibling", "__k", "length", "__e", "type", "updateParentDomPointers", "i", "child", "__c", "base", "enqueueRender", "c", "__d", "rerenderQueue", "push", "process", "__r", "prevDebounce", "options", "debounceRendering", "defer", "renderQueueLength", "component", "newVNode", "oldVNode", "oldDom", "commitQueue", "refQueue", "sort", "depthSort", "shift", "__v", "__P", "assign", "diff", "__n", "namespaceURI", "__u", "commitRoot", "diffChildren", "parentDom", "renderResult", "newParentVNode", "oldParentVNode", "globalContext", "namespace", "excessDomChildren", "isHydrating", "childVNode", "newDom", "firstChildDom", "oldChildren", "EMPTY_ARR", "newChildrenLength", "constructNewChildrenArray", "EMPTY_OBJ", "ref", "applyRef", "insert", "nextSibling", "skewedIndex", "matchingIndex", "oldChildrenLength", "remainingOldChildren", "skew", "constructor", "String", "createVNode", "isArray", "__b", "key", "findMatchingIndex", "unmount", "parentVNode", "contains", "insertBefore", "nodeType", "findMatchingIndex", "childVNode", "oldChildren", "skewedIndex", "remainingOldChildren", "key", "type", "x", "y", "oldVNode", "__u", "length", "setStyle", "style", "value", "setProperty", "IS_NON_DIMENSIONAL", "test", "dom", "name", "oldValue", "namespace", "useCapture", "o", "cssText", "replace", "toLowerCase", "slice", "l", "_attached", "eventClock", "addEventListener", "eventProxyCapture", "eventProxy", "removeEventListener", "e", "removeAttribute", "setAttribute", "createEventProxy", "this", "eventHandler", "_dispatched", "options", "event", "diff", "parentDom", "newVNode", "globalContext", "excessDomChildren", "commitQueue", "oldDom", "isHydrating", "refQueue", "tmp", "c", "isNew", "oldProps", "oldState", "snapshot", "clearProcessingException", "newProps", "isClassComponent", "provider", "componentContext", "i", "renderHook", "count", "renderResult", "newType", "constructor", "__e", "__b", "outer", "props", "prototype", "render", "contextType", "__c", "__", "__E", "BaseComponent", "doRender", "sub", "state", "context", "__n", "__d", "__h", "_sb", "__s", "getDerivedStateFromProps", "assign", "__v", "componentWillMount", "componentDidMount", "push", "componentWillReceiveProps", "shouldComponentUpdate", "__k", "some", "vnode", "componentWillUpdate", "componentDidUpdate", "__P", "__r", "getChildContext", "getSnapshotBeforeUpdate", "diffChildren", "isArray", "Fragment", "children", "base", "MODE_HYDRATE", "nodeType", "nextSibling", "indexOf", "diffElementNodes", "diffed", "commitRoot", "root", "applyRef", "cb", "call", "newHtml", "oldHtml", "newChildren", "inputValue", "checked", "localName", "document", "createTextNode", "createElementNS", "is", "__m", "data", "childNodes", "EMPTY_OBJ", "attributes", "__html", "innerHTML", "getDomSibling", "removeNode", "ref", "hasRefUnmount", "current", "unmount", "parentVNode", "skipRemove", "r", "componentWillUnmount", "slice", "EMPTY_ARR", "options", "__e", "error", "vnode", "oldVNode", "errorInfo", "component", "ctor", "handled", "__", "__c", "constructor", "getDerivedStateFromError", "setState", "__d", "componentDidCatch", "__E", "e", "vnodeId", "isValidElement", "undefined", "BaseComponent", "prototype", "update", "callback", "s", "this", "__s", "state", "assign", "props", "__v", "_sb", "push", "enqueueRender", "forceUpdate", "__h", "render", "Fragment", "rerenderQueue", "defer", "Promise", "then", "bind", "resolve", "setTimeout", "depthSort", "a", "b", "__b", "process", "__r", "eventClock", "eventProxy", "createEventProxy", "eventProxyCapture", "i", "UNSAFE_NAME", "NAMESPACE_REPLACE_REGEX", "HTML_LOWER_CASE", "SVG_CAMEL_CASE", "HTML_ENUMERATED", "Set", "ENCODED_ENTITIES", "encodeEntities", "str", "length", "test", "last", "i", "out", "ch", "charCodeAt", "slice", "JS_TO_CSS", "IS_NON_DIMENSIONAL", "CSS_REGEX", "styleObjToCss", "s", "prop", "val", "name", "replace", "toLowerCase", "suffix", "startsWith", "has", "markAsDirty", "this", "__d", "createComponent", "vnode", "context", "__v", "props", "setState", "forceUpdate", "__h", "Array", "renderToStringAsync", "beforeDiff", "afterDiff", "renderHook", "ummountHook", "renderToStringAsync", "EMPTY_OBJ", "EMPTY_ARR", "isArray", "Array", "assign", "Object", "EMPTY_STR", "renderToString", "vnode", "context", "_rendererState", "previousSkipEffects", "options", "beforeDiff", "afterDiff", "renderHook", "ummountHook", "unmount", "parent", "h", "Fragment", "rendered", "_renderToString", "join", "e", "then", "Error", "length", "renderClassComponent", "c", "type", "isMounting", "state", "props", "getDerivedStateFromProps", "componentWillMount", "componentWillUpdate", "render", "isSvgMode", "selectValue", "asyncMode", "renderer", "vnodeType", "encodeEntities", "renderArray", "i", "child", "L", "childRender", "push", "constructor", "contextType", "component", "cctx", "out", "tpl", "exprs", "value", "UNSTABLE_comment", "children", "provider", "__c", "__", "isClassComponent", "prototype", "createComponent", "count", "call", "getChildContext", "errorBoundaries", "getDerivedStateFromError", "componentDidCatch", "key", "err", "str", "error", "onError", "res", "errorHook", "renderNestedChildren", "s", "html", "name", "v", "__html", "styleObjToCss", "NAMESPACE_REPLACE_REGEX", "test", "replace", "toLowerCase", "UNSAFE_NAME", "HTML_ENUMERATED", "has", "SVG_CAMEL_CASE", "HTML_LOWER_CASE", "SELF_CLOSING", "endTag", "startTag", "Set", "vnodeId", "isArray", "Array", "createVNode", "type", "props", "key", "isStaticChildren", "__source", "__self", "ref", "i", "normalizedProps", "vnode", "__k", "__", "__b", "__e", "__d", "__c", "constructor", "__v", "__i", "__u", "defaultProps", "options", "u", "message", "e", "u", "i", "u", "u", "cookies", "providers", "p", "session", "userByAccount", "currentAccount", "p", "provider", "message", "customFetch", "encoder", "decoder", "CHUNK_SIZE", "i", "customFetch", "types", "now", "message", "i", "customFetch", "customFetch", "now", "clockSkew", "clockTolerance", "now", "state", "encode", "parseCookie", "decode", "check", "state", "customFetch", "state", "idTokenClaims", "e", "e", "a", "session", "e", "k", "v", "signIn", "session", "newSession", "e", "customFetch", "as", "k", "state", "nonce", "e", "session", "e", "i", "secret", "message", "raw", "e", "c", "setEnvDefaults", "c", "session2", "session", "e", "Hono", "c", "env", "e", "e", "env", "env", "env", "init"]
}
